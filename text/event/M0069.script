function START()
{
    op_107();
    screenEffectInit();
    screenFade(160, 120, rgb(255,255,255), rgb(255,255,255), sub);
    levelFootstepSet(sfx_10);
    objVisible(obj_29, false);
    objVisible(obj_2a, false);
    ref_6 = todLoad(tod_e);
    wait(ref_6);
    todRun(tod_e, 1);
    envTriggerSet(DOORBOX, 14, 1, line, coll_20);
    envTriggerSet(DOORBOX, 14, 1, collision_5, coll_2);
    envTriggerSet(HIDARI, 56, 1, collision_5, coll_0);
    envTriggerSet(MIGI, 131, 1, collision_5, coll_1);
    ref_d = spriteLoad(sprite_a4);
    wait(ref_d);
    unitSpawn(shopkeeper, sprite_a4, 1088, -60, -968, north, none);
    envTriggerSet(IGORU, 56, 1, collision_5, coll_3);
    ref_11 = spriteLoad(sprite_a6);
    wait(ref_11);
    unitSpawn(npc1, sprite_a6, 1269, -60, -695, north, none);
    unitTriggerSet(npc1, BERADONNA, 255, 1);
    ref_15 = spriteLoad(sprite_a5);
    wait(ref_15);
    unitSpawn(npc2, sprite_a5, 1028, -60, -740, north, none);
    ref_18 = spriteLoad(sprite_a7);
    wait(ref_18);
    unitSpawn(unit_76, sprite_a7, 750, -60, -1250, north, none);
    unitTriggerSet(unit_76, ESI, 255, 1);
    cameraSet(northwest, 111, 0, -996);
    call(FREEBOX);
}

function FREEBOX()
{
    bitGet(var_0, LBIT_0000);
    bnz(var_0, label_35);
    bitGet(var_0, MBIT_SUN_BEL03);
    bnz(var_0, label_28);
    bitGet(var_0, MBIT_SUN_BEL02);
    bnz(var_0, label_2d);
    bitGet(var_0, MBIT_SUN_BEL01);
    bnz(var_0, label_30);
    b(label_33);
  label_28:
    bitClear(MBIT_SUN_BEL03);
    bitClear(MBIT_SUN_BEL02);
    bitClear(MBIT_SUN_BEL01);
    sndMusicPlay(sound_3003, 127);
    b(label_35);
  label_2d:
    bitSet(MBIT_SUN_BEL03);
    sndMusicPlay(sound_3002, 127);
    b(label_35);
  label_30:
    bitSet(MBIT_SUN_BEL02);
    sndMusicPlay(sound_3001, 127);
    b(label_35);
  label_33:
    bitSet(MBIT_SUN_BEL01);
    sndMusicPlay(sound_3000, 127);
  label_35:
    li(var_0, 0);
    partyMemberCheck(var_0, ulala);
    add(var_5, var_5, var_0);
    bez(var_0, label_3d);
    ref_39 = spriteLoad(sprite_6);
    wait(ref_39);
    unitSpawn(ulala, sprite_6, 851, -30, -1662, south, none);
    unitTriggerSet(ulala, B_URARATI, 255, 1);
  label_3d:
    partyMemberCheck(var_0, katsuya);
    add(var_5, var_5, var_0);
    bez(var_0, label_44);
    ref_40 = spriteLoad(sprite_d);
    wait(ref_40);
    unitSpawn(katsuya, sprite_d, 316, 0, -1256, west, none);
    unitTriggerSet(katsuya, B_KATUYYY, 255, 1);
  label_44:
    partyMemberCheck(var_0, baofu);
    add(var_5, var_5, var_0);
    bez(var_0, label_4b);
    ref_47 = spriteLoad(sprite_13);
    wait(ref_47);
    unitSpawn(baofu, sprite_13, 91, 0, -756, west, none);
    unitTriggerSet(baofu, B_PAO, 255, 1);
  label_4b:
    partyMemberCheck(var_0, nanjo);
    add(var_5, var_5, var_0);
    bez(var_0, label_52);
    ref_4e = spriteLoad(sprite_1f);
    wait(ref_4e);
    unitSpawn(nanjo, sprite_1f, 287, 0, -899, west, none);
    unitTriggerSet(nanjo, B_NANJ, 255, 1);
  label_52:
    partyMemberCheck(var_0, elly);
    add(var_5, var_5, var_0);
    bez(var_0, label_59);
    ref_55 = spriteLoad(sprite_23);
    wait(ref_55);
    unitSpawn(elly, sprite_23, 1009, -30, -1624, south, none);
    unitTriggerSet(elly, B_ERI, 255, 1);
  label_59:
    partyMemberCheck(var_0, tatsuya);
    add(var_5, var_5, var_0);
    bez(var_0, label_61);
    ref_5c = spriteLoad(sprite_18);
    wait(ref_5c);
    unitSpawn(tatsuya, sprite_18, 147, 0, -1408, west, none);
    unitTriggerSet(tatsuya, B_TATU, 255, 1);
    b(label_6a);
  label_61:
    bitGet(var_0, EBIT_E008C);
    bne(var_0, 0, label_64);
    b(label_6a);
  label_64:
    bne(var_0, 1, label_6a);
    ref_65 = spriteLoad(sprite_18);
    wait(ref_65);
    unitSpawn(tatsuya, sprite_18, 147, 0, -1408, west, none);
    unitTriggerSet(tatsuya, B_TATU, 255, 1);
    b(label_6a);
  label_6a:
    ref_6a = spriteLoad(sprite_2);
    wait(ref_6a);
    ref_6c = spriteLoad(sprite_0);
    wait(ref_6c);
    bitGet(var_0, LBIT_0001);
    bne(var_0, 0, label_73);
    playerInit(west);
    controlDisable();
    b(label_77);
  label_73:
    bne(var_0, 1, label_77);
    playerInit(south);
    controlDisable();
    b(label_77);
  label_77:
    unitAnimationPlay(shopkeeper, animation_11, 1);
    unitAnimationPlay(npc2, animation_0, 1);
    unitAnimationPlay(npc1, animation_7, 1);
    unitAnimationPlay(unit_76, animation_b, 1);
    screenEffectUnknown();
    screenFadeInner(rgb(0,0,0), 6, true);
    screenFadeOuter(rgb(0,0,0), 6, true);
    unitIdleOnAll();
    screenFadeWait(inner);
    screenFadeWait(outer);
    controlEnable();
    cameraControlDisable();
}

function B_URARATI()
{
    controlDisable();
    unitFacePlayer(ulala);
    ref_86 = bustupLoad(bustup_17);
    bustupWait(ref_86);
    ref_88 = bustupAlloc(ref_86, left, rgb(0,0,0));
    bustupFade(ref_88, rgb(128,0,0), 30);
    ref_8a = dialogAlloc();
    ref_8b = msgShow(msg_0);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]It’s nice in here isn’t it?
[tab]Is there an air conditioner somewhere?
[tab]...Does this place even have electricity?
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_1a, 1);
    wait(ref_8b);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_8a);
    ref_90 = bustupFade(ref_88, rgb(0,0,0), 10);
    bustupWait(ref_90);
    bustupFree(ref_88);
    unitRestoreFacing(ulala);
    controlEnable();
    cameraControlDisable();
}

function B_KATUYYY()
{
    controlDisable();
    unitFacePlayer(katsuya);
    unitAnimationPlay(katsuya, animation_1a, 1);
    ref_9a = bustupLoad(bustup_21);
    bustupWait(ref_9a);
    ref_9c = bustupAlloc(ref_9a, left, rgb(0,0,0));
    bustupFade(ref_9c, rgb(128,0,0), 30);
    ref_9e = dialogAlloc();
    ref_9f = msgShow(msg_1);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]Persona... The strength of heart personified...
[tab]How many people have this power?
[tab]How many use it for evil?
[wait][clear]
***************************************/
    wait(ref_9f);
    dialogFree(ref_9e);
    ref_a2 = bustupFade(ref_9c, rgb(0,0,0), 10);
    bustupWait(ref_a2);
    bustupFree(ref_9c);
    unitAnimationPlay(katsuya, animation_a, 1);
    unitRestoreFacing(katsuya);
    controlEnable();
    cameraControlDisable();
}

function B_PAO()
{
    controlDisable();
    unitFacePlayer(baofu);
    ref_ac = bustupLoad(bustup_2d);
    bustupWait(ref_ac);
    ref_ae = bustupAlloc(ref_ac, left, rgb(0,0,0));
    bustupFade(ref_ae, rgb(128,0,0), 30);
    ref_b0 = dialogAlloc();
    ref_b1 = msgShow(msg_2);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]That Serizawa, she’s too relaxed...
[tab]if you lose your edge you’re dead.
[tab]Although people like [suou] worry too much.
[wait][clear][color(yellow)]Baofu[color(white)]
[tab]...I don’t know, let’s talk about it later.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1a, 1);
    wait(ref_b1);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_b0);
    ref_b6 = bustupFade(ref_ae, rgb(0,0,0), 10);
    bustupWait(ref_b6);
    bustupFree(ref_ae);
    unitRestoreFacing(baofu);
    controlEnable();
    cameraControlDisable();
}

function B_NANJ()
{
    controlDisable();
    ref_be = bustupLoad(bustup_36);
    bustupWait(ref_be);
    ref_c0 = bustupAlloc(ref_be, left, rgb(0,0,0));
    bustupFade(ref_c0, rgb(128,0,0), 30);
    ref_c2 = dialogAlloc();
    ref_c3 = msgShow(msg_3);
/***************************************
[color(yellow)]Nanjo[color(white)]
[tab]This place never changes...
[tab]It makes me remember my past struggles.
[tab]Negotiating with demons... it was tough.
[wait][clear]
***************************************/
    unitAnimationPlay(nanjo, animation_6, 1);
    wait(ref_c3);
    unitAnimationPlay(nanjo, animation_a, 1);
    dialogFree(ref_c2);
    ref_c8 = bustupFade(ref_c0, rgb(0,0,0), 10);
    bustupWait(ref_c8);
    bustupFree(ref_c0);
    controlEnable();
    cameraControlDisable();
}

function B_ERI()
{
    controlDisable();
    unitFacePlayer(elly);
    ref_d0 = bustupLoad(bustup_40);
    bustupWait(ref_d0);
    ref_d2 = bustupAlloc(ref_d0, left, rgb(0,0,0));
    bustupFade(ref_d2, rgb(128,0,0), 30);
    ref_d4 = dialogAlloc();
    ref_d5 = msgShow(msg_4);
/***************************************
[color(yellow)]Elly[color(white)]
[tab]I wonder what kind of food the others like?
[tab]I often eat sweets since I’m so busy.
[tab]I would happily accept it if you gave me some.
[wait][clear]
***************************************/
    unitAnimationPlay(elly, animation_6, 1);
    wait(ref_d5);
    unitAnimationPlay(elly, animation_a, 1);
    dialogFree(ref_d4);
    ref_da = bustupFade(ref_d2, rgb(0,0,0), 10);
    bustupWait(ref_da);
    bustupFree(ref_d2);
    unitRestoreFacing(elly);
    controlEnable();
    cameraControlDisable();
}

function B_TATU()
{
    controlDisable();
    ref_e2 = bustupLoad(bustup_10);
    bustupWait(ref_e2);
    ref_e4 = bustupAlloc(ref_e2, left, rgb(0,0,0));
    bustupFade(ref_e4, rgb(128,0,0), 30);
    ref_e6 = dialogAlloc();
    ref_e7 = msgShow(msg_5);
/***************************************
[color(yellow)][tatsuya][color(white)]
[tab]If I ever atone...
[tab]What would happen to my persona...
[tab]Would I ever see this room again...
[wait][clear]
***************************************/
    unitAnimationPlay(tatsuya, animation_6, 1);
    wait(ref_e7);
    unitAnimationPlay(tatsuya, animation_a, 1);
    dialogFree(ref_e6);
    ref_ec = bustupFade(ref_e4, rgb(0,0,0), 10);
    bustupWait(ref_ec);
    bustupFree(ref_e4);
    controlEnable();
    cameraControlDisable();
}

function IGORU()
{
    controlDisable();
    ref_f3 = shopOverlayInit();
    bitGet(var_0, EBIT_E003E);
    bne(var_0, 0, label_f7);
    b(label_ff);
  label_f7:
    bne(var_0, 1, label_ff);
    bitGet(var_0, MBIT_BEL_IGOUL);
    bne(var_0, 0, label_fc);
    b(label_13c);
    b(label_fe);
  label_fc:
    bne(var_0, 1, label_fe);
    b(label_fe);
  label_fe:
    b(label_ff);
  label_ff:
    bitGet(var_0, VBIT_MUTATION_ON);
    bne(var_0, 0, label_103);
    b(label_14f);
    b(label_10c);
  label_103:
    bne(var_0, 1, label_10c);
    bitGet(var_0, VBIT_MUT_MES_OFF);
    bne(var_0, 0, label_108);
    b(label_10c);
    b(label_10b);
  label_108:
    bne(var_0, 1, label_10b);
    b(label_14f);
    b(label_10b);
  label_10b:
    b(label_10c);
  label_10c:
    ref_10c = bustupLoad(bustup_e0);
    bustupWait(ref_10c);
    ref_10e = bustupAlloc(ref_10c, right, rgb(0,0,0));
    bustupFade(ref_10e, rgb(128,0,0), 30);
    ref_110 = dialogAlloc();
    ref_111 = msgShow(msg_6);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Hmm?
[tab]It seems that there is a Persona
[tab]trying to be reborn into a new form.
[sync][wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_8, 1);
    sync();
    wait(ref_111);
    ref_115 = msgShow(msg_7);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]I forgot to explain, but...
[sync][wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_a, 1);
    sync();
    wait(ref_115);
    ref_119 = msgShow(msg_8);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]You are familiar with Fusion Spells,
[tab]correct? When use you it, there is a chance
[tab]it will cause a Persona to mutate.
[sync][wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_b, 1);
    sync();
    wait(ref_119);
    ref_11d = msgShow(msg_9);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]There are Personas that increase in ability,
[tab]and others that gain new spells, but there
[tab]are ones that become a different Persona.
[sync][wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_a, 1);
    sync();
    wait(ref_11d);
    ref_121 = msgShow(msg_10);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]But to do so they need my help,
[tab]so if such a change occurs,
[tab]please come to me.
[sync][wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_b, 1);
    sync();
    wait(ref_121);
    ref_125 = msgShow(msg_11);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Of course,
[tab]it is not necessary that
[tab]you mutate your Persona.
[sync][wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_8, 1);
    sync();
    wait(ref_125);
    ref_129 = msgShow(msg_12);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]After mutation, a Persona returns to
[tab]Rank 1, so please decide on your own
[tab]whether or not to mutate it.
[sync][wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_a, 1);
    sync();
    wait(ref_129);
    ref_12d = msgShow(msg_13);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Also, [delay(15)]if you have the same post-mutated
[tab]Persona, it might not let the mutation
[tab]happen, so be warned.
[sync][wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_b, 1);
    sync();
    wait(ref_12d);
    dialogFree(ref_110);
    ref_132 = bustupFade(ref_10e, rgb(0,0,0), 10);
    bustupWait(ref_132);
    bustupFree(ref_10e);
    wait(ref_f3);
    bitSet(VBIT_MUT_MES_OFF);
    shopInventory(3, shopInventory_0);
    shopInventory(4, shopInventory_0);
    shopInventory(2, shopInventory_0);
    shopInventory(8, shopInventory_0);
    b(label_14f);
  label_13c:
    ref_13c = bustupLoad(bustup_e0);
    bustupWait(ref_13c);
    ref_13e = bustupAlloc(ref_13c, right, rgb(0,0,0));
    bustupFade(ref_13e, rgb(128,0,0), 30);
    ref_140 = dialogAlloc();
    ref_141 = msgShow(msg_14);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Welcome to the Velvet Room.
[tab]This is where the different forms of
[tab]people’s hearts are called to awaken...
[wait][clear][color(yellow)]Igor[color(white)]
[tab]By order of our Master Philemon, 
[tab]we have been waiting here for you.
[tab]My name is Igor.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]We are told to assist the awakening
[tab]of your new hearts, your new Personas.
[tab]I am very glad to make your acquaintance...
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_141);
    dialogFree(ref_140);
    ref_145 = bustupFade(ref_13e, rgb(0,0,0), 10);
    bustupWait(ref_145);
    bustupFree(ref_13e);
    wait(ref_f3);
    bitSet(MBIT_BEL_IGOUL);
    shopInventory(3, shopInventory_0);
    shopInventory(4, shopInventory_0);
    shopInventory(2, shopInventory_0);
    shopInventory(8, shopInventory_0);
    b(label_14f);
  label_14f:
    ref_14f = bustupLoad(bustup_e0);
    bustupWait(ref_14f);
    ref_151 = bustupAlloc(ref_14f, right, rgb(0,0,0));
    bustupFade(ref_151, rgb(128,0,0), 30);
    choiceSetResult(6);
    op_105(3);
    ref_155 = dialogAlloc();
    ref_156 = msgShow(msg_15);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Welcome to the Velvet Room.
[tab]What business do you have today?
[choice(8)]Summon Persona
Take on Persona
Return Persona
[if_all(VBIT_MUTATION_ON)]Mutate Persona
Talk to Igor
[if_all(EBIT_SINARIOFF)]Additional Scenario
Cancel
Leave
[end_choice][clear]
***************************************/
    sync();
    wait(ref_156);
    dialogFree(ref_155);
    ref_15a = bustupFade(ref_151, rgb(0,0,0), 10);
    bustupWait(ref_15a);
    bustupFree(ref_151);
    wait(ref_f3);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_163);
    li(var_5, 0);
    b(label_178);
  label_163:
    bne(var_0, 1, label_166);
    li(var_5, 1);
    b(label_178);
  label_166:
    bne(var_0, 2, label_169);
    li(var_5, 2);
    b(label_178);
  label_169:
    bne(var_0, 3, label_16c);
    li(var_5, 3);
    b(label_178);
  label_16c:
    bne(var_0, 4, label_16f);
    li(var_5, 4);
    b(label_178);
  label_16f:
    bne(var_0, 5, label_172);
    li(var_5, 5);
    b(label_178);
  label_172:
    bne(var_0, 6, label_175);
    li(var_5, 6);
    b(label_178);
  label_175:
    bne(var_0, 7, label_178);
    li(var_5, 7);
    b(label_178);
  label_178:
    shopInventory(3, shopInventory_0);
    shopInventory(4, shopInventory_0);
    shopInventory(2, shopInventory_0);
    shopInventory(8, shopInventory_0);
    bitGet(var_0, VBIT_MUTATION_ON);
    bne(var_0, 0, label_181);
    ref_17e = shopOpen(6);
    wait(ref_17e);
    b(label_185);
  label_181:
    bne(var_0, 1, label_185);
    ref_182 = shopOpen(7);
    wait(ref_182);
    b(label_185);
  label_185:
}

function HA_SHOP_RESTART_0()
{
    choiceSetResult(6);
    op_105(3);
    ref_188 = bustupLoad(bustup_e0);
    bustupWait(ref_188);
    ref_18a = bustupAlloc(ref_188, right, rgb(0,0,0));
    bustupFade(ref_18a, rgb(128,0,0), 30);
    ref_18c = dialogAlloc();
    ref_18d = msgShow(msg_16);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Is there anything else?
[choice(8)]Summon Persona
Take on Persona
Return Persona
[if_all(VBIT_MUTATION_ON)]Mutate Persona
Talk to Igor
[if_all(EBIT_SINARIOFF)]Additional Scenario
Cancel
Leave
[end_choice][clear]
***************************************/
    sync();
    wait(ref_18d);
    dialogFree(ref_18c);
    ref_191 = bustupFade(ref_18a, rgb(0,0,0), 10);
    bustupWait(ref_191);
    bustupFree(ref_18a);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_199);
    li(var_5, 0);
    b(label_1ae);
  label_199:
    bne(var_0, 1, label_19c);
    li(var_5, 1);
    b(label_1ae);
  label_19c:
    bne(var_0, 2, label_19f);
    li(var_5, 2);
    b(label_1ae);
  label_19f:
    bne(var_0, 3, label_1a2);
    li(var_5, 3);
    b(label_1ae);
  label_1a2:
    bne(var_0, 4, label_1a5);
    li(var_5, 4);
    b(label_1ae);
  label_1a5:
    bne(var_0, 5, label_1a8);
    li(var_5, 5);
    b(label_1ae);
  label_1a8:
    bne(var_0, 6, label_1ab);
    li(var_5, 6);
    b(label_1ae);
  label_1ab:
    bne(var_0, 7, label_1ae);
    li(var_5, 7);
    b(label_1ae);
  label_1ae:
}

function HA_SHOP_TALK_0()
{
    choiceSetResult(2);
    op_105(2);
    ref_1b1 = bustupLoad(bustup_e0);
    bustupWait(ref_1b1);
    ref_1b3 = bustupAlloc(ref_1b1, left, rgb(0,0,0));
    bustupFade(ref_1b3, rgb(128,0,0), 30);
    ref_1b5 = dialogAlloc();
    ref_1b6 = msgShow(msg_17);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]What shall we converse about?
[choice(3)]Make small talk
Tutorials
[if_all(EBIT_SINARIOFF)]Hidden items
[end_choice][clear]
***************************************/
    wait(ref_1b6);
    dialogFree(ref_1b5);
    ref_1b9 = bustupFade(ref_1b3, rgb(0,0,0), 10);
    bustupWait(ref_1b9);
    bustupFree(ref_1b3);
    choiceGetResult(var_0);
    bne(var_0, 0, label_1bf);
    b(label_1c6);
  label_1bf:
    bne(var_0, 1, label_1c2);
    b(label_1d8);
    b(label_1c6);
  label_1c2:
    bne(var_0, 2, label_1c6);
    li(var_5, 1000);
    b(label_260);
    b(label_1c6);
  label_1c6:
    ref_1c6 = bustupLoad(bustup_e0);
    bustupWait(ref_1c6);
    ref_1c8 = bustupAlloc(ref_1c6, right, rgb(0,0,0));
    bustupFade(ref_1c8, rgb(128,0,0), 30);
    ref_1ca = dialogAlloc();
    ref_1cb = msgShow(msg_18);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Your persona will always be with you.
[tab]Even if you no longer use its power
[tab]it will continue to guide and protect you.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_1cb);
    dialogFree(ref_1ca);
    ref_1cf = bustupFade(ref_1c8, rgb(0,0,0), 10);
    bustupWait(ref_1cf);
    bustupFree(ref_1c8);
    b(label_260);
    ref_1d3 = bustupLoad(bustup_e0);
    bustupWait(ref_1d3);
    ref_1d5 = bustupAlloc(ref_1d3, left, rgb(0,0,0));
    bustupFade(ref_1d5, rgb(128,0,0), 30);
    ref_1d7 = dialogAlloc();
  label_1d8:
    choiceSetResult(6);
    op_105(7);
    ref_1da = msgShow(msg_19);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Please, ask away.
[choice(7)]Personas
Taking on and invoking.
Arcana
Persona growth
Persona compatibility
Next Page
[if(EBIT_SINARIOFF)]Hidden items Back
[end_choice][clear]
***************************************/
    wait(ref_1da);
    choiceGetResult(var_0);
    bne(var_0, 0, label_1e0);
    b(label_22f);
    b(label_1f3);
  label_1e0:
    bne(var_0, 1, label_1e3);
    b(label_232);
    b(label_1f3);
  label_1e3:
    bne(var_0, 2, label_1e6);
    b(label_235);
    b(label_1f3);
  label_1e6:
    bne(var_0, 3, label_1e9);
    b(label_238);
    b(label_1f3);
  label_1e9:
    bne(var_0, 4, label_1ec);
    b(label_23b);
    b(label_1f3);
  label_1ec:
    bne(var_0, 5, label_1ef);
    b(label_1f4);
    b(label_1f3);
  label_1ef:
    bne(var_0, 6, label_1f3);
    li(var_5, 1000);
    b(label_25c);
    b(label_1f3);
  label_1f3:
    wait(ref_1da);
  label_1f4:
    choiceSetResult(7);
    op_105(7);
    ref_1f6 = msgShow(msg_20);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Please, ask away.
[choice(8)]Tarot Cards
Material Cards
Skill Cards
Incense Cards
Persona Cards
Next Page
Previous Page
[if(EBIT_SINARIOFF)]Hidden items Back
[end_choice][clear]
***************************************/
    wait(ref_1f6);
    choiceGetResult(var_0);
    bne(var_0, 0, label_1fc);
    b(label_23e);
    b(label_212);
  label_1fc:
    bne(var_0, 1, label_1ff);
    b(label_241);
    b(label_212);
  label_1ff:
    bne(var_0, 2, label_202);
    b(label_244);
    b(label_212);
  label_202:
    bne(var_0, 3, label_205);
    b(label_247);
    b(label_212);
  label_205:
    bne(var_0, 4, label_208);
    b(label_24a);
    b(label_212);
  label_208:
    bne(var_0, 5, label_20b);
    b(label_213);
    b(label_212);
  label_20b:
    bne(var_0, 6, label_20e);
    b(label_1d8);
    b(label_212);
  label_20e:
    bne(var_0, 7, label_212);
    li(var_5, 1000);
    b(label_25c);
    b(label_212);
  label_212:
    wait(ref_1f6);
  label_213:
    choiceSetResult(6);
    op_105(7);
    ref_215 = msgShow(msg_21);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Please, ask away.
[choice(7)]Summoning basics
Mystic change
Mutation
Contacting
Demon personalities
Previous Page
[if(EBIT_SINARIOFF)]Hidden items Back
[end_choice][clear]
***************************************/
    wait(ref_215);
    choiceGetResult(var_0);
    bne(var_0, 0, label_21b);
    b(label_24d);
    b(label_22e);
  label_21b:
    bne(var_0, 1, label_21e);
    b(label_250);
    b(label_22e);
  label_21e:
    bne(var_0, 2, label_221);
    b(label_253);
    b(label_22e);
  label_221:
    bne(var_0, 3, label_224);
    b(label_256);
    b(label_22e);
  label_224:
    bne(var_0, 4, label_227);
    b(label_259);
    b(label_22e);
  label_227:
    bne(var_0, 5, label_22a);
    b(label_1f4);
    b(label_22e);
  label_22a:
    bne(var_0, 6, label_22e);
    li(var_5, 1000);
    b(label_25c);
    b(label_22e);
  label_22e:
    wait(ref_215);
  label_22f:
    ref_22f = msgShow(msg_22);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]The self suffused with divine love. The self
[tab]capable of demonic cruelty. People live by
[tab]wearing different masks.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Your current self may be only one of those
[tab]innumerable masks. Personas are another aspect
[tab]of you that lurks deep within your heart.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Those who can summon Personas into material
[tab]forms and harness their power are called
[tab]Persona-users.
[wait][clear]
***************************************/
    wait(ref_22f);
    b(label_1d8);
  label_232:
    ref_232 = msgShow(msg_23);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]In order to invoke a Persona - to use its
[tab]powers, in other words - it must first be
[tab]taken on.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]To "take" on a Persona means for a Persona-
[tab]user such as yourself to accept it into you.
[tab]Just having its card will do you no good.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]But you cannot take on Personas whose level
[tab]is five or more above your own.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]When one takes on a Persona, it affects the
[tab]stats of the Persona-user as well.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Personas are a hidden side of you... Thus, you
[tab]change with respect to them.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]You can only take on one Persona at a time.
[tab]but if you have other Persona Cards, you can
[tab]take them on at any time as well.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Should you do so, the Persona you had formerly
[tab]taken on will return to its Persona Card state.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]A Persona’s abilities differ depending on 
[tab]its type. Each has its own strengths and
[tab]weaknesses.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Understanding each Persona’s abilities and
[tab]switching between them to suit the situation
[tab]at hand is paramount to your survival.
[wait][clear]
***************************************/
    wait(ref_232);
    b(label_1d8);
  label_235:
    ref_235 = msgShow(msg_24);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Personas have types, just like demons. [wait][clear][color(yellow)]Igor[color(white)]
[tab]Their type is represented by the Arcana of
[tab]the Tarot, such as Magician, Emperor, Chariot,
[tab]and the like. There are 26 types.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Some Arcana cannot be met by my summoning...
[tab]You will have to do some experimentation to
[tab]encounter these Arcana.
[wait][clear]
***************************************/
    wait(ref_235);
    b(label_1d8);
  label_238:
    ref_238 = msgShow(msg_25);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Though Personas are your hidden sides, it must
[tab]come as a surprise that you can get in touch
[tab]with this unconscious aspect of yourself.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]No one can fully harness a Persona’s power
[tab]from the start.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]This is especially true of newer Personas...
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Thus, a Persona will have only a small portion
[tab]of its true power at the outset.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]But the more you invoke a Persona, the more
[tab]adept you become at it. It will gain more
[tab]abilities, more powerful attacks.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Of course, that is just the fruit of being
[tab]able to fully utilize a Persona. The SP 
[tab]needed to invoke it will not change.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]The nuances are somewhat different from your
[tab]own growth, but it may be best to think of
[tab]this as a Persona’s growth.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]A Persona’s growth occurs in eight stages. At 
[tab]each stage, a change will occur in the Persona.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Personas will also have a slight effect on 
[tab]your own growth.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]The way it affects your growth depends on the 
[tab]type of Persona you take on. Remember this.
[wait][clear]
***************************************/
    wait(ref_238);
    b(label_1d8);
  label_23b:
    ref_23b = msgShow(msg_26);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]A Persona is your other self... All Personas 
[tab]are connected to you...
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Still, some are close resemblances to your 
[tab]psyche, while others are quite distant.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]You may not be able to control a Persona if 
[tab]your connection to it is weak. Indeed, you 
[tab]may not be able to take it on at all.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]The reverse of this is that the closer they 
[tab]are to you, the easier it is to use them. This 
[tab]can be seen in the cost of invoking them.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]In some cases, invoking a skill will cost less 
[tab]SP than usual. But these circumstances will 
[tab]not be the same for everyone.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]You should experiment and see for yourself.
[wait][clear]
***************************************/
    wait(ref_23b);
    b(label_1d8);
  label_23e:
    ref_23e = msgShow(msg_27);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Tarot Cards are necessary for a medium like
[tab]myself to summon new Personas.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Personas are classified according to the
[tab]Arcana of the Tarot, such as Magician and
[tab]Emperor...
[wait][clear][color(yellow)]Igor[color(white)]
[tab]If you wish to summon a Sun Persona, you will
[tab]need cards of that Arcana.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]The number of Tarot Cards required varies
[tab]depending on the Persona’s level.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Indeed, the higher the Persona’s level, the
[tab]more Tarot Cards are necessary to summon it.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Demons possess the Tarot Cards you need...
[tab]The cards they carry will be the same Arcana
[tab]as the demon itself.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Your task, then, is to collect Tarot Cards
[tab]from demons of the same Arcana as the Persona
[tab]you wish to summon.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]But contacting the same demons over and over
[tab]will do you little good. Higher-level demons
[tab]will possess more Tarot Cards.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]The best way to summon a high-level Persona
[tab]is to negotiate with equally high-level demons.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Some Tarot Cards, however, are held by
[tab]no demons.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]When you find Free Tarot Cards, consult the
[tab]Demon Painter over there.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Ah, yes, one final caveat: Even with the
[tab]requisite number of cards, you cannot summon
[tab]Personas that are five levels higher than you.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Do keep that in mind...
[wait][clear]
***************************************/
    wait(ref_23e);
    b(label_1f4);
  label_241:
    ref_241 = msgShow(msg_28);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]When I summon a Persona, you may choose to
[tab]add a Material Card.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Only one Material Card can be used per
[tab]summoning. By adding these cards, I can
[tab]summon special Personas.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]The Personas that correspond to your Material
[tab]Cards will be shown in blue on the summoning
[tab]list.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Material Cards are essential components in
[tab]creating powerful Personas...
[wait][clear]
***************************************/
    wait(ref_241);
    b(label_1f4);
  label_244:
    ref_244 = msgShow(msg_29);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]I can add a Skill Card at the moment of
[tab]summoning, if you choose.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Only one Skill Card can be used per summoning.
[tab]The newly summoned Persona will learn the
[tab]skill sealed within the card.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]For instance... Add an Agi Card when summoning
[tab]a new Persona, and that Persona will learn Agi.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Even skills they would not normally learn can
[tab]be taught with these cards.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Mind you, there are degrees of compatibility
[tab]between Skill Cards and Personas. If it’s low,
[tab]I cannot add the Skill Card.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Demons possess many of these Skill Cards.
[tab]The best way to obtain them would be through
[tab]negotiation with these demons...
[wait][clear][color(yellow)]Igor[color(white)]
[tab]There are rare Skill Cards as well, which can
[tab]be obtained in several ways. I suggest you
[tab]experiment for yourself.
[wait][clear]
***************************************/
    wait(ref_244);
    b(label_1f4);
  label_247:
    ref_247 = msgShow(msg_30);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]If you wish it, I can add Incense Cards you
[tab]find when I summon a new Persona.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Only one Incense Card can be used in any
[tab]given summoning. It will increase the
[tab]statistics of that Persona.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]These can only be used at the time of
[tab]summoning, so I recommend thinking it
[tab]through before adding one...
[wait][clear]
***************************************/
    wait(ref_247);
    b(label_1f4);
  label_24a:
    ref_24a = msgShow(msg_31);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Summoned Personas that are not taken on remain
[tab]in the form of Persona Cards.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]You can possess several Persona Cards at
[tab]once, but there is a limit.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]And remember, too, that the Personas you take
[tab]on count towards this limit.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]The power of Persona is crucial to your
[tab]journey. I recommend switching Personas
[tab]depending on the situation at hand.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]I will take good care of newly summoned
[tab]Personas here.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]I, too, have my limit, but I can hold onto
[tab]Personas in your possession along with newly
[tab]summoned Personas.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]But if I am storing the maximum number of
[tab]cards for you, I will not be able to summon
[tab]any new Personas. Remember that...
[wait][clear]
***************************************/
    wait(ref_24a);
    b(label_1f4);
  label_24d:
    ref_24d = msgShow(msg_32);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]My duty is to summon new Personas. I use the
[tab]Tarot Cards you carry as a medium to summon
[tab]the Personas slumbering deep within your soul.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]The more Tarot Cards you supply me, the higher
[tab]level Personas I can summon.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]However... Gathering Tarot Cards alone will
[tab]not be sufficient to summon every Persona.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Some require special conditions to be summoned.
[tab]They slumber at the depths of the unconscious
[tab]mind... You will need a way to awaken them.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]One such way is to summon them with the use
[tab]of Material Cards.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Beyond that, the growth of Personas may be
[tab]another way... I suggest you experiment and
[tab]see what works.
[wait][clear]
***************************************/
    wait(ref_24d);
    b(label_213);
  label_250:
    ref_250 = msgShow(msg_33);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Personas that have reached the maximum rank
[tab]of 8 will not grow any further.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Though they are extremely powerful, if you
[tab]return these Personas to the sea of
[tab]unconsciousness here in the Velvet Room...
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Their powers will be released. In return, they
[tab]will leave behind a memento of your time
[tab]together.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]This may be a weapon, a piece of armor, an
[tab]item... You can gain extremely rare things,
[tab]obtainable only in this fashion.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Try it for yourself and see what kind of
[tab]fantastic things you can obtain...
[wait][clear]
***************************************/
    wait(ref_250);
    b(label_213);
  label_253:
    ref_253 = msgShow(msg_34);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]When you use Fusion Spells frequently, in some
[tab]rare cases the Persona may undergo a mutation.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]The probability of this mutation is greatly
[tab]affected by your compatibility with the
[tab]Persona...
[wait][clear][color(yellow)]Igor[color(white)]
[tab]The better your compatibility, the higher the
[tab]chances of it mutating.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]The details of these mutations differ according
[tab]to the Persona’s rank. A low-level Persona may
[tab]simply mutate into Rank 2 or gain a few points.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]But a higher-ranked Persona may mutate to
[tab]learn new skills... Depending on the Persona,
[tab]it may become an entirely different Persona.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]It’s possible for some Personas to turn into
[tab]a Persona of an Arcana I am incapable of
[tab]summoning. Experiment and see![wait][clear]
***************************************/
    wait(ref_253);
    b(label_213);
  label_256:
    ref_256 = msgShow(msg_35);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Demons aren’t so unlike you. They know joy,
[tab]anger, and other emotions... You can talk to
[tab]them by making contact.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]A demon’s feelings can be measured through
[tab]its words, wounds, actions, and also a gauge.
[tab]I’ll explain how to read the emotion gauge...
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Happiness is represented as a green field. When
[tab]this emotion is at its highest, you can form a
[tab]pact with the demon.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]There are several benefits to forming pacts
[tab]with demons.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]They may give you rare Tarot Cards or tell you
[tab]interesting stories.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Demons you have pacts with will not give you
[tab]these things of their own will, however. You
[tab]must contact them again.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Next, anger is represented as a red field.
[tab]When this emotion is at its peak, negotiations
[tab]with the demon will be immediately cut off.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]When this happens, demons will no longer
[tab]listen. In the worst case, they will attack.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]This can also happen to demons you have a
[tab]pact with. It is highly inadvisable. I suggest
[tab]you do not anger them.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Next, fear is represented as a blue field.
[tab]When this emotion is at its height, the demon
[tab]will become frightened and run away.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Finally, eagerness is represented as a yellow
[tab]field. There is special significance in
[tab]raising this emotion to its highest level.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]For it is then that you can obtain Tarot
[tab]Cards, which are necessary in my summonings.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Summoning powerful Personas will require many
[tab]Tarot Cards, so it’s best to contact demons
[tab]frequently to collect them...
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Remember that happiness, anger, and fear may
[tab]increase alongside a demon’s eagerness.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]If happiness and eagerness reach critical levels
[tab]at the same time, for instance, you will not be
[tab]able to form a pact.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]And should anger or fear reach their peak at
[tab]the same time as eagerness, another unusual
[tab]result will occur.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]There are normally three stages of each
[tab]emotion. My advice would be to try and focus
[tab]on increasing a single emotion.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]That should cover the basics, I think. There
[tab]will be times when demons will ask questions
[tab]of you or open the battle by contacting you.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]But I’m sure you’ll figure all of this out
[tab]for yourself during your struggles...
[wait][clear]
***************************************/
    wait(ref_256);
    b(label_213);
  label_259:
    ref_259 = msgShow(msg_36);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Well then, allow me to explain what I know of
[tab]demon personalities.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]It’s as true of demons as it is of humans:
there are many different kinds.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Wise demons, snappish demons, timid demons...
[tab]Each has its own likes and dislikes.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]You must be mindful of these differences and
[tab]make contact with the demons.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Their personalities can be divided into eight
[tab]classifications: wise, foolish, joyful, timid,
[tab]forceful, gloomy, snappish, and haughty...
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Each demon has one or more of these qualities.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]The combination of these qualities will cause
[tab]their reactions to vary wildly when making
[tab]contact.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]There’s no knowing what a demon’s personality
[tab]is like if you’ve never contacted it, but once
[tab]you make contact, it will be apparent.
[wait][clear][color(yellow)]Igor[color(white)]
[tab]I recommend you try it out for yourself and
[tab]see the phenomenon in action...
[wait][clear]
***************************************/
    wait(ref_259);
    b(label_213);
  label_25c:
    dialogFree(ref_1d7);
    ref_25d = bustupFade(ref_1d5, rgb(0,0,0), 10);
    bustupWait(ref_25d);
    bustupFree(ref_1d5);
  label_260:
}

function HA_SHOP_END_0()
{
    ref_261 = bustupLoad(bustup_e0);
    bustupWait(ref_261);
    ref_263 = bustupAlloc(ref_261, right, rgb(0,0,0));
    bustupFade(ref_263, rgb(128,0,0), 30);
    ref_265 = dialogAlloc();
    ref_266 = msgShow(msg_37);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Well then, until you obtain cards anew,
[tab]I bid you, adieu.[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_10, 1);
    wait(ref_266);
    shopOverlayInit();
    dialogFree(ref_265);
    ref_26b = bustupFade(ref_263, rgb(0,0,0), 10);
    bustupWait(ref_26b);
    bustupFree(ref_263);
    bitGet(var_0, MBIT_EXITBIT);
    bne(var_0, 0, label_275);
    unitRestoreFacing(shopkeeper);
    controlEnable();
    unitAnimationPlay(shopkeeper, animation_11, 1);
    cameraControlDisable();
    b(label_278);
  label_275:
    bne(var_0, 1, label_278);
    call(EXITBOX);
    b(label_278);
  label_278:
}

function BERADONNA()
{
    controlDisable();
    unitFacePlayer(npc1);
    ref_27b = bustupLoad(bustup_e2);
    bustupWait(ref_27b);
    ref_27d = bustupAlloc(ref_27b, right, rgb(0,0,0));
    bustupFade(ref_27d, rgb(128,0,0), 30);
    ref_27f = dialogAlloc();
    ref_280 = msgShow(msg_38);
/***************************************
[color(yellow)]Belladonna[color(white)]
[tab]A person’s heart is like a pendulum♪...
[tab]An emotion hits and it turns to its partner♪... 
[tab]But will they return their feelings to us♪...
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_8, 1);
    wait(ref_280);
    dialogFree(ref_27f);
    ref_284 = bustupFade(ref_27d, rgb(0,0,0), 10);
    bustupWait(ref_284);
    bustupFree(ref_27d);
    unitRestoreFacing(npc1);
    controlEnable();
    unitAnimationPlay(npc1, animation_7, 1);
    cameraControlDisable();
}

function NANASI()
{
    controlDisable();
    ref_28d = bustupLoad(bustup_e1);
    bustupWait(ref_28d);
    ref_28f = bustupAlloc(ref_28d, right, rgb(0,0,0));
    bustupFade(ref_28f, rgb(128,0,0), 30);
    ref_291 = dialogAlloc();
    ref_292 = msgShow(msg_39);
/***************************************
[color(yellow)]Nameless[color(white)]
[tab]There is no need to doubt one’s senses.
[tab]What my eyes see and my ears hear is no lie.
[wait][clear][color(yellow)]Nameless[color(white)]
[tab]But one can’t know for sure.
[tab]Is there any proof that the piano notes you hear
[tab]are the ones I actually played?
[wait][clear]
***************************************/
    wait(ref_292);
    dialogFree(ref_291);
    ref_295 = bustupFade(ref_28f, rgb(0,0,0), 10);
    bustupWait(ref_295);
    bustupFree(ref_28f);
    controlEnable();
    cameraControlDisable();
    unitAnimationPlay(npc2, animation_0, 1);
}

function ESI()
{
    controlDisable();
    ref_29d = shopOverlayInit();
    unitFacePlayer(unit_76);
    ref_29f = bustupLoad(bustup_e3);
    bustupWait(ref_29f);
    ref_2a1 = bustupAlloc(ref_29f, right, rgb(0,0,0));
    bustupFade(ref_2a1, rgb(128,0,0), 30);
    choiceSetResult(2);
    op_105(3);
    ref_2a5 = dialogAlloc();
    bitGet(var_0, MBIT_BEL_ESI);
    bne(var_0, 0, label_2ae);
    ref_2a8 = msgShow(msg_40);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]I am the Demon Painter. I am the artist
[tab]who draws the gods and demons that dwell
[tab]within people. Nice to meet you.
[sync][wait][clear]
***************************************/
    bitSet(MBIT_BEL_ESI);
    sync();
    wait(ref_2a8);
    wait(ref_29d);
    b(label_2b4);
  label_2ae:
    bne(var_0, 1, label_2b4);
    ref_2af = msgShow(msg_41);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]Tarot cards are models of the heart.
[tab]The heart controls a person’s fate.
[tab]Do you want me to paint something?
[choice(4)]Request card
Talk
Cancel
Leave
[end_choice][clear]
***************************************/
    sync();
    wait(ref_2af);
    wait(ref_29d);
    b(label_2b4);
  label_2b4:
    dialogFree(ref_2a5);
    ref_2b5 = bustupFade(ref_2a1, rgb(0,0,0), 10);
    bustupWait(ref_2b5);
    bustupFree(ref_2a1);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_2bd);
    li(var_5, 0);
    b(label_2c6);
  label_2bd:
    bne(var_0, 1, label_2c0);
    li(var_5, 1);
    b(label_2c6);
  label_2c0:
    bne(var_0, 2, label_2c3);
    li(var_5, 2);
    b(label_2c6);
  label_2c3:
    bne(var_0, 3, label_2c6);
    li(var_5, 3);
    b(label_2c6);
  label_2c6:
    shopInventory(3, shopInventory_1);
    ref_2c7 = shopOpen(8);
    wait(ref_2c7);
}

function HA_SHOP_RESTART_1()
{
    choiceSetResult(2);
    op_105(3);
    ref_2cc = bustupLoad(bustup_e3);
    bustupWait(ref_2cc);
    ref_2ce = bustupAlloc(ref_2cc, left, rgb(0,0,0));
    bustupFade(ref_2ce, rgb(128,0,0), 30);
    ref_2d0 = dialogAlloc();
    ref_2d1 = msgShow(msg_42);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]Anything else?
[choice(4)]Request card
Talk
Cancel
Leave
[end_choice][clear]
***************************************/
    wait(ref_2d1);
    dialogFree(ref_2d0);
    ref_2d4 = bustupFade(ref_2ce, rgb(0,0,0), 10);
    bustupWait(ref_2d4);
    bustupFree(ref_2ce);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_2dc);
    li(var_5, 0);
    b(label_2e5);
  label_2dc:
    bne(var_0, 1, label_2df);
    li(var_5, 1);
    b(label_2e5);
  label_2df:
    bne(var_0, 2, label_2e2);
    li(var_5, 2);
    b(label_2e5);
  label_2e2:
    bne(var_0, 3, label_2e5);
    li(var_5, 3);
    b(label_2e5);
  label_2e5:
}

function HA_SHOP_TALK_1()
{
    ref_2e6 = bustupLoad(bustup_e3);
    bustupWait(ref_2e6);
    ref_2e8 = bustupAlloc(ref_2e6, right, rgb(0,0,0));
    bustupFade(ref_2e8, rgb(128,0,0), 30);
    ref_2ea = dialogAlloc();
    choiceSetResult(2);
    op_105(2);
    ref_2ed = msgShow(msg_43);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]Okay. What should we talk about?
[choice(3)]Make small talk
Ask about card creation
[if_all(EBIT_SINARIOFF)]Hidden items
[end_choice][clear]
***************************************/
    wait(ref_2ed);
    dialogFree(ref_2ea);
    ref_2f0 = bustupFade(ref_2e8, rgb(0,0,0), 10);
    bustupWait(ref_2f0);
    bustupFree(ref_2e8);
    choiceGetResult(var_0);
    bne(var_0, 0, label_2f6);
    b(label_2fd);
  label_2f6:
    bne(var_0, 1, label_2f9);
    b(label_377);
    b(label_2fd);
  label_2f9:
    bne(var_0, 2, label_2fd);
    li(var_5, 1000);
    b(label_3b6);
    b(label_2fd);
  label_2fd:
    bitGet(var_0, LBIT_0004);
    bne(var_0, 0, label_300);
    b(label_303);
  label_300:
    bne(var_0, 1, label_303);
    b(label_36a);
    b(label_303);
  label_303:
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_35d);
    bitGet(var_0, EBIT_E0046);
    bnz(var_0, label_350);
    bitGet(var_0, EBIT_E0043);
    bnz(var_0, label_343);
    bitGet(var_0, EBIT_E003E);
    bnz(var_0, label_336);
    bitGet(var_0, EBIT_E001F);
    bnz(var_0, label_329);
    bitGet(var_0, EBIT_E0018);
    bnz(var_0, label_31c);
    ref_30f = bustupLoad(bustup_e3);
    bustupWait(ref_30f);
    ref_311 = bustupAlloc(ref_30f, right, rgb(0,0,0));
    bustupFade(ref_311, rgb(128,0,0), 30);
    ref_313 = dialogAlloc();
    ref_314 = msgShow(msg_44);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]I speak through my artwork.
[tab]I’m not much of a conversationalist...
[tab]But I think I can get along with you.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_314);
    dialogFree(ref_313);
    ref_318 = bustupFade(ref_311, rgb(0,0,0), 10);
    bustupWait(ref_318);
    bustupFree(ref_311);
    b(label_3b6);
  label_31c:
    ref_31c = bustupLoad(bustup_e3);
    bustupWait(ref_31c);
    ref_31e = bustupAlloc(ref_31c, right, rgb(0,0,0));
    bustupFade(ref_31e, rgb(128,0,0), 30);
    ref_320 = dialogAlloc();
    ref_321 = msgShow(msg_45);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]I sometimes wonder...
[tab]If there is only one reality, the world
[tab]as we know it, or if there are more.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_321);
    dialogFree(ref_320);
    ref_325 = bustupFade(ref_31e, rgb(0,0,0), 10);
    bustupWait(ref_325);
    bustupFree(ref_31e);
    b(label_3b6);
  label_329:
    ref_329 = bustupLoad(bustup_e3);
    bustupWait(ref_329);
    ref_32b = bustupAlloc(ref_329, right, rgb(0,0,0));
    bustupFade(ref_32b, rgb(128,0,0), 30);
    ref_32d = dialogAlloc();
    ref_32e = msgShow(msg_46);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]Inside myself, there is another me.
[tab]I wonder what will he say looking at me?
[tab]Haha... he’ll probably laugh his head off.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_32e);
    dialogFree(ref_32d);
    ref_332 = bustupFade(ref_32b, rgb(0,0,0), 10);
    bustupWait(ref_332);
    bustupFree(ref_32b);
    b(label_3b6);
  label_336:
    ref_336 = bustupLoad(bustup_e3);
    bustupWait(ref_336);
    ref_338 = bustupAlloc(ref_336, right, rgb(0,0,0));
    bustupFade(ref_338, rgb(128,0,0), 30);
    ref_33a = dialogAlloc();
    ref_33b = msgShow(msg_47);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]Even if all Personas were born from the same
[tab]place, some can use it and some cannot.
[tab]A human’s heart is uncontrollable...
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_33b);
    dialogFree(ref_33a);
    ref_33f = bustupFade(ref_338, rgb(0,0,0), 10);
    bustupWait(ref_33f);
    bustupFree(ref_338);
    b(label_3b6);
  label_343:
    ref_343 = bustupLoad(bustup_e3);
    bustupWait(ref_343);
    ref_345 = bustupAlloc(ref_343, right, rgb(0,0,0));
    bustupFade(ref_345, rgb(128,0,0), 30);
    ref_347 = dialogAlloc();
    ref_348 = msgShow(msg_48);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]The folks here don’t know death.
[tab]Even I have forgotten about it. Will
[tab]there come a day that I’ll regret that...
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_348);
    dialogFree(ref_347);
    ref_34c = bustupFade(ref_345, rgb(0,0,0), 10);
    bustupWait(ref_34c);
    bustupFree(ref_345);
    b(label_3b6);
  label_350:
    ref_350 = bustupLoad(bustup_e3);
    bustupWait(ref_350);
    ref_352 = bustupAlloc(ref_350, right, rgb(0,0,0));
    bustupFade(ref_352, rgb(128,0,0), 30);
    ref_354 = dialogAlloc();
    ref_355 = msgShow(msg_49);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]What I like most is I can see how people’s
[tab]hearts are in this world. And I can see...
[tab]how they become twisted and distorted.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_355);
    dialogFree(ref_354);
    ref_359 = bustupFade(ref_352, rgb(0,0,0), 10);
    bustupWait(ref_359);
    bustupFree(ref_352);
    b(label_3b6);
  label_35d:
    ref_35d = bustupLoad(bustup_e3);
    bustupWait(ref_35d);
    ref_35f = bustupAlloc(ref_35d, right, rgb(0,0,0));
    bustupFade(ref_35f, rgb(128,0,0), 30);
    ref_361 = dialogAlloc();
    ref_362 = msgShow(msg_50);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]Did something happen in this world? 
[tab]The agitation in people’s hearts agitate even
[tab]this canvas. In the end, I am a human...
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_362);
    dialogFree(ref_361);
    ref_366 = bustupFade(ref_35f, rgb(0,0,0), 10);
    bustupWait(ref_366);
    bustupFree(ref_35f);
    b(label_3b6);
  label_36a:
    ref_36a = bustupLoad(bustup_e3);
    bustupWait(ref_36a);
    ref_36c = bustupAlloc(ref_36a, right, rgb(0,0,0));
    bustupFade(ref_36c, rgb(128,0,0), 30);
    ref_36e = dialogAlloc();
    ref_36f = msgShow(msg_51);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]Many things are up in the air.
[tab]...Perhaps power is the only way to solve this.
[wait][clear][color(yellow)]Demon Painter[color(white)]
[tab]Good done to others is good done to oneself...
[tab]It’s a good thing to return to.
[wait][clear]
***************************************/
    sync();
    wait(ref_36f);
    dialogFree(ref_36e);
    ref_373 = bustupFade(ref_36c, rgb(0,0,0), 10);
    bustupWait(ref_373);
    bustupFree(ref_36c);
    b(label_3b6);
  label_377:
    choiceSetResult(3);
    op_105(7);
    ref_379 = bustupLoad(bustup_e3);
    bustupWait(ref_379);
    ref_37b = bustupAlloc(ref_379, left, rgb(0,0,0));
    bustupFade(ref_37b, rgb(128,0,0), 30);
    ref_37d = dialogAlloc();
    ref_37e = msgShow(msg_52);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]What did you want to ask about?
[choice(3)]Free Tarot
How to obtain them
How to use them
[end_choice][clear]
***************************************/
    wait(ref_37e);
    dialogFree(ref_37d);
    unitAnimationPlay(unit_76, animation_0, 1);
    unitWait(unit_76);
    ref_383 = bustupFade(ref_37b, rgb(0,0,0), 10);
    bustupWait(ref_383);
    bustupFree(ref_37b);
    choiceGetResult(var_3);
    bne(var_3, 0, label_396);
    ref_388 = bustupLoad(bustup_e3);
    bustupWait(ref_388);
    ref_38a = bustupAlloc(ref_388, right, rgb(0,0,0));
    bustupFade(ref_38a, rgb(128,0,0), 30);
    ref_38c = dialogAlloc();
    ref_38d = msgShow(msg_53);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]Free Tarot Cards are special cards with nothing
[tab]drawn on them.
[wait][clear][color(yellow)]Demon Painter[color(white)]
[tab]They’re mysterious cards that can be turned
[tab]into any type of Tarot Card.
[wait][clear][color(yellow)]Demon Painter[color(white)]
[tab]I can draw on Free Tarot Cards and turn
[tab]them into something usable.
[wait][clear][color(yellow)]Demon Painter[color(white)]
[tab]If you find any Free Tarot Cards, bring them
[tab]to me.
[wait][clear]
***************************************/
    wait(ref_38d);
    dialogFree(ref_38c);
    unitAnimationPlay(unit_76, animation_9, 1);
    ref_391 = bustupFade(ref_38a, rgb(0,0,0), 10);
    bustupWait(ref_391);
    bustupFree(ref_38a);
    b(label_377);
    b(label_3b6);
  label_396:
    bne(var_3, 1, label_3a5);
    ref_397 = bustupLoad(bustup_e3);
    bustupWait(ref_397);
    ref_399 = bustupAlloc(ref_397, right, rgb(0,0,0));
    bustupFade(ref_399, rgb(128,0,0), 30);
    ref_39b = dialogAlloc();
    ref_39c = msgShow(msg_54);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]Every demon, no matter what type, might have
[tab]some Free Tarot Cards.
[wait][clear][color(yellow)]Demon Painter[color(white)]
[tab]But you can’t get them through standard
[tab]negotiations. Free Tarot Cards are valuable 
[tab]to demons too, after all.
[wait][clear][color(yellow)]Demon Painter[color(white)]
[tab]No, to get Free Tarot Cards from demons, you
[tab]have to win their trust. Humans and demons are
[tab]alike in that respect.
[wait][clear]
***************************************/
    wait(ref_39c);
    dialogFree(ref_39b);
    unitAnimationPlay(unit_76, animation_9, 1);
    ref_3a0 = bustupFade(ref_399, rgb(0,0,0), 10);
    bustupWait(ref_3a0);
    bustupFree(ref_399);
    b(label_377);
    b(label_3b6);
  label_3a5:
    bne(var_3, 2, label_3b4);
    ref_3a6 = bustupLoad(bustup_e3);
    bustupWait(ref_3a6);
    ref_3a8 = bustupAlloc(ref_3a6, right, rgb(0,0,0));
    bustupFade(ref_3a8, rgb(128,0,0), 30);
    ref_3aa = dialogAlloc();
    ref_3ab = msgShow(msg_55);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]In order to summon Personas, you just have to
[tab]collect Tarot Cards from demons of the same
[tab]Arcana...
[wait][clear][color(yellow)]Demon Painter[color(white)]
[tab]The tricky thing is that there are some Arcana
[tab]of Persona that don’t have corresponding demons.
[wait][clear][color(yellow)]Demon Painter[color(white)]
[tab]So what do you do when you want to summon a 
[tab]Persona of that Arcana? Simple. That’s where
[tab]Free Tarot Cards come in.
[wait][clear][color(yellow)]Demon Painter[color(white)]
[tab]You can use them to supplement the cards you need
[tab]for regular summonings, but you should be certain
[tab]before you use them that way.
[wait][clear]
***************************************/
    wait(ref_3ab);
    dialogFree(ref_3aa);
    unitAnimationPlay(unit_76, animation_9, 1);
    ref_3af = bustupFade(ref_3a8, rgb(0,0,0), 10);
    bustupWait(ref_3af);
    bustupFree(ref_3a8);
    b(label_377);
    b(label_3b6);
  label_3b4:
    bne(var_3, 3, label_3b6);
    b(label_3b6);
  label_3b6:
}

function HA_SHOP_END_1()
{
    ref_3b7 = bustupLoad(bustup_e3);
    bustupWait(ref_3b7);
    ref_3b9 = bustupAlloc(ref_3b7, right, rgb(0,0,0));
    bustupFade(ref_3b9, rgb(128,0,0), 30);
    ref_3bb = dialogAlloc();
    ref_3bc = msgShow(msg_56);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]I will always be here.
[tab]Come back whenever you feel like it.
[tab]Here, time does not mean anything.[sync][wait][clear]
***************************************/
    sync();
    wait(ref_3bc);
    shopOverlayInit();
    dialogFree(ref_3bb);
    ref_3c1 = bustupFade(ref_3b9, rgb(0,0,0), 10);
    bustupWait(ref_3c1);
    bustupFree(ref_3b9);
    shopInventory(3, shopInventory_1);
    bitGet(var_0, MBIT_EXITBIT);
    bne(var_0, 0, label_3cc);
    unitRestoreFacing(unit_76);
    controlEnable();
    unitAnimationPlay(unit_76, animation_b, 1);
    cameraControlDisable();
    b(label_3cf);
  label_3cc:
    bne(var_0, 1, label_3cf);
    call(EXITBOX);
    b(label_3cf);
  label_3cf:
}

function DOORBOX()
{
    controlDisable();
    objAnimRotate(obj_0, 0, -70, 0, 30, 0);
    sndMusicPlay(sound_3006, 127);
    objAnimWait(obj_0);
    call(EXITBOX);
}

function EXITBOX()
{
    bitClear(MBIT_EXITBIT);
    shopInventory(3, shopInventory_2a9);
    bne(var_3, 0, label_3db);
    b(label_3de);
    b(label_3de);
  label_3db:
    bne(var_3, 1, label_3de);
    b(label_3e0);
    b(label_3de);
  label_3de:
    mapLoad(last, 255, 255);
    b(label_3e1);
  label_3e0:
    mapLoad(rengedai, 0, 0);
  label_3e1:
}

function warp1()
{
    call(DOORBOX);
}

function HA_SHOP_EXPLAIN_0()
{
}

function HA_SHOP_EXPLAIN_1()
{
}

function ESIKUBI()
{
    delayClear();
    delayWait(100);
    unitAnimationPlay(unit_76, animation_3, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(unit_76, animation_0, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(unit_76, animation_1, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(unit_76, animation_2, 1);
    delayClear();
    delayWait(60);
    unitFace(unit_76, west);
    unitAnimationPlay(unit_76, animation_0, 1);
    delayClear();
    delayWait(60);
    unitAnimationPlay(unit_76, animation_9, 1);
}

function NANAMODORI()
{
    unitAnimationPlay(npc2, animation_3, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(npc2, animation_0, 1);
}

function IGOKUBI()
{
    delayClear();
    delayWait(120);
    unitAnimationPlay(shopkeeper, animation_1, 1);
    delayClear();
    delayWait(40);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(shopkeeper, animation_6, 1);
}

function HIDARI()
{
    call(NANASI);
    unitAnimationPlay(npc2, animation_3, 1);
    delayClear();
    delayWait(20);
    unitAnimationPlay(npc2, animation_4, 1);
}

function MIGI()
{
    call(NANASI);
    unitAnimationPlay(npc2, animation_1, 1);
    delayClear();
    delayWait(20);
    unitAnimationPlay(npc2, animation_2, 1);
}

function DECIDE_PAINT()
{
    ref_415 = bustupLoad(bustup_e3);
    bustupWait(ref_415);
    ref_417 = bustupAlloc(ref_415, left, rgb(0,0,0));
    bustupFade(ref_417, rgb(128,0,0), 30);
    choiceSetResult(1);
    op_105(1);
    ref_41b = dialogAlloc();
    ref_41c = msgShow(msg_57);
/***************************************
[color(yellow)]Demon Painter[color(white)]
[tab]Is this what you want?
[choice(2)]Yes
No
[end_choice][clear]
***************************************/
    wait(ref_41c);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_423);
    li(var_7, 1);
    b(label_426);
  label_423:
    bne(var_0, 1, label_426);
    li(var_7, 0);
    b(label_426);
  label_426:
    dialogFree(ref_41b);
    ref_427 = bustupFade(ref_417, rgb(0,0,0), 10);
    bustupWait(ref_427);
    bustupFree(ref_417);
}

function DECIDE_PERSONA()
{
    ref_42b = bustupLoad(bustup_e0);
    bustupWait(ref_42b);
    ref_42d = bustupAlloc(ref_42b, left, rgb(0,0,0));
    bustupFade(ref_42d, rgb(128,0,0), 30);
    choiceSetResult(1);
    op_105(1);
    ref_431 = dialogAlloc();
    ref_432 = msgShow(msg_58);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Will this Persona suffice?
[choice(2)]Yes
No
[end_choice][clear]
***************************************/
    wait(ref_432);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_43a);
    li(var_7, 1);
    unitAnimationPlay(shopkeeper, animation_e, 1);
    b(label_43d);
  label_43a:
    bne(var_0, 1, label_43d);
    li(var_7, 0);
    b(label_43d);
  label_43d:
    dialogFree(ref_431);
    ref_43e = bustupFade(ref_42d, rgb(0,0,0), 10);
    bustupWait(ref_43e);
    bustupFree(ref_42d);
}

function DECIDE_PERSONA_NG()
{
    ref_442 = bustupLoad(bustup_e0);
    bustupWait(ref_442);
    ref_444 = bustupAlloc(ref_442, left, rgb(0,0,0));
    bustupFade(ref_444, rgb(128,0,0), 30);
    ref_446 = dialogAlloc();
    ref_447 = msgShow(msg_59);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]You can’t mutate this Persona.
[wait][clear]
***************************************/
    wait(ref_447);
    dialogFree(ref_446);
    ref_44a = bustupFade(ref_444, rgb(0,0,0), 10);
    bustupWait(ref_44a);
    bustupFree(ref_444);
    li(var_7, 0);
}

function DECIDE_PERSONA_FAIL()
{
    ref_44f = bustupLoad(bustup_e0);
    bustupWait(ref_44f);
    ref_451 = bustupAlloc(ref_44f, left, rgb(0,0,0));
    bustupFade(ref_451, rgb(128,0,0), 30);
    choiceSetResult(1);
    op_105(1);
    ref_455 = dialogAlloc();
    ref_456 = msgShow(msg_60);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Will this Persona suffice?
[choice(2)]Yes
No
[end_choice][clear]
***************************************/
    wait(ref_456);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_45f);
    ref_45b = msgShow(msg_61);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]You already have that Persona.
[wait][clear]
***************************************/
    wait(ref_45b);
    li(var_7, 0);
    b(label_462);
  label_45f:
    bne(var_0, 1, label_462);
    li(var_7, 0);
    b(label_462);
  label_462:
    dialogFree(ref_455);
    ref_463 = bustupFade(ref_451, rgb(0,0,0), 10);
    bustupWait(ref_463);
    bustupFree(ref_451);
}

function DECIDE_DELETE()
{
    ref_467 = bustupLoad(bustup_e0);
    bustupWait(ref_467);
    ref_469 = bustupAlloc(ref_467, left, rgb(0,0,0));
    bustupFade(ref_469, rgb(128,0,0), 30);
    choiceSetResult(1);
    op_105(1);
    ref_46d = dialogAlloc();
    ref_46e = msgShow(msg_62);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]Are you sure you want to let go of this Persona?
[choice(2)]Yes
No
[end_choice][clear]
***************************************/
    wait(ref_46e);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_475);
    li(var_7, 1);
    b(label_478);
  label_475:
    bne(var_0, 1, label_478);
    li(var_7, 0);
    b(label_478);
  label_478:
    dialogFree(ref_46d);
    ref_479 = bustupFade(ref_469, rgb(0,0,0), 10);
    bustupWait(ref_479);
    bustupFree(ref_469);
}

function DEL_MES()
{
    ref_47d = bustupLoad(bustup_e0);
    bustupWait(ref_47d);
    ref_47f = bustupAlloc(ref_47d, left, rgb(0,0,0));
    bustupFade(ref_47f, rgb(128,0,0), 30);
    ref_481 = dialogAlloc();
    ref_482 = msgShow(msg_63);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]So, it is time to release [color(pink)][var(msg_var_0)][color(white)], 
[tab]an old part of the soul that had
[tab]been awakened...
[wait][clear][color(yellow)]Igor[color(white)]
[tab]Then I shall change this aspect who fought
[tab]alongside you into a [color(green)][var(msg_var_1)][color(white)] and
[tab]return it to you...
[wait][clear]
***************************************/
    wait(ref_482);
    dialogFree(ref_481);
    ref_485 = bustupFade(ref_47f, rgb(0,0,0), 10);
    bustupWait(ref_485);
    bustupFree(ref_47f);
}

function GET_MES()
{
    ref_489 = msgShow(msg_64);
/***************************************
[color(green)]Maya obtained [var(msg_var_1)][var(msg_var_2)]
[wait][clear]
***************************************/
    wait(ref_489);
}

function SMN_NG_LV()
{
    ref_48c = bustupLoad(bustup_e0);
    bustupWait(ref_48c);
    ref_48e = bustupAlloc(ref_48c, right, rgb(0,0,0));
    bustupFade(ref_48e, rgb(128,0,0), 30);
    ref_490 = dialogAlloc();
    ref_491 = msgShow(msg_65);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]It seems your team’s level is insufficient
[tab]to summon this Persona...
[wait][clear]
***************************************/
    wait(ref_491);
    dialogFree(ref_490);
    ref_494 = bustupFade(ref_48e, rgb(0,0,0), 10);
    bustupWait(ref_494);
    bustupFree(ref_48e);
}

function SMN_NG_PST()
{
    ref_498 = bustupLoad(bustup_e0);
    bustupWait(ref_498);
    ref_49a = bustupAlloc(ref_498, right, rgb(0,0,0));
    bustupFade(ref_49a, rgb(128,0,0), 30);
    ref_49c = dialogAlloc();
    ref_49d = msgShow(msg_66);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]You already have that Persona.
[wait][clear]
***************************************/
    wait(ref_49d);
    dialogFree(ref_49c);
    ref_4a0 = bustupFade(ref_49a, rgb(0,0,0), 10);
    bustupWait(ref_4a0);
    bustupFree(ref_49a);
}

function SMN_NG_VST()
{
    ref_4a4 = bustupLoad(bustup_e0);
    bustupWait(ref_4a4);
    ref_4a6 = bustupAlloc(ref_4a4, right, rgb(0,0,0));
    bustupFade(ref_4a6, rgb(128,0,0), 30);
    ref_4a8 = dialogAlloc();
    ref_4a9 = msgShow(msg_67);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]I am already keeping that Persona for you.
[wait][clear]
***************************************/
    wait(ref_4a9);
    dialogFree(ref_4a8);
    ref_4ac = bustupFade(ref_4a6, rgb(0,0,0), 10);
    bustupWait(ref_4ac);
    bustupFree(ref_4a6);
}

function SMN_NG_FULL()
{
    ref_4b0 = bustupLoad(bustup_e0);
    bustupWait(ref_4b0);
    ref_4b2 = bustupAlloc(ref_4b0, right, rgb(0,0,0));
    bustupFade(ref_4b2, rgb(128,0,0), 30);
    ref_4b4 = dialogAlloc();
    ref_4b5 = msgShow(msg_68);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]I cannot hold on to any more Personas for you.
[wait][clear]
***************************************/
    wait(ref_4b5);
    dialogFree(ref_4b4);
    ref_4b8 = bustupFade(ref_4b2, rgb(0,0,0), 10);
    bustupWait(ref_4b8);
    bustupFree(ref_4b2);
}

function SMN_NG_TAROT()
{
    ref_4bc = bustupLoad(bustup_e0);
    bustupWait(ref_4bc);
    ref_4be = bustupAlloc(ref_4bc, right, rgb(0,0,0));
    bustupFade(ref_4be, rgb(128,0,0), 30);
    ref_4c0 = dialogAlloc();
    ref_4c1 = msgShow(msg_69);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]It seems you do not have the requisite
[tab]Tarot Cards to summon this Persona.
[wait][clear]
***************************************/
    wait(ref_4c1);
    dialogFree(ref_4c0);
    ref_4c4 = bustupFade(ref_4be, rgb(0,0,0), 10);
    bustupWait(ref_4c4);
    bustupFree(ref_4be);
}

function SMN_NG_MTRL()
{
    ref_4c8 = bustupLoad(bustup_e0);
    bustupWait(ref_4c8);
    ref_4ca = bustupAlloc(ref_4c8, right, rgb(0,0,0));
    bustupFade(ref_4ca, rgb(128,0,0), 30);
    ref_4cc = dialogAlloc();
    ref_4cd = msgShow(msg_70);
/***************************************
[color(yellow)]Igor[color(white)]
[tab]It seems you do not have the requisite
[tab]Material Card to summon this Persona.
[wait][clear]
***************************************/
    wait(ref_4cd);
    dialogFree(ref_4cc);
    ref_4d0 = bustupFade(ref_4ca, rgb(0,0,0), 10);
    bustupWait(ref_4d0);
    bustupFree(ref_4ca);
}
