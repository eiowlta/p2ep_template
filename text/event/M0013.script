function START()
{
    screenEffectInit();
    screenFade(160, 120, rgb(255,255,255), rgb(255,255,255), sub);
    sndMusicPlay(sound_304d, 127);
    levelFootstepSet(sfx_15);
    envTriggerSet(DOORBOX, 131, 1, line, coll_14);
    bitGet(var_0, MBIT_HSATOMI_HATURAITEN);
    bnz(var_0, label_9);
    cameraSet(southeast, 1001, 0, -1427);
    b(label_a);
  label_9:
    cameraSet(northeast, 1125, 0, -505);
  label_a:
    li(var_0, 0);
    li(var_1, 0);
    partyMemberCheck(var_0, ulala);
    add(var_1, var_1, var_0);
    partyMemberCheck(var_0, katsuya);
    add(var_1, var_1, var_0);
    partyMemberCheck(var_0, baofu);
    add(var_1, var_1, var_0);
    partyMemberCheck(var_0, nanjo);
    add(var_1, var_1, var_0);
    partyMemberCheck(var_0, elly);
    add(var_1, var_1, var_0);
    partyMemberCheck(var_0, tatsuya);
    add(var_1, var_1, var_0);
    boutrange(var_1, 0, 4, label_1b);
    li(var_0, 0);
    b(label_20);
  label_1b:
    ref_1b = dialogAlloc();
    ref_1c = msgShow(msg_0);
/***************************************
There are more than 4 people in the party.
[tab]This will cause the game to hang.
[tab]Please contact Kaneda and Kataoka.
[wait][clear]
***************************************/
    wait(ref_1c);
    dialogFree(ref_1b);
    b(label_20);
  label_20:
    bitGet(var_0, EBIT_E009F);
    bnz(var_0, label_25);
    bitGet(var_0, EBIT_E008C);
    bez(var_0, label_2b);
    bnz(var_0, label_27);
  label_25:
    partyMemberCheck(var_0, tatsuya);
    bez(var_0, label_2b);
  label_27:
    ref_27 = spriteLoad(sprite_18);
    wait(ref_27);
    unitSpawn(tatsuya, sprite_18, 1240, 0, -980, north, none);
    unitTriggerSet(tatsuya, B_TATU, 255, 1);
  label_2b:
    bitGet(var_0, EBIT_E009F);
    bnz(var_0, label_3e);
    bitGet(var_0, MBIT_HI_NANJOTOUJO);
    bne(var_0, 0, label_36);
    partyMemberCheck(var_0, elly);
    bez(var_0, label_3e);
    ref_31 = spriteLoad(sprite_23);
    wait(ref_31);
    unitSpawn(elly, sprite_23, 360, 0, -450, west, none);
    unitTriggerSet(elly, B_ERI, 255, 1);
    b(label_3e);
  label_36:
    bne(var_0, 1, label_3e);
    partyMemberCheck(var_0, nanjo);
    bez(var_0, label_3e);
    ref_39 = spriteLoad(sprite_1f);
    wait(ref_39);
    unitSpawn(nanjo, sprite_1f, 725, 0, -1450, north, none);
    unitTriggerSet(nanjo, B_NANJ, 255, 1);
    b(label_3e);
  label_3e:
    partyMemberCheck(var_0, ulala);
    bez(var_0, label_44);
    ref_40 = spriteLoad(sprite_6);
    wait(ref_40);
    unitSpawn(ulala, sprite_6, 950, 0, -1150, east, none);
    unitTriggerSet(ulala, B_URARATI, 255, 1);
  label_44:
    partyMemberCheck(var_0, katsuya);
    bez(var_0, label_4a);
    ref_46 = spriteLoad(sprite_d);
    wait(ref_46);
    unitSpawn(katsuya, sprite_d, 650, 0, -760, south, none);
    unitTriggerSet(katsuya, B_KATUYYY, 255, 1);
  label_4a:
    partyMemberCheck(var_0, baofu);
    bez(var_0, label_50);
    ref_4c = spriteLoad(sprite_13);
    wait(ref_4c);
    unitSpawn(baofu, sprite_13, 50, 0, -610, east, none);
    unitTriggerSet(baofu, B_PAO, 255, 1);
  label_50:
    ref_50 = spriteLoad(sprite_8f);
    wait(ref_50);
    unitSpawn(shopkeeper, sprite_8f, 1179, 0, -268, north, none);
    envTriggerSet(SHOP, 224, 1, line, coll_0);
    envTriggerSet(SHOP, 224, 1, line, coll_1);
    envTriggerSet(SHOP, 112, 1, line, coll_2);
    envTriggerSet(SHOP, 112, 1, line, coll_3);
    envTriggerSet(SHOP, 56, 1, line, coll_4);
    envTriggerSet(SHOP, 56, 1, line, coll_5);
    ref_59 = spriteLoad(sprite_c8);
    wait(ref_59);
    unitSpawn(npc1, sprite_c8, 540, 0, -990, east, none);
    unitPalette(npc1, 1);
    unitTriggerSet(npc1, SARARII, 255, 1);
    ref_5e = spriteLoad(sprite_bb);
    wait(ref_5e);
    unitSpawn(npc2, sprite_bb, 830, 0, -50, north, none);
    unitPalette(npc2, 1);
    unitTriggerSet(npc2, KAOIRO, 255, 1);
    bitGet(var_0, EBIT_E00AF);
    bne(var_0, 0, label_66);
    b(label_6c);
  label_66:
    bne(var_0, 1, label_6c);
    ref_67 = spriteLoad(sprite_a3);
    wait(ref_67);
    unitSpawn(npc3, sprite_a3, 420, 0, -300, west, none);
    unitTriggerSet(npc3, MAN3, 255, 1);
    b(label_6c);
  label_6c:
    ref_6c = spriteLoad(sprite_0);
    wait(ref_6c);
    ref_6e = spriteLoad(sprite_2);
    wait(ref_6e);
    playerInit(south);
    controlDisable();
    screenEffectUnknown();
    screenFadeInner(rgb(0,0,0), 6, true);
    screenFadeOuter(rgb(0,0,0), 6, true);
    unitIdleOnAll();
    screenFadeWait(inner);
    screenFadeWait(outer);
    controlEnable();
}

function B_URARATI()
{
    controlDisable();
    bitGet(var_0, EBIT_E00B8);
    bnz(var_0, label_d8);
    bitGet(var_0, EBIT_E00AF);
    bnz(var_0, label_c8);
    bitGet(var_0, EBIT_E009F);
    bnz(var_0, label_b8);
    bitGet(var_0, EBIT_E008C);
    bnz(var_0, label_a8);
    bitGet(var_0, EBIT_E007B);
    bnz(var_0, label_98);
    unitFacePlayer(ulala);
    ref_86 = bustupLoad(bustup_1d);
    bustupWait(ref_86);
    ref_88 = bustupAlloc(ref_86, left, rgb(0,0,0));
    bustupFade(ref_88, rgb(128,0,0), 30);
    ref_8a = dialogAlloc();
    ref_8b = msgShow(msg_1);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]Hey, everybody is using hard words!!
[tab]Ahh, what should we do Ma-ya?
[tab]We should say something too.
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_2f, 1);
    wait(ref_8b);
    ref_8e = msgShow(msg_2);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]Ummm... Molecular Disrupt Assault!!
[tab]Come on, Ma-ya, say something! [delay(30)]What?
[tab]Hyper Atomic Counter!? ...Doh!
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_1d, 1);
    wait(ref_8e);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_8a);
    ref_93 = bustupFade(ref_88, rgb(0,0,0), 10);
    bustupWait(ref_93);
    bustupFree(ref_88);
    unitRestoreFacing(ulala);
    b(label_e8);
  label_98:
    unitFacePlayer(ulala);
    ref_99 = bustupLoad(bustup_1d);
    bustupWait(ref_99);
    ref_9b = bustupAlloc(ref_99, left, rgb(0,0,0));
    bustupFade(ref_9b, rgb(128,0,0), 30);
    ref_9d = dialogAlloc();
    ref_9e = msgShow(msg_3);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]Hey Ma-ya...
[tab]This is all New World Order’s fault, right?
[tab]It’s not... our fault, right?
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_2d, 1);
    wait(ref_9e);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_9d);
    ref_a3 = bustupFade(ref_9b, rgb(0,0,0), 10);
    bustupWait(ref_a3);
    bustupFree(ref_9b);
    unitRestoreFacing(ulala);
    b(label_e8);
  label_a8:
    unitFacePlayer(ulala);
    ref_a9 = bustupLoad(bustup_17);
    bustupWait(ref_a9);
    ref_ab = bustupAlloc(ref_a9, left, rgb(0,0,0));
    bustupFade(ref_ab, rgb(128,0,0), 30);
    ref_ad = dialogAlloc();
    ref_ae = msgShow(msg_4);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]You say he’s intoxicated by misery...?
[tab]Yeah, it’s not very convincing coming
[tab]from a drunken middle-aged man.
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_1d, 1);
    wait(ref_ae);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_ad);
    ref_b3 = bustupFade(ref_ab, rgb(0,0,0), 10);
    bustupWait(ref_b3);
    bustupFree(ref_ab);
    unitRestoreFacing(ulala);
    b(label_e8);
  label_b8:
    unitFacePlayer(ulala);
    ref_b9 = bustupLoad(bustup_17);
    bustupWait(ref_b9);
    ref_bb = bustupAlloc(ref_b9, left, rgb(0,0,0));
    bustupFade(ref_bb, rgb(128,0,0), 30);
    ref_bd = dialogAlloc();
    ref_be = msgShow(msg_5);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]Hmm, I wonder if Satomi Tadashi was
[tab]popular on the "Other Side" too?
[tab]Hey Ma-ya, let’s ask.
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_2d, 1);
    wait(ref_be);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_bd);
    ref_c3 = bustupFade(ref_bb, rgb(0,0,0), 10);
    bustupWait(ref_c3);
    bustupFree(ref_bb);
    unitRestoreFacing(ulala);
    b(label_e8);
  label_c8:
    unitFacePlayer(ulala);
    ref_c9 = bustupLoad(bustup_17);
    bustupWait(ref_c9);
    ref_cb = bustupAlloc(ref_c9, left, rgb(0,0,0));
    bustupFade(ref_cb, rgb(128,0,0), 30);
    ref_cd = dialogAlloc();
    ref_ce = msgShow(msg_6);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]Well Ma-ya, did you finish shopping?
[tab]Are you ready?
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_2d, 1);
    wait(ref_ce);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_cd);
    ref_d3 = bustupFade(ref_cb, rgb(0,0,0), 10);
    bustupWait(ref_d3);
    bustupFree(ref_cb);
    unitRestoreFacing(ulala);
    b(label_e8);
  label_d8:
    unitFacePlayer(ulala);
    ref_d9 = bustupLoad(bustup_1b);
    bustupWait(ref_d9);
    ref_db = bustupAlloc(ref_d9, left, rgb(0,0,0));
    bustupFade(ref_db, rgb(128,0,0), 30);
    ref_dd = dialogAlloc();
    ref_de = msgShow(msg_7);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]What if this Ameno Torifune stops flying,
[tab]then what will happen!?
[tab]Will we crash!?
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_1f, 1);
    wait(ref_de);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_dd);
    ref_e3 = bustupFade(ref_db, rgb(0,0,0), 10);
    bustupWait(ref_e3);
    bustupFree(ref_db);
    unitRestoreFacing(ulala);
    b(label_e8);
  label_e8:
    controlEnable();
}

function B_KATUYYY()
{
    controlDisable();
    bitGet(var_0, EBIT_E00B8);
    bnz(var_0, label_15c);
    bitGet(var_0, EBIT_E00AF);
    bnz(var_0, label_14c);
    bitGet(var_0, EBIT_E009F);
    bnz(var_0, label_13c);
    bitGet(var_0, EBIT_E008C);
    bnz(var_0, label_115);
    bitGet(var_0, EBIT_E007B);
    bnz(var_0, label_105);
    unitFacePlayer(katsuya);
    ref_f6 = bustupLoad(bustup_27);
    bustupWait(ref_f6);
    ref_f8 = bustupAlloc(ref_f6, left, rgb(0,0,0));
    bustupFade(ref_f8, rgb(128,0,0), 30);
    ref_fa = dialogAlloc();
    ref_fb = msgShow(msg_8);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]...I am sorry. It wasn’t the actions of
[tab]someone who is dedicated selflessly.
[tab]I am very regretful.
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_6, 1);
    wait(ref_fb);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_fa);
    ref_100 = bustupFade(ref_f8, rgb(0,0,0), 10);
    bustupWait(ref_100);
    bustupFree(ref_f8);
    unitRestoreFacing(katsuya);
    b(label_16c);
  label_105:
    unitFacePlayer(katsuya);
    ref_106 = bustupLoad(bustup_21);
    bustupWait(ref_106);
    ref_108 = bustupAlloc(ref_106, left, rgb(0,0,0));
    bustupFade(ref_108, rgb(128,0,0), 30);
    ref_10a = dialogAlloc();
    ref_10b = msgShow(msg_9);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]We may be the cause, but the New World Order
[tab]are the ones who set it up to be that way.
[tab]...We have no time to be feeling down.
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_1a, 1);
    wait(ref_10b);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_10a);
    ref_110 = bustupFade(ref_108, rgb(0,0,0), 10);
    bustupWait(ref_110);
    bustupFree(ref_108);
    unitRestoreFacing(katsuya);
    b(label_16c);
  label_115:
    bitGet(var_0, EBIT_E0096);
    bne(var_0, 0, label_127);
    unitFacePlayer(katsuya);
    ref_118 = bustupLoad(bustup_27);
    bustupWait(ref_118);
    ref_11a = bustupAlloc(ref_118, left, rgb(0,0,0));
    bustupFade(ref_11a, rgb(128,0,0), 30);
    ref_11c = dialogAlloc();
    ref_11d = msgShow(msg_10);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab][tatsuya]... Why do you avoid me?
[tab]What happened that I don’t know about!?
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_2d, 1);
    wait(ref_11d);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_11c);
    ref_122 = bustupFade(ref_11a, rgb(0,0,0), 10);
    bustupWait(ref_122);
    bustupFree(ref_11a);
    unitRestoreFacing(katsuya);
    b(label_13b);
  label_127:
    bne(var_0, 1, label_13b);
    unitFacePlayer(katsuya);
    unitAnimationPlay(katsuya, animation_6, 1);
    ref_12a = bustupLoad(bustup_27);
    bustupWait(ref_12a);
    ref_12c = bustupAlloc(ref_12a, left, rgb(0,0,0));
    bustupFade(ref_12c, rgb(128,0,0), 30);
    ref_12e = dialogAlloc();
    ref_12f = msgShow(msg_11);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]He came from another world...!
[tab]But still, he was my younger brother
[tab]even on the "Other Side", right...?
[wait][clear]
***************************************/
    wait(ref_12f);
    unitAnimationPlay(katsuya, animation_1f, 1);
    ref_132 = msgShow(msg_12);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]Then, he’s my brother on "This Side" too!
[tab]It is the elder brother’s duty to protect
[tab]the younger. That will never change...
[wait][clear]
***************************************/
    wait(ref_132);
    dialogFree(ref_12e);
    ref_135 = bustupFade(ref_12c, rgb(0,0,0), 10);
    bustupWait(ref_135);
    bustupFree(ref_12c);
    unitAnimationPlay(katsuya, animation_a, 1);
    unitRestoreFacing(katsuya);
    b(label_13b);
  label_13b:
    b(label_16c);
  label_13c:
    unitFacePlayer(katsuya);
    ref_13d = bustupLoad(bustup_21);
    bustupWait(ref_13d);
    ref_13f = bustupAlloc(ref_13d, left, rgb(0,0,0));
    bustupFade(ref_13f, rgb(128,0,0), 30);
    ref_141 = dialogAlloc();
    ref_142 = msgShow(msg_13);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]The "Other Side" doesn’t seem so different,
[tab]but there probably exists a world that is.
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_1a, 1);
    wait(ref_142);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_141);
    ref_147 = bustupFade(ref_13f, rgb(0,0,0), 10);
    bustupWait(ref_147);
    bustupFree(ref_13f);
    unitRestoreFacing(katsuya);
    b(label_16c);
  label_14c:
    unitFacePlayer(katsuya);
    ref_14d = bustupLoad(bustup_22);
    bustupWait(ref_14d);
    ref_14f = bustupAlloc(ref_14d, left, rgb(0,0,0));
    bustupFade(ref_14f, rgb(128,0,0), 30);
    ref_151 = dialogAlloc();
    ref_152 = msgShow(msg_14);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]You don’t have to worry Amano-kun. 
[tab]"The longest way around is the shortest
[tab]way home." Let’s see, which should I...
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_2d, 1);
    wait(ref_152);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_151);
    ref_157 = bustupFade(ref_14f, rgb(0,0,0), 10);
    bustupWait(ref_157);
    bustupFree(ref_14f);
    unitRestoreFacing(katsuya);
    b(label_16c);
  label_15c:
    unitFacePlayer(katsuya);
    ref_15d = bustupLoad(bustup_21);
    bustupWait(ref_15d);
    ref_15f = bustupAlloc(ref_15d, left, rgb(0,0,0));
    bustupFade(ref_15f, rgb(128,0,0), 30);
    ref_161 = dialogAlloc();
    ref_162 = msgShow(msg_15);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]I don’t know what will happen to it...
[tab]But if the New World Order was able to
[tab]control it, we should be able to as well.
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_1f, 1);
    wait(ref_162);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_161);
    ref_167 = bustupFade(ref_15f, rgb(0,0,0), 10);
    bustupWait(ref_167);
    bustupFree(ref_15f);
    unitRestoreFacing(katsuya);
    b(label_16c);
  label_16c:
    controlEnable();
}

function B_PAO()
{
    controlDisable();
    bitGet(var_0, EBIT_E00B8);
    bnz(var_0, label_1c9);
    bitGet(var_0, EBIT_E00AF);
    bnz(var_0, label_1b9);
    bitGet(var_0, EBIT_E009F);
    bnz(var_0, label_1a9);
    bitGet(var_0, EBIT_E008C);
    bnz(var_0, label_199);
    bitGet(var_0, EBIT_E007B);
    bnz(var_0, label_189);
    unitFacePlayer(baofu);
    ref_17a = bustupLoad(bustup_31);
    bustupWait(ref_17a);
    ref_17c = bustupAlloc(ref_17a, left, rgb(0,0,0));
    bustupFade(ref_17c, rgb(128,0,0), 30);
    ref_17e = dialogAlloc();
    ref_17f = msgShow(msg_16);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]Disappointed in [suou], huh... That’s so
[tab]like Nanjo. Well to him it was certainly a
[tab]one in a million chance.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1a, 1);
    wait(ref_17f);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_17e);
    ref_184 = bustupFade(ref_17c, rgb(0,0,0), 10);
    bustupWait(ref_184);
    bustupFree(ref_17c);
    unitRestoreFacing(baofu);
    b(label_1d9);
  label_189:
    unitFacePlayer(baofu);
    ref_18a = bustupLoad(bustup_2d);
    bustupWait(ref_18a);
    ref_18c = bustupAlloc(ref_18a, left, rgb(0,0,0));
    bustupFade(ref_18c, rgb(128,0,0), 30);
    ref_18e = dialogAlloc();
    ref_18f = msgShow(msg_17);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]I understand how Serizawa feels, but we’re
[tab]the cause of the confusion.
[tab]They were just one step ahead of us.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1a, 1);
    wait(ref_18f);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_18e);
    ref_194 = bustupFade(ref_18c, rgb(0,0,0), 10);
    bustupWait(ref_194);
    bustupFree(ref_18c);
    unitRestoreFacing(baofu);
    b(label_1d9);
  label_199:
    unitFacePlayer(baofu);
    ref_19a = bustupLoad(bustup_2d);
    bustupWait(ref_19a);
    ref_19c = bustupAlloc(ref_19a, left, rgb(0,0,0));
    bustupFade(ref_19c, rgb(128,0,0), 30);
    ref_19e = dialogAlloc();
    ref_19f = msgShow(msg_18);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]During adolescence, one is always in their
[tab]own little world... He’s probably intoxicated
[tab]by his own misery.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1a, 1);
    wait(ref_19f);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_19e);
    ref_1a4 = bustupFade(ref_19c, rgb(0,0,0), 10);
    bustupWait(ref_1a4);
    bustupFree(ref_19c);
    unitRestoreFacing(baofu);
    b(label_1d9);
  label_1a9:
    unitFacePlayer(baofu);
    ref_1aa = bustupLoad(bustup_2d);
    bustupWait(ref_1aa);
    ref_1ac = bustupAlloc(ref_1aa, left, rgb(0,0,0));
    bustupFade(ref_1ac, rgb(128,0,0), 30);
    ref_1ae = dialogAlloc();
    ref_1af = msgShow(msg_19);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]Back in my school days, I used to read a
[tab]lot of science fiction novels...
[tab]Parallel world... Brings back memories.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_2d, 1);
    wait(ref_1af);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_1ae);
    ref_1b4 = bustupFade(ref_1ac, rgb(0,0,0), 10);
    bustupWait(ref_1b4);
    bustupFree(ref_1ac);
    unitRestoreFacing(baofu);
    b(label_1d9);
  label_1b9:
    unitFacePlayer(baofu);
    ref_1ba = bustupLoad(bustup_2d);
    bustupWait(ref_1ba);
    ref_1bc = bustupAlloc(ref_1ba, left, rgb(0,0,0));
    bustupFade(ref_1bc, rgb(128,0,0), 30);
    ref_1be = dialogAlloc();
    ref_1bf = msgShow(msg_20);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]He’s right, but...
[tab]Doesn’t [suou] seem to be acting more
[tab]and more like Nanjo? Is it because of me?
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1a, 1);
    wait(ref_1bf);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_1be);
    ref_1c4 = bustupFade(ref_1bc, rgb(0,0,0), 10);
    bustupWait(ref_1c4);
    bustupFree(ref_1bc);
    unitRestoreFacing(baofu);
    b(label_1d9);
  label_1c9:
    unitFacePlayer(baofu);
    ref_1ca = bustupLoad(bustup_2d);
    bustupWait(ref_1ca);
    ref_1cc = bustupAlloc(ref_1ca, left, rgb(0,0,0));
    bustupFade(ref_1cc, rgb(128,0,0), 30);
    ref_1ce = dialogAlloc();
    ref_1cf = msgShow(msg_21);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]The Ameno Torifune is still hovering. Is it
[tab]staying this way until we beat the bastard?
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_2d, 1);
    wait(ref_1cf);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_1ce);
    ref_1d4 = bustupFade(ref_1cc, rgb(0,0,0), 10);
    bustupWait(ref_1d4);
    bustupFree(ref_1cc);
    unitRestoreFacing(baofu);
    b(label_1d9);
  label_1d9:
    controlEnable();
}

function B_NANJ()
{
    controlDisable();
    bitGet(var_0, EBIT_E008C);
    bnz(var_0, label_200);
    bitGet(var_0, EBIT_E007B);
    bnz(var_0, label_1f0);
    unitFacePlayer(nanjo);
    ref_1e1 = bustupLoad(bustup_3b);
    bustupWait(ref_1e1);
    ref_1e3 = bustupAlloc(ref_1e1, left, rgb(0,0,0));
    bustupFade(ref_1e3, rgb(128,0,0), 30);
    ref_1e5 = dialogAlloc();
    ref_1e6 = msgShow(msg_22);
/***************************************
[color(yellow)]Nanjo[color(white)]
[tab]To my regret, I have to admit I am slightly
[tab]disappointed in Sergeant [suou]’s actions.
[tab]"Proceed prudently"... Undoubtedly keen words.
[wait][clear]
***************************************/
    unitAnimationPlay(nanjo, animation_1a, 1);
    wait(ref_1e6);
    unitAnimationPlay(nanjo, animation_a, 1);
    dialogFree(ref_1e5);
    ref_1eb = bustupFade(ref_1e3, rgb(0,0,0), 10);
    bustupWait(ref_1eb);
    bustupFree(ref_1e3);
    unitRestoreFacing(nanjo);
    b(label_210);
  label_1f0:
    unitFacePlayer(nanjo);
    ref_1f1 = bustupLoad(bustup_3b);
    bustupWait(ref_1f1);
    ref_1f3 = bustupAlloc(ref_1f1, left, rgb(0,0,0));
    bustupFade(ref_1f3, rgb(128,0,0), 30);
    ref_1f5 = dialogAlloc();
    ref_1f6 = msgShow(msg_23);
/***************************************
[color(yellow)]Nanjo[color(white)]
[tab]Is it the trickster’s or the victim’s fault?
[tab]It all depends on which side one takes.
[tab]No one wants to admit their faults.
[wait][clear]
***************************************/
    unitAnimationPlay(nanjo, animation_1a, 1);
    wait(ref_1f6);
    unitAnimationPlay(nanjo, animation_a, 1);
    dialogFree(ref_1f5);
    ref_1fb = bustupFade(ref_1f3, rgb(0,0,0), 10);
    bustupWait(ref_1fb);
    bustupFree(ref_1f3);
    unitRestoreFacing(nanjo);
    b(label_210);
  label_200:
    unitFacePlayer(nanjo);
    ref_201 = bustupLoad(bustup_36);
    bustupWait(ref_201);
    ref_203 = bustupAlloc(ref_201, left, rgb(0,0,0));
    bustupFade(ref_203, rgb(128,0,0), 30);
    ref_205 = dialogAlloc();
    ref_206 = msgShow(msg_24);
/***************************************
[color(yellow)]Nanjo[color(white)]
[tab][suou]...
[tab]One of my friends...
[tab]Had the same presence...
[wait][clear]
***************************************/
    unitAnimationPlay(nanjo, animation_1a, 1);
    wait(ref_206);
    unitAnimationPlay(nanjo, animation_a, 1);
    dialogFree(ref_205);
    ref_20b = bustupFade(ref_203, rgb(0,0,0), 10);
    bustupWait(ref_20b);
    bustupFree(ref_203);
    unitRestoreFacing(nanjo);
    b(label_210);
  label_210:
    controlEnable();
}

function B_ERI()
{
    controlDisable();
    bitGet(var_0, EBIT_E008C);
    bnz(var_0, label_237);
    bitGet(var_0, EBIT_E007B);
    bnz(var_0, label_227);
    unitFacePlayer(elly);
    ref_218 = bustupLoad(bustup_3d);
    bustupWait(ref_218);
    ref_21a = bustupAlloc(ref_218, left, rgb(0,0,0));
    bustupFade(ref_21a, rgb(128,0,0), 30);
    ref_21c = dialogAlloc();
    ref_21d = msgShow(msg_25);
/***************************************
[color(yellow)]Elly[color(white)]
[tab]Kei seems to be disappointed in Mr. Katsuya’s
[tab]actions. He was saying something about...
[tab]"Proceeding prudently". Such keen words...
[wait][clear]
***************************************/
    unitAnimationPlay(elly, animation_2d, 1);
    wait(ref_21d);
    unitAnimationPlay(elly, animation_a, 1);
    dialogFree(ref_21c);
    ref_222 = bustupFade(ref_21a, rgb(0,0,0), 10);
    bustupWait(ref_222);
    bustupFree(ref_21a);
    unitRestoreFacing(elly);
    b(label_247);
  label_227:
    unitFacePlayer(elly);
    ref_228 = bustupLoad(bustup_3d);
    bustupWait(ref_228);
    ref_22a = bustupAlloc(ref_228, left, rgb(0,0,0));
    bustupFade(ref_22a, rgb(128,0,0), 30);
    ref_22c = dialogAlloc();
    ref_22d = msgShow(msg_26);
/***************************************
[color(yellow)]Elly[color(white)]
[tab]Rumors... it’s all because we couldn’t figure
[tab]out the power behind the Kotodama. But
[tab]we will not fall for the same trick again...
[wait][clear]
***************************************/
    unitAnimationPlay(elly, animation_2d, 1);
    wait(ref_22d);
    unitAnimationPlay(elly, animation_a, 1);
    dialogFree(ref_22c);
    ref_232 = bustupFade(ref_22a, rgb(0,0,0), 10);
    bustupWait(ref_232);
    bustupFree(ref_22a);
    unitRestoreFacing(elly);
    b(label_247);
  label_237:
    unitFacePlayer(elly);
    ref_238 = bustupLoad(bustup_3e);
    bustupWait(ref_238);
    ref_23a = bustupAlloc(ref_238, left, rgb(0,0,0));
    bustupFade(ref_23a, rgb(128,0,0), 30);
    ref_23c = dialogAlloc();
    ref_23d = msgShow(msg_27);
/***************************************
[color(yellow)]Elly[color(white)]
[tab]That cool boy...
[tab]He somehow feels like someone
[tab]that we know very well...
[wait][clear]
***************************************/
    unitAnimationPlay(elly, animation_2d, 1);
    wait(ref_23d);
    unitAnimationPlay(elly, animation_a, 1);
    dialogFree(ref_23c);
    ref_242 = bustupFade(ref_23a, rgb(0,0,0), 10);
    bustupWait(ref_242);
    bustupFree(ref_23a);
    unitRestoreFacing(elly);
    b(label_247);
  label_247:
    controlEnable();
}

function B_TATU()
{
    controlDisable();
    bitGet(var_0, EBIT_E00B8);
    bnz(var_0, label_283);
    bitGet(var_0, EBIT_E00AF);
    bnz(var_0, label_273);
    bitGet(var_0, EBIT_E009F);
    bnz(var_0, label_263);
    bitGet(var_0, EBIT_E008C);
    bnz(var_0, label_252);
  label_252:
    unitFacePlayer(tatsuya);
    ref_253 = bustupLoad(bustup_10);
    bustupWait(ref_253);
    ref_255 = bustupAlloc(ref_253, right, rgb(0,0,0));
    bustupFade(ref_255, rgb(128,0,0), 30);
    bustupFlip(ref_255, true);
    ref_258 = dialogAlloc();
    ref_259 = msgShow(msg_28);
/***************************************
[color(yellow)][tatsuya][color(white)]
[tab]...I am not the [tatsuya] that you know.
[tab]And you...[delay(30)]aren’t the person I know.
[wait][clear]
***************************************/
    unitAnimationPlay(tatsuya, animation_2d, 1);
    wait(ref_259);
    unitAnimationPlay(tatsuya, animation_a, 1);
    dialogFree(ref_258);
    ref_25e = bustupFade(ref_255, rgb(0,0,0), 10);
    bustupWait(ref_25e);
    bustupFree(ref_255);
    unitRestoreFacing(tatsuya);
    b(label_293);
  label_263:
    unitFacePlayer(tatsuya);
    ref_264 = bustupLoad(bustup_b);
    bustupWait(ref_264);
    ref_266 = bustupAlloc(ref_264, left, rgb(0,0,0));
    bustupFade(ref_266, rgb(128,0,0), 30);
    ref_268 = dialogAlloc();
    ref_269 = msgShow(msg_29);
/***************************************
[color(yellow)][tatsuya][color(white)]
[tab]Satomi Tadashi...?
[tab]I’m not sure if it was popular,
[tab]but I did go there often.
[wait][clear]
***************************************/
    unitAnimationPlay(tatsuya, animation_2d, 1);
    wait(ref_269);
    unitAnimationPlay(tatsuya, animation_a, 1);
    dialogFree(ref_268);
    ref_26e = bustupFade(ref_266, rgb(0,0,0), 10);
    bustupWait(ref_26e);
    bustupFree(ref_266);
    unitRestoreFacing(tatsuya);
    b(label_293);
  label_273:
    unitFacePlayer(tatsuya);
    ref_274 = bustupLoad(bustup_b);
    bustupWait(ref_274);
    ref_276 = bustupAlloc(ref_274, left, rgb(0,0,0));
    bustupFade(ref_276, rgb(128,0,0), 30);
    ref_278 = dialogAlloc();
    ref_279 = msgShow(msg_30);
/***************************************
[color(yellow)][tatsuya][color(white)]
[tab]This enemy is not like the weaklings
[tab]before... We must be careful.
[wait][clear]
***************************************/
    unitAnimationPlay(tatsuya, animation_2d, 1);
    wait(ref_279);
    unitAnimationPlay(tatsuya, animation_a, 1);
    dialogFree(ref_278);
    ref_27e = bustupFade(ref_276, rgb(0,0,0), 10);
    bustupWait(ref_27e);
    bustupFree(ref_276);
    unitRestoreFacing(tatsuya);
    b(label_293);
  label_283:
    unitFacePlayer(tatsuya);
    ref_284 = bustupLoad(bustup_10);
    bustupWait(ref_284);
    ref_286 = bustupAlloc(ref_284, left, rgb(0,0,0));
    bustupFade(ref_286, rgb(128,0,0), 30);
    ref_288 = dialogAlloc();
    ref_289 = msgShow(msg_31);
/***************************************
[color(yellow)][tatsuya][color(white)]
[tab]I don’t know what will happen to this city.
[tab]It shouldn’t end up the same as the
[tab]"Other Side"...
[wait][clear]
***************************************/
    unitAnimationPlay(tatsuya, animation_2d, 1);
    wait(ref_289);
    unitAnimationPlay(tatsuya, animation_a, 1);
    dialogFree(ref_288);
    ref_28e = bustupFade(ref_286, rgb(0,0,0), 10);
    bustupWait(ref_28e);
    bustupFree(ref_286);
    unitRestoreFacing(tatsuya);
    b(label_293);
  label_293:
    controlEnable();
}

function SARARII()
{
    controlDisable();
    bitGet(var_0, EBIT_E00AF);
    bne(var_0, 0, label_299);
    b(label_2a6);
  label_299:
    bne(var_0, 1, label_2a6);
    bitGet(var_0, MBIT_KE_SKYMAP);
    bne(var_0, 0, label_29d);
    b(label_2a5);
  label_29d:
    bne(var_0, 1, label_2a5);
    bitGet(var_0, MBIT_SKYMAP_MIHA);
    bne(var_0, 0, label_2a2);
    b(label_2db);
    b(label_2a4);
  label_2a2:
    bne(var_0, 1, label_2a4);
    b(label_2a4);
  label_2a4:
    b(label_2a5);
  label_2a5:
    b(label_2a6);
  label_2a6:
    bitGet(var_0, EBIT_E00B8);
    bnz(var_0, label_2d2);
    bitGet(var_0, EBIT_E00AF);
    bnz(var_0, label_2c9);
    bitGet(var_0, EBIT_E007B);
    bnz(var_0, label_2b5);
    unitFacePlayer(npc1);
    ref_2ad = dialogAlloc();
    ref_2ae = msgShow(msg_32);
/***************************************
[color(yellow)]Businessman[color(white)]
[tab]Ahh! [delay(15)]I can’t stand this music any longer![delay(15)]
[tab]How long do I have to keep on listening to
[tab]this song?[delay(15)]... Forever!? Nooooo!!
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_24, 1);
    wait(ref_2ae);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_2ad);
    unitRestoreFacing(npc1);
    b(label_2e8);
  label_2b5:
    unitFacePlayer(npc1);
    ref_2b6 = dialogAlloc();
    bitGet(var_0, EBIT_E009F);
    bne(var_0, 0, label_2bd);
    ref_2b9 = msgShow(msg_33);
/***************************************
[color(yellow)]Businessman[color(white)]
[tab]Did you hear about the Ameno Torifune?
[tab]I heard it’s at the end of the hole of the
[tab]subway... So many people try to sneak in.
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_24, 1);
    wait(ref_2b9);
    b(label_2c2);
  label_2bd:
    bne(var_0, 1, label_2c2);
    ref_2be = msgShow(msg_34);
/***************************************
[color(yellow)]Businessman[color(white)]
[tab]Did you hear about the Ameno Torifune?
[tab]I heard it’s at the end of the hole of the
[tab]subway, and many people... You’re going too?
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_24, 1);
    wait(ref_2be);
    b(label_2c2);
  label_2c2:
    ref_2c2 = msgShow(msg_35);
/***************************************
[color(yellow)]Businessman[color(white)]
[tab]...Me? I will stay here and listen to this song. 
[tab]I will keep listening to this song...
[tab]Even when I die I will probably be here!!
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_24, 1);
    wait(ref_2c2);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_2b6);
    unitRestoreFacing(npc1);
    b(label_2e8);
  label_2c9:
    unitFacePlayer(npc1);
    ref_2ca = dialogAlloc();
    ref_2cb = msgShow(msg_36);
/***************************************
[color(yellow)]Businessman[color(white)]
[tab]Sheesh! My company collapsed...! 
[tab]Not through bankruptcy, but it literally collapsed...[delay(15)]
[tab]What is that ring? I’ve seen it before...
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_25, 1);
    wait(ref_2cb);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_2ca);
    unitRestoreFacing(npc1);
    b(label_2e8);
  label_2d2:
    unitFacePlayer(npc1);
    ref_2d3 = dialogAlloc();
    ref_2d4 = msgShow(msg_37);
/***************************************
[color(yellow)]Businessman[color(white)]
[tab]Eh? Destroy? Dragon? That doesn’t matter
[tab]anymore... [delay(15)]Just being able to listen to this
[tab]song makes me so happy!
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_24, 1);
    wait(ref_2d4);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_2d3);
    unitRestoreFacing(npc1);
    b(label_2e8);
  label_2db:
    unitFacePlayer(npc1);
    ref_2dc = dialogAlloc();
    ref_2dd = msgShow(msg_38);
/***************************************
[color(yellow)]Businessman[color(white)]
[tab]Huh? Oh that foreigner right? He has a dark
[tab]rumor that he is a worldwide millionaire
[tab]map collector. Some even call him "Demon".
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_24, 1);
    wait(ref_2dd);
    ref_2e0 = msgShow(msg_39);
/***************************************
[color(yellow)]Businessman[color(white)]
[tab]But why did he come here? Could it be that
[tab]he likes this store’s music?
[tab]...We might have something in common!
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_24, 1);
    wait(ref_2e0);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_2dc);
    unitRestoreFacing(npc1);
    bitSet(MBIT_SKYMAP_MIHA);
    b(label_2e8);
  label_2e8:
    controlEnable();
}

function KAOIRO()
{
    controlDisable();
    bitGet(var_0, EBIT_E00B8);
    bnz(var_0, label_30c);
    bitGet(var_0, EBIT_E00AF);
    bnz(var_0, label_303);
    bitGet(var_0, EBIT_E007B);
    bnz(var_0, label_2fa);
    unitFacePlayer(npc2);
    ref_2f2 = dialogAlloc();
    ref_2f3 = msgShow(msg_40);
/***************************************
[color(yellow)]Man with a pale face[color(white)]
[tab]Ahh, my body feels so relieved, and so does
[tab]my heart... I must’ve had Kegare in me...
[tab]Good bye drugs... Hello positive future...
[wait][clear]
***************************************/
    unitAnimationHold(npc2, animation_13, -1);
    wait(ref_2f3);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_2f2);
    unitRestoreFacing(npc2);
    b(label_318);
  label_2fa:
    unitFacePlayer(npc2);
    ref_2fb = dialogAlloc();
    ref_2fc = msgShow(msg_41);
/***************************************
[color(yellow)]Man with a pale face[color(white)]
[tab]New World Order!! Ameno Torifune!!
[tab]A new leader to replace drugs...(snicker)
[tab]..."Let’s think positive!"
[wait][clear]
***************************************/
    unitAnimationHold(npc2, animation_13, -1);
    wait(ref_2fc);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_2fb);
    unitRestoreFacing(npc2);
    b(label_318);
  label_303:
    unitFacePlayer(npc2);
    ref_304 = dialogAlloc();
    ref_305 = msgShow(msg_42);
/***************************************
[color(yellow)]Man with a pale face[color(white)]
[tab]The pure will fly the sky, and the impure
[tab]will receive their punishment...!!(snicker)
[tab]..."Let’s think positive!"
[wait][clear]
***************************************/
    unitAnimationHold(npc2, animation_13, -1);
    wait(ref_305);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_304);
    unitRestoreFacing(npc2);
    b(label_318);
  label_30c:
    unitFacePlayer(npc2);
    ref_30d = dialogAlloc();
    ref_30e = msgShow(msg_43);
/***************************************
[color(yellow)]Man with a pale face[color(white)]
[tab]There’s no... more... dragon...
[tab]...but, "Let’s think positive!"
[tab]Appreciate the gift of life!
[wait][clear]
***************************************/
    unitAnimationHold(npc2, animation_13, -1);
    wait(ref_30e);
    ref_311 = msgShow(msg_44);
/***************************************
[color(yellow)]Man with a pale face[color(white)]
[tab]Good bye dragon...
[tab]Good bye drugs...
[tab]I can live on my own...!(snicker)
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_24, 1);
    wait(ref_311);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_30d);
    unitRestoreFacing(npc2);
    b(label_318);
  label_318:
    controlEnable();
}

function MAN3()
{
    controlDisable();
    bitGet(var_0, LBIT_0000);
    bne(var_0, 0, label_32d);
    bitGet(var_0, MBIT_KE_SKYMAP);
    bne(var_0, 0, label_323);
    ref_31f = call(MAPMES);
    wait(ref_31f);
    b(label_5ed);
    b(label_32c);
  label_323:
    bne(var_0, 1, label_32c);
    bitGet(var_0, MBIT_SKY_HENIHATU);
    bne(var_0, 0, label_328);
    b(label_332);
    b(label_32b);
  label_328:
    bne(var_0, 1, label_32b);
    b(label_345);
    b(label_32b);
  label_32b:
    b(label_32c);
  label_32c:
    b(label_332);
  label_32d:
    bne(var_0, 1, label_332);
    ref_32e = call(MAPMES);
    wait(ref_32e);
    b(label_5ed);
    b(label_332);
  label_332:
    unitFacePlayer(npc3);
    ref_333 = bustupLoad(bustup_75);
    bustupWait(ref_333);
    ref_335 = bustupAlloc(ref_333, right, rgb(0,0,0));
    bustupFade(ref_335, rgb(128,0,0), 30);
    ref_337 = dialogAlloc();
    ref_338 = msgShow(msg_45);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Ahh, I barely escaped. If that bartender
[tab]didn’t warn me, I would have disappeared
[tab]along with Narumi Ward.
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_24, 1);
    wait(ref_338);
    ref_33b = msgShow(msg_46);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]I have no more interest in money.
[tab]I now live to collect maps...
[tab]So, what would you like?
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_24, 1);
    wait(ref_33b);
    unitAnimationPlay(npc3, animation_0, 1);
    dialogFree(ref_337);
    bitSet(MBIT_MAP_ITENHATU);
    ref_341 = bustupFade(ref_335, rgb(0,0,0), 10);
    bustupWait(ref_341);
    bustupFree(ref_335);
    b(label_35d);
  label_345:
    unitFacePlayer(npc3);
    ref_346 = bustupLoad(bustup_75);
    bustupWait(ref_346);
    ref_348 = bustupAlloc(ref_346, right, rgb(0,0,0));
    bustupFade(ref_348, rgb(128,0,0), 30);
    ref_34a = dialogAlloc();
    bitGet(var_0, MBIT_MAP_ITENHATU);
    bne(var_0, 0, label_352);
    ref_34d = msgShow(msg_47);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Ahh, I barely escaped. If that bartender
[tab]didn’t warn me, I would have disappeared
[tab]along with Narumi Ward.
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_24, 1);
    wait(ref_34d);
    bitSet(MBIT_MAP_ITENHATU);
    b(label_357);
  label_352:
    bne(var_0, 1, label_357);
    ref_353 = msgShow(msg_48);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Oh, such a pretty miss!
[tab]I’m so happy you came to see me.
[tab]So what do you want?
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_24, 1);
    wait(ref_353);
    b(label_357);
  label_357:
    unitAnimationPlay(npc3, animation_0, 1);
    dialogFree(ref_34a);
    ref_359 = bustupFade(ref_348, rgb(0,0,0), 10);
    bustupWait(ref_359);
    bustupFree(ref_348);
    b(label_35d);
  label_35d:
    ref_35d = call(MESHYOUJI);
    wait(ref_35d);
    choiceSetResult(3);
    op_105(3);
    ref_361 = bustupLoad(bustup_1);
    bustupWait(ref_361);
    ref_363 = bustupAlloc(ref_361, center, rgb(0,0,0));
    bustupFade(ref_363, rgb(128,0,0), 30);
    bitGet(var_0, LBIT_0010);
    bne(var_0, 0, label_36c);
    ref_367 = dialogChoiceAlloc();
    ref_368 = msgShow(msg_49);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]So what do you want?
[choice(4)][if_all(!LBIT_0000)]Take a request
Talk
Explanation
Nothing
[end_choice][clear]
***************************************/
    wait(ref_368);
    dialogFree(ref_367);
    b(label_372);
  label_36c:
    bne(var_0, 1, label_372);
    ref_36d = dialogChoiceAlloc();
    ref_36e = msgShow(msg_50);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]So what do you want?
[choice(4)][if_all(!LBIT_0000)]Give map
Talk
Explanation
Nothing
[end_choice][clear]
***************************************/
    wait(ref_36e);
    dialogFree(ref_36d);
    b(label_372);
  label_372:
    ref_372 = bustupFade(ref_363, rgb(0,0,0), 10);
    bustupWait(ref_372);
    bustupFree(ref_363);
    choiceGetResult(var_0);
    beq(var_0, 0, label_388);
    beq(var_0, 1, label_5d9);
    beq(var_0, 2, label_37a);
    beq(var_0, 3, label_5de);
  label_37a:
    ref_37a = bustupLoad(bustup_75);
    bustupWait(ref_37a);
    ref_37c = bustupAlloc(ref_37a, right, rgb(0,0,0));
    bustupFade(ref_37c, rgb(128,0,0), 30);
    ref_37e = dialogAlloc();
    ref_37f = msgShow(msg_51);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]You want to hear about maps?
[tab]When you accept my request, I will
[tab]give you a blank map.
[wait][clear][color(yellow)]Salam Ladeen[color(white)]
[tab]When you visit the location you
[tab]should open your map to see your
[tab]progress.
[wait][clear][color(yellow)]Salam Ladeen[color(white)]
[tab]You can see the blocks you have yet to visit,
[tab]and areas you’ve already visited will be 
[tab]blacked out.
[wait][clear][color(yellow)]Salam Ladeen[color(white)]
[tab]Once you clear the dungeon you cannot
[tab]return to finish the map so be careful...
[wait][clear][color(yellow)]Salam Ladeen[color(white)]
[tab]I will trade a completed map for 
[tab]special cards.
[wait][clear]
***************************************/
    wait(ref_37f);
    dialogFree(ref_37e);
    ref_382 = bustupFade(ref_37c, rgb(0,0,0), 10);
    bustupWait(ref_382);
    bustupFree(ref_37c);
    delayClear();
    delayWait(30);
    b(label_35d);
  label_388:
    bitGet(var_0, MBIT_MAPSAKUSEI);
    bnz(var_0, label_468);
    ref_38a = call(TUGIDOKOIKU);
    wait(ref_38a);
    bitGet(var_0, LBIT_0012);
    bne(var_0, 0, label_38f);
    b(label_3a0);
  label_38f:
    bne(var_0, 1, label_3a0);
    ref_390 = bustupLoad(bustup_75);
    bustupWait(ref_390);
    ref_392 = bustupAlloc(ref_390, right, rgb(0,0,0));
    bustupFade(ref_392, rgb(128,0,0), 30);
    ref_394 = dialogAlloc();
    ref_395 = msgShow(msg_52);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Miss, where are you going now?
[tab]...[delay(10)]...[delay(10)]But I already have that map?
[tab]Tell me when you go to a new place.
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_27, 1);
    wait(ref_395);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_394);
    ref_39a = bustupFade(ref_392, rgb(0,0,0), 10);
    bustupWait(ref_39a);
    bustupFree(ref_392);
    bitSet(LBIT_0000);
    b(label_5c9);
    b(label_3a0);
  label_3a0:
    bitGet(var_0, LBIT_0011);
    bne(var_0, 0, label_3f3);
    bitGet(var_0, EBIT_E00AF);
    bne(var_0, 0, label_3e1);
    bitGet(var_0, EBIT_E008C);
    bne(var_0, 0, label_3cf);
    bitGet(var_0, EBIT_E007A);
    bne(var_0, 0, label_3bd);
    bitGet(var_0, EBIT_E0077);
    bne(var_0, 0, label_3ab);
    b(label_3bc);
  label_3ab:
    bne(var_0, 1, label_3bc);
    ref_3ac = bustupLoad(bustup_75);
    bustupWait(ref_3ac);
    ref_3ae = bustupAlloc(ref_3ac, right, rgb(0,0,0));
    bustupFade(ref_3ae, rgb(128,0,0), 30);
    ref_3b0 = dialogAlloc();
    ref_3b1 = msgShow(msg_53);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Miss, where are you going now?
[tab]...[delay(10)]...[delay(10)]Eh? Aoba Park? I’ll pass.
[tab]There’s nothing special about a park, right?
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_27, 1);
    wait(ref_3b1);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_3b0);
    ref_3b6 = bustupFade(ref_3ae, rgb(0,0,0), 10);
    bustupWait(ref_3b6);
    bustupFree(ref_3ae);
    bitSet(LBIT_0000);
    b(label_5c9);
    b(label_3bc);
  label_3bc:
    b(label_3ce);
  label_3bd:
    bne(var_0, 1, label_3ce);
    ref_3be = bustupLoad(bustup_75);
    bustupWait(ref_3be);
    ref_3c0 = bustupAlloc(ref_3be, right, rgb(0,0,0));
    bustupFade(ref_3c0, rgb(128,0,0), 30);
    ref_3c2 = dialogAlloc();
    ref_3c3 = msgShow(msg_54);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Miss, where are you going now?
[tab]...[delay(10)]...[delay(10)]Oh, just there.
[tab]I don’t need a map of there.
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_27, 1);
    wait(ref_3c3);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_3c2);
    ref_3c8 = bustupFade(ref_3c0, rgb(0,0,0), 10);
    bustupWait(ref_3c8);
    bustupFree(ref_3c0);
    bitSet(LBIT_0000);
    b(label_5c9);
    b(label_3ce);
  label_3ce:
    b(label_3e0);
  label_3cf:
    bne(var_0, 1, label_3e0);
    ref_3d0 = bustupLoad(bustup_75);
    bustupWait(ref_3d0);
    ref_3d2 = bustupAlloc(ref_3d0, right, rgb(0,0,0));
    bustupFade(ref_3d2, rgb(128,0,0), 30);
    ref_3d4 = dialogAlloc();
    ref_3d5 = msgShow(msg_55);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Miss, where are you going now?
[tab]...[delay(10)]...[delay(10)]Eh, a shrine? I’m not interested.
[tab]I don’t need a map of there.
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_27, 1);
    wait(ref_3d5);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_3d4);
    ref_3da = bustupFade(ref_3d2, rgb(0,0,0), 10);
    bustupWait(ref_3da);
    bustupFree(ref_3d2);
    bitSet(LBIT_0000);
    b(label_5c9);
    b(label_3e0);
  label_3e0:
    b(label_3f2);
  label_3e1:
    bne(var_0, 1, label_3f2);
    ref_3e2 = bustupLoad(bustup_75);
    bustupWait(ref_3e2);
    ref_3e4 = bustupAlloc(ref_3e2, right, rgb(0,0,0));
    bustupFade(ref_3e4, rgb(128,0,0), 30);
    ref_3e6 = dialogAlloc();
    ref_3e7 = msgShow(msg_56);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Miss, where are you going now?
[tab]...[delay(10)]...[delay(10)]Sumaru Castle? I’ll pass.
[tab]Anger the Lord, and it’s Hara-kiri, right?
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_27, 1);
    wait(ref_3e7);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_3e6);
    ref_3ec = bustupFade(ref_3e4, rgb(0,0,0), 10);
    bustupWait(ref_3ec);
    bustupFree(ref_3e4);
    bitSet(LBIT_0000);
    b(label_5c9);
    b(label_3f2);
  label_3f2:
    b(label_3f5);
  label_3f3:
    bne(var_0, 1, label_3f5);
    b(label_3f5);
  label_3f5:
    bitGet(var_0, MBIT_SKY_HENIHATU);
    bne(var_0, 0, label_409);
    ref_3f7 = bustupLoad(bustup_75);
    bustupWait(ref_3f7);
    ref_3f9 = bustupAlloc(ref_3f7, right, rgb(0,0,0));
    bustupFade(ref_3f9, rgb(128,0,0), 30);
    ref_3fb = dialogAlloc();
    ref_3fc = msgShow(msg_57);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]I have no more interest in money.
[tab]I now live to collect maps.
[tab]Miss, where are you going now?
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_24, 1);
    wait(ref_3fc);
    ref_3ff = msgShow(msg_58);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]...[delay(10)]...[delay(10)]...[delay(1)]Hmm, I don’t know that place.
[tab]It’s a new place! Can you check it out?
[tab]Miss, please make a map of there!
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_27, 1);
    wait(ref_3ff);
    unitAnimationPlay(npc3, animation_0, 1);
    dialogFree(ref_3fb);
    ref_404 = bustupFade(ref_3f9, rgb(0,0,0), 10);
    bustupWait(ref_404);
    bustupFree(ref_3f9);
    bitSet(MBIT_SKY_HENIHATU);
    b(label_418);
  label_409:
    bne(var_0, 1, label_418);
    ref_40a = bustupLoad(bustup_75);
    bustupWait(ref_40a);
    ref_40c = bustupAlloc(ref_40a, right, rgb(0,0,0));
    bustupFade(ref_40c, rgb(128,0,0), 30);
    ref_40e = dialogAlloc();
    ref_40f = msgShow(msg_59);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Miss, where are you going now?
[tab]...[delay(10)]...[delay(10)]...[delay(1)]I don’t know that place either.
[tab]Miss, please make a map of there!
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_27, 1);
    wait(ref_40f);
    unitAnimationPlay(npc3, animation_0, 1);
    dialogFree(ref_40e);
    ref_414 = bustupFade(ref_40c, rgb(0,0,0), 10);
    bustupWait(ref_414);
    bustupFree(ref_40c);
    b(label_418);
  label_418:
    choiceSetResult(1);
    op_105(1);
    ref_41a = bustupLoad(bustup_1);
    bustupWait(ref_41a);
    ref_41c = bustupAlloc(ref_41a, center, rgb(0,0,0));
    bustupFade(ref_41c, rgb(128,0,0), 30);
    ref_41e = dialogChoiceAlloc();
    ref_41f = msgShow(msg_60);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Will you make a map?
[choice(2)]Yes
No
[end_choice][clear]
***************************************/
    wait(ref_41f);
    dialogFree(ref_41e);
    ref_422 = bustupFade(ref_41c, rgb(0,0,0), 10);
    bustupWait(ref_422);
    bustupFree(ref_41c);
    choiceGetResult(var_0);
    bne(var_0, 0, label_429);
    b(label_42c);
    b(label_42c);
  label_429:
    bne(var_0, 1, label_42c);
    b(label_45a);
    b(label_42c);
  label_42c:
    ref_42c = call(TOUHACHECK);
    wait(ref_42c);
    bitGet(var_0, MBIT_MAP_NOHAKUSI);
    bne(var_0, 0, label_431);
    b(label_434);
  label_431:
    bne(var_0, 1, label_434);
    b(label_4b1);
    b(label_434);
  label_434:
    ref_434 = call(EVENTCHECK);
    wait(ref_434);
    bitSet(LBIT_0000);
    ref_437 = bustupLoad(bustup_75);
    bustupWait(ref_437);
    ref_439 = bustupAlloc(ref_437, right, rgb(0,0,0));
    bustupFade(ref_439, rgb(128,0,0), 30);
    ref_43b = dialogAlloc();
    ref_43c = msgShow(msg_61);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Ah! So you’ll make a map for me!?
[tab]Thank you.
[tab]Here’s a blank map.
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_27, 1);
    wait(ref_43c);
    ref_43f = msgShow(msg_62);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Just keep walking, and complete the map.
[tab]If it is good, I’ll trade it for my
[tab]important card.
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_24, 1);
    wait(ref_43f);
    unitAnimationPlay(npc3, animation_0, 1);
    dialogFree(ref_43b);
    ref_444 = bustupFade(ref_439, rgb(0,0,0), 10);
    bustupWait(ref_444);
    bustupFree(ref_439);
    delayClear();
    delayWait(30);
    ref_449 = call(TIZU);
    wait(ref_449);
    bne(var_2, 0, label_451);
    ref_44c = dialogAlloc();
    ref_44d = msgShow(msg_63);
/***************************************
[color(green)]Maya got [item_with_type(item_fffe)].[color(white)]
[wait][clear]
***************************************/
    wait(ref_44d);
    dialogFree(ref_44c);
    b(label_457);
  label_451:
    bne(var_2, 1, label_457);
    ref_452 = dialogAlloc();
    ref_453 = msgShow(msg_64);
/***************************************
[color(green)]Maya got [item_with_type(item_fffe)] and
[item_with_type(item_fffd)].[color(white)]
[wait][clear]
***************************************/
    wait(ref_453);
    dialogFree(ref_452);
    b(label_457);
  label_457:
    delayClear();
    delayWait(30);
    b(label_5c9);
  label_45a:
    ref_45a = bustupLoad(bustup_75);
    bustupWait(ref_45a);
    ref_45c = bustupAlloc(ref_45a, right, rgb(0,0,0));
    bustupFade(ref_45c, rgb(128,0,0), 30);
    ref_45e = dialogAlloc();
    ref_45f = msgShow(msg_65);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]...I see... You won’t make a map for me.
[tab]I would’ve traded it for a rare card.
[tab]That’s too bad.
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_24, 1);
    wait(ref_45f);
    unitAnimationPlay(npc3, animation_0, 1);
    dialogFree(ref_45e);
    ref_464 = bustupFade(ref_45c, rgb(0,0,0), 10);
    bustupWait(ref_464);
    bustupFree(ref_45c);
    b(label_5c9);
  label_468:
    ref_468 = bustupLoad(bustup_75);
    bustupWait(ref_468);
    ref_46a = bustupAlloc(ref_468, right, rgb(0,0,0));
    bustupFade(ref_46a, rgb(128,0,0), 30);
    ref_46c = dialogAlloc();
    ref_46d = msgShow(msg_66);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Oh, you brought me a map of a new place!
[tab]I live to collect maps.
[tab]Let me see...
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_24, 1);
    wait(ref_46d);
    dialogFree(ref_46c);
    ref_471 = bustupFade(ref_46a, rgb(0,0,0), 10);
    bustupWait(ref_471);
    bustupFree(ref_46a);
    ref_474 = call(CLMAPCHECK);
    wait(ref_474);
    delayClear();
    delayWait(45);
    bitGet(var_0, MBIT_MAPKANSEI);
    bne(var_0, 0, label_4a1);
    bitGet(var_0, MBIT_MAPMIKANSEI);
    bne(var_0, 0, label_48b);
    ref_47c = bustupLoad(bustup_75);
    bustupWait(ref_47c);
    ref_47e = bustupAlloc(ref_47c, right, rgb(0,0,0));
    bustupFade(ref_47e, rgb(128,0,0), 30);
    ref_480 = dialogAlloc();
    ref_481 = msgShow(msg_67);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]This IS very unique... but... it’s incomplete!
[tab]I can’t trade it for my card.
[tab]...Please, complete this map!
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_24, 1);
    wait(ref_481);
    unitAnimationPlay(npc3, animation_0, 1);
    dialogFree(ref_480);
    ref_486 = bustupFade(ref_47e, rgb(0,0,0), 10);
    bustupWait(ref_486);
    bustupFree(ref_47e);
    b(label_5c8);
    b(label_4a0);
  label_48b:
    bne(var_0, 1, label_4a0);
    ref_48c = bustupLoad(bustup_75);
    bustupWait(ref_48c);
    ref_48e = bustupAlloc(ref_48c, right, rgb(0,0,0));
    bustupFade(ref_48e, rgb(128,0,0), 30);
    ref_490 = dialogAlloc();
    ref_491 = msgShow(msg_68);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]This IS very unique... but... it’s incomplete.
[tab]I can’t trade it for my card.
[tab]...But I’ll keep the map!
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_24, 1);
    wait(ref_491);
    unitAnimationPlay(npc3, animation_0, 1);
    dialogFree(ref_490);
    ref_496 = bustupFade(ref_48e, rgb(0,0,0), 10);
    bustupWait(ref_496);
    bustupFree(ref_48e);
    bitClear(MBIT_MAPKANSEI);
    bitClear(MBIT_MAPMIKANSEI);
    bitClear(MBIT_MAPSAKUSEI);
    ref_49c = call(BITOFFALL);
    wait(ref_49c);
    b(label_5c8);
    b(label_4a0);
  label_4a0:
    b(label_4b0);
  label_4a1:
    bne(var_0, 1, label_4b0);
    ref_4a2 = bustupLoad(bustup_75);
    bustupWait(ref_4a2);
    ref_4a4 = bustupAlloc(ref_4a2, right, rgb(0,0,0));
    bustupFade(ref_4a4, rgb(128,0,0), 30);
    ref_4a6 = dialogAlloc();
    ref_4a7 = msgShow(msg_69);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]This IS a very unique map!
[tab]Please, trade it for my card!!
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_27, 1);
    wait(ref_4a7);
    unitAnimationPlay(npc3, animation_0, 1);
    dialogFree(ref_4a6);
    ref_4ac = bustupFade(ref_4a4, rgb(0,0,0), 10);
    bustupWait(ref_4ac);
    bustupFree(ref_4a4);
    b(label_4b0);
  label_4b0:
    b(label_4c2);
  label_4b1:
    ref_4b1 = bustupLoad(bustup_75);
    bustupWait(ref_4b1);
    ref_4b3 = bustupAlloc(ref_4b1, right, rgb(0,0,0));
    bustupFade(ref_4b3, rgb(128,0,0), 30);
    ref_4b5 = dialogAlloc();
    ref_4b6 = msgShow(msg_70);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Ah! So you’ll make a map for me!?
[tab]Here’s a blank...
[tab]What!? You already went?
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_27, 1);
    wait(ref_4b6);
    ref_4b9 = msgShow(msg_71);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Let me see...
[tab]This IS a very unique map!
[tab]Please, trade it for my card!!
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_24, 1);
    wait(ref_4b9);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_4b5);
    ref_4be = bustupFade(ref_4b3, rgb(0,0,0), 10);
    bustupWait(ref_4be);
    bustupFree(ref_4b3);
    b(label_4c2);
  label_4c2:
    bitGet(var_1, IBIT_CMP_MAP_13);
    bitGet(var_2, IBIT_CMP_MAP_29);
    add(var_0, var_1, var_2);
    boutrange(var_0, 0, 1, label_4c7);
    b(label_4ca);
  label_4c7:
    bne(var_0, 2, label_4ca);
    b(label_4f3);
    b(label_4ca);
  label_4ca:
    bitGet(var_1, IBIT_CMP_MAP_11);
    bitGet(var_2, IBIT_CMP_MAP_2C);
    add(var_0, var_1, var_2);
    boutrange(var_0, 0, 1, label_4cf);
    b(label_4d2);
  label_4cf:
    bne(var_0, 2, label_4d2);
    b(label_51a);
    b(label_4d2);
  label_4d2:
    bitGet(var_0, IBIT_CMP_MAP_0F);
    bnz(var_0, label_53e);
    bitGet(var_1, IBIT_CMP_MAP_0D);
    bitGet(var_2, IBIT_CMP_MAP_19);
    add(var_0, var_1, var_2);
    boutrange(var_0, 0, 1, label_4d9);
    b(label_4dc);
  label_4d9:
    bne(var_0, 2, label_4dc);
    b(label_55a);
    b(label_4dc);
  label_4dc:
    bitGet(var_0, IBIT_CMP_MAP_0C);
    bnz(var_0, label_573);
    bitGet(var_1, IBIT_CMP_MAP_0B);
    bitGet(var_2, IBIT_CMP_MAP_2A);
    add(var_0, var_1, var_2);
    boutrange(var_0, 0, 1, label_4e3);
    b(label_4e6);
  label_4e3:
    bne(var_0, 2, label_4e6);
    b(label_58a);
    b(label_4e6);
  label_4e6:
    bitGet(var_0, IBIT_CMP_MAP_09);
    bne(var_0, 0, label_4ef);
    bitGet(var_0, IBIT_CMP_MAP_08);
    bne(var_0, 0, label_4eb);
    b(label_4ee);
  label_4eb:
    bne(var_0, 1, label_4ee);
    b(label_5af);
    b(label_4ee);
  label_4ee:
    b(label_4f2);
  label_4ef:
    bne(var_0, 1, label_4f2);
    b(label_59e);
    b(label_4f2);
  label_4f2:
    b(label_5c2);
  label_4f3:
    ref_4f3 = dialogAlloc();
    ref_4f4 = msgShow(msg_72);
/***************************************
[color(green)]As a reward for Map Making, Maya got
Salam Select Card Set FINAL.[color(white)]
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_4f4);
    dialogFree(ref_4f3);
    partyItemAdd(st_card, 10);
    partyItemAdd(vi_card, 10);
    partyItemAdd(dx_card, 10);
    partyItemAdd(ag_card, 10);
    partyItemAdd(lu_card, 10);
    partyItemAdd(all_card, 10);
    partyItemAdd(emperor_card, 100);
    partyItemAdd(hierophant_card, 100);
    partyItemAdd(justice_card, 100);
    partyItemAdd(priestess_card, 100);
    partyItemAdd(empress_card, 100);
    partyItemAdd(lovers_card, 100);
    partyItemAdd(sun_card, 100);
    partyItemAdd(fool_card, 3);
    bitSet(VBIT_FOOL_GET);
    partyItemAdd(healing_card, 1);
    partyItemAdd(holylight_card, 1);
    partyItemAdd(attack mirror_card, 1);
    partyItemAdd(blessing_card, 1);
    partyItemAdd(sacrifice_card, 1);
    partyItemAdd(magic mirror_card, 1);
    partyItemAdd(inferno_card, 1);
    partyItemAdd(torrent_card, 1);
    partyItemAdd(gale_card, 1);
    partyItemAdd(quake_card, 1);
    partyItemAdd(frigid_card, 1);
    partyItemAdd(thunderbolt_card, 1);
    partyItemAdd(scorching_card, 1);
    partyItemAdd(wavelength_card, 1);
    partyItemAdd(pressure_card, 1);
    partyItemAdd(nuclear_card, 1);
    bitSet(MBIT_MEND_13);
    b(label_5c2);
    b(label_5c2);
  label_51a:
    ref_51a = dialogAlloc();
    ref_51b = msgShow(msg_73);
/***************************************
[color(green)]As a reward for Map Making, Maya got
Salam Select Card Set TAROT SPECIAL.[color(white)]
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_51b);
    dialogFree(ref_51a);
    partyItemAdd(magician_card, 100);
    partyItemAdd(priestess_card, 100);
    partyItemAdd(empress_card, 100);
    partyItemAdd(emperor_card, 100);
    partyItemAdd(hierophant_card, 100);
    partyItemAdd(lovers_card, 100);
    partyItemAdd(chariot_card, 100);
    partyItemAdd(strength_card, 100);
    partyItemAdd(hermit_card, 100);
    partyItemAdd(fortune_card, 100);
    partyItemAdd(justice_card, 100);
    partyItemAdd(hanged_man_card, 100);
    partyItemAdd(death_card, 100);
    partyItemAdd(temperance_card, 100);
    partyItemAdd(devil_card, 100);
    partyItemAdd(tower_card, 100);
    partyItemAdd(star_card, 100);
    partyItemAdd(moon_card, 100);
    partyItemAdd(sun_card, 100);
    partyItemAdd(judgement_card, 100);
    partyItemAdd(world_card, 100);
    partyItemAdd(fool_card, 2);
    bitSet(VBIT_FOOL_GET);
    ref_536 = call(RNDCHECK);
    wait(ref_536);
    ref_538 = call(RNDCHECK);
    wait(ref_538);
    ref_53a = call(RNDCHECK);
    wait(ref_53a);
    bitSet(MBIT_MEND_11);
    b(label_5c2);
  label_53e:
    ref_53e = dialogAlloc();
    ref_53f = msgShow(msg_74);
/***************************************
[color(green)]As a reward for Map Making, Maya got
Salam Select Skill Card Set Part 2.[color(white)]
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_53f);
    dialogFree(ref_53e);
    partyItemAdd(emperor_card, 100);
    partyItemAdd(hierophant_card, 100);
    partyItemAdd(justice_card, 100);
    partyItemAdd(priestess_card, 100);
    partyItemAdd(empress_card, 100);
    partyItemAdd(lovers_card, 100);
    partyItemAdd(sun_card, 100);
    partyItemAdd(maragion_card, 2);
    partyItemAdd(malaques_card, 2);
    partyItemAdd(magarula_card, 2);
    partyItemAdd(mamagnara_card, 2);
    partyItemAdd(freila_card, 2);
    partyItemAdd(gryva_card, 2);
    partyItemAdd(medirama_card, 2);
    partyItemAdd(megidola_card, 2);
    partyItemAdd(fool_card, 1);
    bitSet(VBIT_FOOL_GET);
    ref_554 = call(RNDCHECK);
    wait(ref_554);
    ref_556 = call(RNDCHECK);
    wait(ref_556);
    bitSet(MBIT_MEND_0F);
    b(label_5c2);
  label_55a:
    ref_55a = dialogAlloc();
    ref_55b = msgShow(msg_75);
/***************************************
[color(green)]As a reward for Map Making, Maya got
Salam Select Skill Card Set.[color(white)]
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_55b);
    dialogFree(ref_55a);
    partyItemAdd(emperor_card, 80);
    partyItemAdd(hierophant_card, 80);
    partyItemAdd(justice_card, 80);
    partyItemAdd(priestess_card, 80);
    partyItemAdd(empress_card, 80);
    partyItemAdd(sun_card, 80);
    partyItemAdd(agidyne_card, 2);
    partyItemAdd(aquadyne_card, 2);
    partyItemAdd(garudyne_card, 2);
    partyItemAdd(magnadyne_card, 2);
    partyItemAdd(diarama_card, 2);
    partyItemAdd(bufula_card, 2);
    partyItemAdd(zionga_card, 2);
    partyItemAdd(zanma_card, 2);
    ref_56d = call(RNDCHECK);
    wait(ref_56d);
    ref_56f = call(RNDCHECK);
    wait(ref_56f);
    bitSet(MBIT_MEND_0D);
    b(label_5c2);
  label_573:
    ref_573 = dialogAlloc();
    ref_574 = msgShow(msg_76);
/***************************************
[color(green)]As a reward for Map Making, Maya got
Salam Select Card Set Booster Pack.[color(white)]
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_574);
    dialogFree(ref_573);
    partyItemAdd(st_card, 10);
    partyItemAdd(vi_card, 10);
    partyItemAdd(dx_card, 10);
    partyItemAdd(ag_card, 10);
    partyItemAdd(lu_card, 10);
    partyItemAdd(all_card, 10);
    partyItemAdd(tarukaja_card, 2);
    partyItemAdd(rakukaja_card, 2);
    partyItemAdd(makakaja_card, 2);
    partyItemAdd(samakaja_card, 2);
    partyItemAdd(sukukaja_card, 2);
    partyItemAdd(dekaja_card, 2);
    partyItemAdd(tetraja_card, 2);
    partyItemAdd(free_tarot, 150);
    ref_586 = call(RNDCHECK);
    wait(ref_586);
    bitSet(MBIT_MEND_0C);
    b(label_5c2);
  label_58a:
    ref_58a = dialogAlloc();
    ref_58b = msgShow(msg_77);
/***************************************
[color(green)]As a reward for Map Making, Maya got
Salam Select Card Set Part 2.[color(white)]
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_58b);
    dialogFree(ref_58a);
    partyItemAdd(emperor_card, 50);
    partyItemAdd(empress_card, 50);
    partyItemAdd(hierophant_card, 50);
    partyItemAdd(priestess_card, 50);
    partyItemAdd(justice_card, 50);
    partyItemAdd(free_tarot, 100);
    partyItemAdd(posumudi_card, 2);
    partyItemAdd(kotoludi_card, 2);
    partyItemAdd(patra_card, 2);
    partyItemAdd(me patra_card, 2);
    partyItemAdd(recarm_card, 2);
    ref_59a = call(RNDCHECK);
    wait(ref_59a);
    bitSet(MBIT_MEND_0B);
    b(label_5c2);
  label_59e:
    ref_59e = dialogAlloc();
    ref_59f = msgShow(msg_78);
/***************************************
[color(green)]As a reward for Map Making, Maya got
Salam Select Card Set.[color(white)]
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_59f);
    dialogFree(ref_59e);
    partyItemAdd(empress_card, 30);
    partyItemAdd(emperor_card, 30);
    partyItemAdd(fortune_card, 30);
    partyItemAdd(hierophant_card, 30);
    partyItemAdd(justice_card, 30);
    partyItemAdd(priestess_card, 30);
    partyItemAdd(strength_card, 30);
    partyItemAdd(sun_card, 30);
    partyItemAdd(world_card, 30);
    partyItemAdd(free_tarot, 50);
    bitSet(MBIT_MEND_09);
    b(label_5c2);
  label_5af:
    ref_5af = dialogAlloc();
    ref_5b0 = msgShow(msg_79);
/***************************************
[color(green)]As a reward for Map Making, Maya got
Salam Select Card Set.[color(white)]
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_5b0);
    dialogFree(ref_5af);
    partyItemAdd(empress_card, 30);
    partyItemAdd(emperor_card, 30);
    partyItemAdd(fortune_card, 30);
    partyItemAdd(hierophant_card, 30);
    partyItemAdd(justice_card, 30);
    partyItemAdd(priestess_card, 30);
    partyItemAdd(strength_card, 30);
    partyItemAdd(sun_card, 30);
    partyItemAdd(world_card, 30);
    partyItemAdd(free_tarot, 50);
    ref_5be = call(RNDCHECK);
    wait(ref_5be);
    bitSet(MBIT_MEND_08);
    b(label_5c2);
  label_5c2:
    bitClear(MBIT_MAPKANSEI);
    bitClear(MBIT_MAPMIKANSEI);
    bitClear(MBIT_MAPSAKUSEI);
    bitClear(MBIT_MAP_NOHAKUSI);
    ref_5c6 = call(BITOFFALL);
    wait(ref_5c6);
  label_5c8:
    b(label_5c9);
  label_5c9:
    delayClear();
    delayWait(30);
    ref_5cb = bustupLoad(bustup_75);
    bustupWait(ref_5cb);
    ref_5cd = bustupAlloc(ref_5cb, right, rgb(0,0,0));
    bustupFade(ref_5cd, rgb(128,0,0), 30);
    ref_5cf = dialogAlloc();
    ref_5d0 = msgShow(msg_80);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Is there anything else?
[tab]Please ask me anything.
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_24, 1);
    wait(ref_5d0);
    unitAnimationPlay(npc3, animation_0, 1);
    dialogFree(ref_5cf);
    ref_5d5 = bustupFade(ref_5cd, rgb(0,0,0), 10);
    bustupWait(ref_5d5);
    bustupFree(ref_5cd);
    b(label_35d);
  label_5d9:
    ref_5d9 = call(MAPMES);
    wait(ref_5d9);
    delayClear();
    delayWait(30);
    b(label_35d);
  label_5de:
    ref_5de = bustupLoad(bustup_75);
    bustupWait(ref_5de);
    ref_5e0 = bustupAlloc(ref_5de, right, rgb(0,0,0));
    bustupFade(ref_5e0, rgb(128,0,0), 30);
    ref_5e2 = dialogAlloc();
    ref_5e3 = msgShow(msg_81);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Please come again.
[tab]But please keep this a secret.
[tab]I have many enemies... Ahaha.
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_1d, 1);
    wait(ref_5e3);
    unitAnimationPlay(npc3, animation_0, 1);
    dialogFree(ref_5e2);
    ref_5e8 = bustupFade(ref_5e0, rgb(0,0,0), 10);
    bustupWait(ref_5e8);
    bustupFree(ref_5e0);
    unitRestoreFacing(npc3);
    b(label_5ed);
  label_5ed:
    controlEnable();
}

function EVENTCHECK()
{
    bitGet(var_0, EBIT_E00B8);
    bez(var_0, label_5f5);
    bitSet(IBIT_BLK_MAP_13);
    bitSet(IBIT_BLK_MAP_29);
    bitSet(MBIT_MAPSAKUSEI);
    b(label_61b);
  label_5f5:
    bitGet(var_0, EBIT_E009F);
    bez(var_0, label_5fb);
    bitSet(IBIT_BLK_MAP_11);
    bitSet(IBIT_BLK_MAP_2C);
    bitSet(MBIT_MAPSAKUSEI);
    b(label_61b);
  label_5fb:
    bitGet(var_0, EBIT_E008C);
    bez(var_0, label_600);
    bitSet(IBIT_BLK_MAP_0F);
    bitSet(MBIT_MAPSAKUSEI);
    b(label_61b);
  label_600:
    bitGet(var_0, EBIT_E007F);
    bez(var_0, label_606);
    bitSet(IBIT_BLK_MAP_0D);
    bitSet(IBIT_BLK_MAP_19);
    bitSet(MBIT_MAPSAKUSEI);
    b(label_61b);
  label_606:
    bitGet(var_0, EBIT_E007B);
    bez(var_0, label_60b);
    bitSet(IBIT_BLK_MAP_0C);
    bitSet(MBIT_MAPSAKUSEI);
    b(label_61b);
  label_60b:
    bitGet(var_0, EBIT_E006F);
    bez(var_0, label_611);
    bitSet(IBIT_BLK_MAP_0B);
    bitSet(IBIT_BLK_MAP_2A);
    bitSet(MBIT_MAPSAKUSEI);
    b(label_61b);
  label_611:
    bitGet(var_0, MBIT_HI_ERITOUJO);
    bez(var_0, label_616);
    bitSet(IBIT_BLK_MAP_09);
    bitSet(MBIT_MAPSAKUSEI);
    b(label_61b);
  label_616:
    bitGet(var_0, MBIT_HI_NANJOTOUJO);
    bez(var_0, label_61b);
    bitSet(IBIT_BLK_MAP_08);
    bitSet(MBIT_MAPSAKUSEI);
    b(label_61b);
  label_61b:
}

function CLMAPCHECK()
{
    li(var_0, 0);
    bitGet(var_1, IBIT_CMP_MAP_13);
    bitGet(var_2, IBIT_CMP_MAP_29);
    add(var_0, var_1, var_2);
    bne(var_0, 2, label_624);
    bitSet(MBIT_MAPKANSEI);
    b(label_6c5);
    b(label_62d);
  label_624:
    li(var_0, 0);
    bitGet(var_1, IBIT_BLK_MAP_13);
    bitGet(var_2, IBIT_BLK_MAP_29);
    add(var_0, var_1, var_2);
    bne(var_0, 0, label_62a);
    b(label_62c);
  label_62a:
    b(label_6c5);
    b(label_62c);
  label_62c:
    b(label_62d);
  label_62d:
    li(var_0, 0);
    bitGet(var_1, IBIT_CMP_MAP_11);
    bitGet(var_2, IBIT_CMP_MAP_2C);
    add(var_0, var_1, var_2);
    bne(var_0, 2, label_635);
    bitSet(MBIT_MAPKANSEI);
    b(label_6c5);
    b(label_645);
  label_635:
    li(var_0, 0);
    bitGet(var_1, IBIT_BLK_MAP_11);
    bitGet(var_2, IBIT_BLK_MAP_2C);
    add(var_0, var_1, var_2);
    bne(var_0, 0, label_63b);
    b(label_644);
  label_63b:
    bitGet(var_0, EBIT_E00AF);
    bne(var_0, 0, label_63f);
    b(label_6c5);
    b(label_643);
  label_63f:
    bne(var_0, 1, label_643);
    bitSet(MBIT_MAPMIKANSEI);
    b(label_6c5);
    b(label_643);
  label_643:
    b(label_644);
  label_644:
    b(label_645);
  label_645:
    bitGet(var_0, IBIT_CMP_MAP_0F);
    bne(var_0, 0, label_655);
    bitGet(var_0, IBIT_BLK_MAP_0F);
    bne(var_0, 0, label_64a);
    b(label_654);
  label_64a:
    bne(var_0, 1, label_654);
    bitGet(var_0, EBIT_E009F);
    bne(var_0, 0, label_64f);
    b(label_6c5);
    b(label_653);
  label_64f:
    bne(var_0, 1, label_653);
    bitSet(MBIT_MAPMIKANSEI);
    b(label_6c5);
    b(label_653);
  label_653:
    b(label_654);
  label_654:
    b(label_659);
  label_655:
    bne(var_0, 1, label_659);
    bitSet(MBIT_MAPKANSEI);
    b(label_6c5);
    b(label_659);
  label_659:
    li(var_0, 0);
    bitGet(var_1, IBIT_CMP_MAP_0D);
    bitGet(var_2, IBIT_CMP_MAP_19);
    add(var_0, var_1, var_2);
    bne(var_0, 2, label_661);
    bitSet(MBIT_MAPKANSEI);
    b(label_6c5);
    b(label_671);
  label_661:
    li(var_0, 0);
    bitGet(var_1, IBIT_BLK_MAP_0D);
    bitGet(var_2, IBIT_BLK_MAP_19);
    add(var_0, var_1, var_2);
    bne(var_0, 0, label_667);
    b(label_670);
  label_667:
    bitGet(var_0, EBIT_E0088);
    bne(var_0, 0, label_66b);
    b(label_6c5);
    b(label_66f);
  label_66b:
    bne(var_0, 1, label_66f);
    bitSet(MBIT_MAPMIKANSEI);
    b(label_6c5);
    b(label_66f);
  label_66f:
    b(label_670);
  label_670:
    b(label_671);
  label_671:
    bitGet(var_0, IBIT_CMP_MAP_0C);
    bne(var_0, 0, label_681);
    bitGet(var_0, IBIT_BLK_MAP_0C);
    bne(var_0, 0, label_676);
    b(label_680);
  label_676:
    bne(var_0, 1, label_680);
    bitGet(var_0, EBIT_E007F);
    bne(var_0, 0, label_67b);
    b(label_6c5);
    b(label_67f);
  label_67b:
    bne(var_0, 1, label_67f);
    bitSet(MBIT_MAPMIKANSEI);
    b(label_6c5);
    b(label_67f);
  label_67f:
    b(label_680);
  label_680:
    b(label_685);
  label_681:
    bne(var_0, 1, label_685);
    bitSet(MBIT_MAPKANSEI);
    b(label_6c5);
    b(label_685);
  label_685:
    li(var_0, 0);
    bitGet(var_1, IBIT_CMP_MAP_0B);
    bitGet(var_2, IBIT_CMP_MAP_2A);
    add(var_0, var_1, var_2);
    bne(var_0, 2, label_68d);
    bitSet(MBIT_MAPKANSEI);
    b(label_6c5);
    b(label_69d);
  label_68d:
    li(var_0, 0);
    bitGet(var_1, IBIT_BLK_MAP_0B);
    bitGet(var_2, IBIT_BLK_MAP_2A);
    add(var_0, var_1, var_2);
    bne(var_0, 0, label_693);
    b(label_69c);
  label_693:
    bitGet(var_0, EBIT_E0077);
    bne(var_0, 0, label_697);
    b(label_6c5);
    b(label_69b);
  label_697:
    bne(var_0, 1, label_69b);
    bitSet(MBIT_MAPMIKANSEI);
    b(label_6c5);
    b(label_69b);
  label_69b:
    b(label_69c);
  label_69c:
    b(label_69d);
  label_69d:
    bitGet(var_0, IBIT_CMP_MAP_09);
    bne(var_0, 0, label_6ad);
    bitGet(var_0, IBIT_BLK_MAP_09);
    bne(var_0, 0, label_6a2);
    b(label_6ac);
  label_6a2:
    bne(var_0, 1, label_6ac);
    bitGet(var_0, EBIT_E006F);
    bne(var_0, 0, label_6a7);
    b(label_6c5);
    b(label_6ab);
  label_6a7:
    bne(var_0, 1, label_6ab);
    bitSet(MBIT_MAPMIKANSEI);
    b(label_6c5);
    b(label_6ab);
  label_6ab:
    b(label_6ac);
  label_6ac:
    b(label_6b1);
  label_6ad:
    bne(var_0, 1, label_6b1);
    bitSet(MBIT_MAPKANSEI);
    b(label_6c5);
    b(label_6b1);
  label_6b1:
    bitGet(var_0, IBIT_CMP_MAP_08);
    bne(var_0, 0, label_6c1);
    bitGet(var_0, IBIT_BLK_MAP_08);
    bne(var_0, 0, label_6b6);
    b(label_6c0);
  label_6b6:
    bne(var_0, 1, label_6c0);
    bitGet(var_0, EBIT_E006F);
    bne(var_0, 0, label_6bb);
    b(label_6c5);
    b(label_6bf);
  label_6bb:
    bne(var_0, 1, label_6bf);
    bitSet(MBIT_MAPMIKANSEI);
    b(label_6c5);
    b(label_6bf);
  label_6bf:
    b(label_6c0);
  label_6c0:
    b(label_6c5);
  label_6c1:
    bne(var_0, 1, label_6c5);
    bitSet(MBIT_MAPKANSEI);
    b(label_6c5);
    b(label_6c5);
  label_6c5:
}

function MAPMES()
{
    bitGet(var_0, EBIT_E00B8);
    bnz(var_0, label_6da);
    bitGet(var_0, EBIT_E00AF);
    bnz(var_0, label_6ca);
  label_6ca:
    unitFacePlayer(npc3);
    ref_6cb = bustupLoad(bustup_75);
    bustupWait(ref_6cb);
    ref_6cd = bustupAlloc(ref_6cb, right, rgb(0,0,0));
    bustupFade(ref_6cd, rgb(128,0,0), 30);
    ref_6cf = dialogAlloc();
    ref_6d0 = msgShow(msg_82);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Is it okay for a city to fly? 
[tab]Did the Lord allow it? No! ...I must go.
[tab]But the land is more dangerous...
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_24, 1);
    wait(ref_6d0);
    unitAnimationPlay(npc3, animation_0, 1);
    dialogFree(ref_6cf);
    ref_6d5 = bustupFade(ref_6cd, rgb(0,0,0), 10);
    bustupWait(ref_6d5);
    bustupFree(ref_6cd);
    unitRestoreFacing(npc3);
    b(label_6e9);
  label_6da:
    unitFacePlayer(npc3);
    ref_6db = bustupLoad(bustup_75);
    bustupWait(ref_6db);
    ref_6dd = bustupAlloc(ref_6db, right, rgb(0,0,0));
    bustupFade(ref_6dd, rgb(128,0,0), 30);
    ref_6df = dialogAlloc();
    ref_6e0 = msgShow(msg_83);
/***************************************
[color(yellow)]Salam Ladeen[color(white)]
[tab]Dragons... They really did exist...
[tab]There are many mysteries on the earth!
[tab]I might find a new hobby.
[wait][clear]
***************************************/
    unitAnimationPlay(npc3, animation_24, 1);
    wait(ref_6e0);
    unitAnimationPlay(npc3, animation_0, 1);
    dialogFree(ref_6df);
    ref_6e5 = bustupFade(ref_6dd, rgb(0,0,0), 10);
    bustupWait(ref_6e5);
    bustupFree(ref_6dd);
    unitRestoreFacing(npc3);
  label_6e9:
}

function SHOP()
{
    controlDisable();
    ref_6eb = shopOverlayInit();
    unitFacePlayer(shopkeeper);
    bitGet(var_0, MBIT_AIS_67);
    bne(var_0, 0, label_6f1);
    b(label_6fa);
    b(label_6fa);
  label_6f1:
    bne(var_0, 1, label_6fa);
    bitGet(var_0, MBIT_HSATOMI_HATURAITEN);
    bne(var_0, 0, label_6f6);
    b(label_70b);
    b(label_6f9);
  label_6f6:
    bne(var_0, 1, label_6f9);
    b(label_71c);
    b(label_6f9);
  label_6f9:
    b(label_6fa);
  label_6fa:
    ref_6fa = bustupLoad(bustup_fd);
    bustupWait(ref_6fa);
    ref_6fc = bustupAlloc(ref_6fa, right, rgb(0,0,0));
    bustupFade(ref_6fc, rgb(128,0,0), 30);
    ref_6fe = dialogAlloc();
    ref_6ff = msgShow(msg_84);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]Yes yes, Welcome!!
[tab]We conquer the nation every day!
[tab]So, what do you need?
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_6ff);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_6fe);
    ref_704 = bustupFade(ref_6fc, rgb(0,0,0), 10);
    bustupWait(ref_704);
    bustupFree(ref_6fc);
    wait(ref_6eb);
    shopInventory(9, shopInventory_0);
    shopRate(100);
    b(label_72d);
  label_70b:
    ref_70b = bustupLoad(bustup_fd);
    bustupWait(ref_70b);
    ref_70d = bustupAlloc(ref_70b, right, rgb(0,0,0));
    bustupFade(ref_70d, rgb(128,0,0), 30);
    ref_70f = dialogAlloc();
    ref_710 = msgShow(msg_85);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]Yes yes, Welcome!!
[tab]Is this your first time? Uhyohyohyo!!
[tab]I’ll give you discounts, so buy a lot!
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_710);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_70f);
    ref_715 = bustupFade(ref_70d, rgb(0,0,0), 10);
    bustupWait(ref_715);
    bustupFree(ref_70d);
    wait(ref_6eb);
    shopInventory(9, shopInventory_0);
    shopRate(80);
    b(label_72d);
  label_71c:
    ref_71c = bustupLoad(bustup_fd);
    bustupWait(ref_71c);
    ref_71e = bustupAlloc(ref_71c, right, rgb(0,0,0));
    bustupFade(ref_71e, rgb(128,0,0), 30);
    ref_720 = dialogAlloc();
    ref_721 = msgShow(msg_86);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]Welco... Oh hey!!
[tab]Thank you all the time! Uhyohyohyo!!
[tab]I’ll give you discounts, so buy a lot!
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_721);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_720);
    ref_726 = bustupFade(ref_71e, rgb(0,0,0), 10);
    bustupWait(ref_726);
    bustupFree(ref_71e);
    wait(ref_6eb);
    shopInventory(9, shopInventory_0);
    shopRate(80);
    b(label_72d);
  label_72d:
    ref_72d = bustupLoad(bustup_fd);
    bustupWait(ref_72d);
    ref_72f = bustupAlloc(ref_72d, right, rgb(0,0,0));
    bustupFade(ref_72f, rgb(128,0,0), 30);
    choiceSetResult(4);
    op_105(3);
    ref_733 = dialogAlloc();
    ref_734 = msgShow(msg_87);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]I’ll give you discounts, so buy a lot!
[choice(6)]Buy items
Sell items
Talk to Sister #5
[if_all(EBIT_SINARIOFF)]Check items
Never mind
Leave the store
[end_choice][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_734);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_73d);
    li(var_5, 0);
    b(label_762);
  label_73d:
    bne(var_0, 1, label_749);
    choiceSetResult(0);
    op_105(0);
    ref_740 = msgShow(msg_88);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]So, what would you like to sell?
[choice(7)][dbl_tab][if_all(EBIT_SINARIOFF)]Hidden items
[dbl_tab]Sell items
[dbl_tab]Sell weapons
[dbl_tab][if_all(EBIT_SINARIOFF)]Sell helmets
[dbl_tab]Sell armor
[dbl_tab][if_all(EBIT_SINARIOFF)]Sell leggings
[dbl_tab]Sell accessories
[end_choice][clear]
***************************************/
    wait(ref_740);
    choiceGetResult(var_5);
    bne(var_5, 0, label_746);
    li(var_5, 1000);
    b(label_748);
  label_746:
    add(var_5, var_5, 10);
    b(label_748);
  label_748:
    b(label_762);
  label_749:
    bne(var_0, 2, label_759);
    choiceSetResult(2);
    op_105(2);
    ref_74c = msgShow(msg_89);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]So what do you want to talk about?
[choice(3)]Make small talk
Ask about shopping
[if_all(EBIT_SINARIOFF)]Hidden items
[end_choice][clear]
***************************************/
    wait(ref_74c);
    choiceGetResult(var_0);
    bne(var_0, 0, label_752);
    li(var_5, 2);
    b(label_758);
  label_752:
    bne(var_0, 1, label_755);
    li(var_5, 2000);
    b(label_758);
  label_755:
    bne(var_0, 2, label_758);
    li(var_5, 1000);
    b(label_758);
  label_758:
    b(label_762);
  label_759:
    bne(var_0, 3, label_75c);
    li(var_5, 4);
    b(label_762);
  label_75c:
    bne(var_0, 4, label_75f);
    li(var_5, 4);
    b(label_762);
  label_75f:
    bne(var_0, 5, label_762);
    li(var_5, 5);
    b(label_762);
  label_762:
    dialogFree(ref_733);
    ref_763 = bustupFade(ref_72f, rgb(0,0,0), 10);
    bustupWait(ref_763);
    bustupFree(ref_72f);
    ref_766 = shopOpen(5);
    wait(ref_766);
}

function HA_SHOP_RESTART_0()
{
    choiceSetResult(4);
    op_105(3);
    ref_76b = bustupLoad(bustup_fd);
    bustupWait(ref_76b);
    ref_76d = bustupAlloc(ref_76b, right, rgb(0,0,0));
    bustupFade(ref_76d, rgb(128,0,0), 30);
    ref_76f = dialogAlloc();
    ref_770 = msgShow(msg_90);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]Uhyohyohyo!![delay(10)]
[tab]Yes Yes.
[tab]Is there anything else?
[choice(6)]Buy items
Sell items
Talk to Sister #5
[if_all(EBIT_SINARIOFF)]Check items
Never mind
Leave the store
[end_choice][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_770);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_779);
    li(var_5, 0);
    b(label_79e);
  label_779:
    bne(var_0, 1, label_785);
    choiceSetResult(0);
    op_105(0);
    ref_77c = msgShow(msg_91);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]So, what would you like to sell?
[choice(7)][dbl_tab][if_all(EBIT_SINARIOFF)]Hidden items
[dbl_tab]Sell items
[dbl_tab]Sell weapons
[dbl_tab][if_all(EBIT_SINARIOFF)]Sell helmets
[dbl_tab]Sell armor
[dbl_tab][if_all(EBIT_SINARIOFF)]Sell leggings
[dbl_tab]Sell accessories
[end_choice][clear]
***************************************/
    wait(ref_77c);
    choiceGetResult(var_5);
    bne(var_5, 0, label_782);
    li(var_5, 1000);
    b(label_784);
  label_782:
    add(var_5, var_5, 10);
    b(label_784);
  label_784:
    b(label_79e);
  label_785:
    bne(var_0, 2, label_795);
    choiceSetResult(2);
    op_105(2);
    ref_788 = msgShow(msg_92);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]So what do you want to talk about?
[choice(3)]Make small talk
Ask about shopping
[if_all(EBIT_SINARIOFF)]Hidden items
[end_choice][clear]
***************************************/
    wait(ref_788);
    choiceGetResult(var_0);
    bne(var_0, 0, label_78e);
    li(var_5, 2);
    b(label_794);
  label_78e:
    bne(var_0, 1, label_791);
    li(var_5, 2000);
    b(label_794);
  label_791:
    bne(var_0, 2, label_794);
    li(var_5, 1000);
    b(label_794);
  label_794:
    b(label_79e);
  label_795:
    bne(var_0, 3, label_798);
    li(var_5, 4);
    b(label_79e);
  label_798:
    bne(var_0, 4, label_79b);
    li(var_5, 4);
    b(label_79e);
  label_79b:
    bne(var_0, 5, label_79e);
    li(var_5, 5);
    b(label_79e);
  label_79e:
    dialogFree(ref_76f);
    ref_79f = bustupFade(ref_76d, rgb(0,0,0), 10);
    bustupWait(ref_79f);
    bustupFree(ref_76d);
}

function HA_SHOP_TALK_0()
{
    bitGet(var_0, EBIT_E00B8);
    bnz(var_0, label_7d3);
    bitGet(var_0, EBIT_E00AF);
    bnz(var_0, label_7c5);
    bitGet(var_0, EBIT_E007B);
    bnz(var_0, label_7b7);
    ref_7a9 = bustupLoad(bustup_fd);
    bustupWait(ref_7a9);
    ref_7ab = bustupAlloc(ref_7a9, right, rgb(0,0,0));
    bustupFade(ref_7ab, rgb(128,0,0), 30);
    ref_7ad = dialogAlloc();
    ref_7ae = msgShow(msg_93);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]I hear the purification seminars are very
[tab]popular... What can a celebrity do?!
[tab]They would share some customers! Daaaang!
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_7ae);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_7ad);
    ref_7b3 = bustupFade(ref_7ab, rgb(0,0,0), 10);
    bustupWait(ref_7b3);
    bustupFree(ref_7ab);
    b(label_7e4);
  label_7b7:
    ref_7b7 = bustupLoad(bustup_fd);
    bustupWait(ref_7b7);
    ref_7b9 = bustupAlloc(ref_7b7, right, rgb(0,0,0));
    bustupFade(ref_7b9, rgb(128,0,0), 30);
    ref_7bb = dialogAlloc();
    ref_7bc = msgShow(msg_94);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]New World Order. I want to get to know them!
[tab]If they’ll become Satomi Tadashi’s patron,
[tab]it doesn’t matter what organization it is!
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_7bc);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_7bb);
    ref_7c1 = bustupFade(ref_7b9, rgb(0,0,0), 10);
    bustupWait(ref_7c1);
    bustupFree(ref_7b9);
    b(label_7e4);
  label_7c5:
    ref_7c5 = bustupLoad(bustup_fd);
    bustupWait(ref_7c5);
    ref_7c7 = bustupAlloc(ref_7c5, right, rgb(0,0,0));
    bustupFade(ref_7c7, rgb(128,0,0), 30);
    ref_7c9 = dialogAlloc();
    ref_7ca = msgShow(msg_95);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]Daaaang, what’s the point of a city flying![delay(15)]
[tab]And it’s the end of the world too, right?[delay(15)]
[tab]What about our dream of national conquest?
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_7ca);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_7c9);
    ref_7cf = bustupFade(ref_7c7, rgb(0,0,0), 10);
    bustupWait(ref_7cf);
    bustupFree(ref_7c7);
    b(label_7e4);
  label_7d3:
    ref_7d3 = bustupLoad(bustup_fd);
    bustupWait(ref_7d3);
    ref_7d5 = bustupAlloc(ref_7d3, right, rgb(0,0,0));
    bustupFade(ref_7d5, rgb(128,0,0), 30);
    ref_7d7 = dialogAlloc();
    ref_7d8 = msgShow(msg_96);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]Uhyohyohyo!!
[tab]It looks like the world isn’t going to be
[tab]destroyed, what’s going on!
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_7d8);
    ref_7db = msgShow(msg_97);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]But, at this rate, nation-wide conquering
[tab]would be impossible!
[tab]Daaaang!
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_7db);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_7d7);
    ref_7e0 = bustupFade(ref_7d5, rgb(0,0,0), 10);
    bustupWait(ref_7e0);
    bustupFree(ref_7d5);
    b(label_7e4);
  label_7e4:
}

function HA_SHOP_END_0()
{
    ref_7e5 = bustupLoad(bustup_fd);
    bustupWait(ref_7e5);
    ref_7e7 = bustupAlloc(ref_7e5, right, rgb(0,0,0));
    bustupFade(ref_7e7, rgb(128,0,0), 30);
    ref_7e9 = dialogAlloc();
    ref_7ea = msgShow(msg_98);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]Satomi Tadashi is open all year!
[tab]Come again!
[tab]Uhyohyohyohyo!!
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_7ea);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    shopOverlayInit();
    dialogFree(ref_7e9);
    ref_7f0 = bustupFade(ref_7e7, rgb(0,0,0), 10);
    bustupWait(ref_7f0);
    bustupFree(ref_7e7);
    delayClear();
    delayWait(10);
    bitSet(MBIT_HSATOMI_HATURAITEN);
    bitGet(var_0, MBIT_EXITBIT);
    bne(var_0, 0, label_7fb);
    unitRestoreFacing(shopkeeper);
    controlEnable();
    b(label_7fe);
  label_7fb:
    bne(var_0, 1, label_7fe);
    call(GOOUT);
    b(label_7fe);
  label_7fe:
}

function DANBOORU0()
{
    bitGet(var_0, MBIT_HI_NANJOTOUJO);
    bnz(var_0, label_807);
    bitSet(MBIT_HI_NANJOTOUJO);
    ref_802 = dialogAlloc();
    ref_803 = msgShow(msg_99);
/***************************************
MBIT[tab]HI[tab]NANJOTOUJO
南条出現噂:広げた
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_803);
    dialogFree(ref_802);
    b(label_81e);
  label_807:
    bitGet(var_0, MBIT_KE_SKYMAP);
    bnz(var_0, label_80f);
    bitSet(MBIT_KE_SKYMAP);
    ref_80a = dialogAlloc();
    ref_80b = msgShow(msg_100);
/***************************************
マップ屋の噂・決定
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_80b);
    dialogFree(ref_80a);
    b(label_81e);
  label_80f:
    bitGet(var_0, LBIT_0000);
    bne(var_0, 0, label_817);
    bitSet(LBIT_0000);
    ref_812 = dialogAlloc();
    ref_813 = msgShow(msg_101);
/***************************************
マップ屋の依頼を受けた
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_813);
    dialogFree(ref_812);
    b(label_81e);
  label_817:
    bne(var_0, 1, label_81e);
    bitClear(LBIT_0000);
    ref_819 = dialogAlloc();
    ref_81a = msgShow(msg_102);
/***************************************
マップ屋の依頼を受けた
びっとお~ふッ!!
びっとお~ふッ!!
[wait][clear]
***************************************/
    wait(ref_81a);
    dialogFree(ref_819);
    b(label_81e);
  label_81e:
}

function DANBOORU()
{
    bitGet(var_0, MBIT_AIS_67);
    bnz(var_0, label_827);
    bitSet(MBIT_AIS_67);
    ref_822 = dialogAlloc();
    ref_823 = msgShow(msg_103);
/***************************************
MBIT[tab]AIS[tab]67
相性占いの
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_823);
    dialogFree(ref_822);
    b(label_86e);
  label_827:
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_82f);
    bitSet(EBIT_E006F);
    ref_82a = dialogAlloc();
    ref_82b = msgShow(msg_104);
/***************************************
EBIT[tab]E006F
「研究施設・TV局クリア」
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_82b);
    dialogFree(ref_82a);
    b(label_86e);
  label_82f:
    bitGet(var_0, EBIT_E0077);
    bnz(var_0, label_837);
    bitSet(EBIT_E0077);
    ref_832 = dialogAlloc();
    ref_833 = msgShow(msg_105);
/***************************************
EBIT[tab]E0077
「スマイル平坂クリア・Katsuya離脱」
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_833);
    dialogFree(ref_832);
    b(label_86e);
  label_837:
    bitGet(var_0, EBIT_E007A);
    bnz(var_0, label_83f);
    bitSet(EBIT_E007A);
    ref_83a = dialogAlloc();
    ref_83b = msgShow(msg_106);
/***************************************
EBIT[tab]E007A
「野音クリア・Katsuya編入」
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_83b);
    dialogFree(ref_83a);
    b(label_86e);
  label_83f:
    bitGet(var_0, EBIT_E007B);
    bnz(var_0, label_847);
    bitSet(EBIT_E007B);
    ref_842 = dialogAlloc();
    ref_843 = msgShow(msg_107);
/***************************************
EBIT[tab]E007B
「竜蔵と殺し屋の電話を盗聴」
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_843);
    dialogFree(ref_842);
    b(label_86e);
  label_847:
    bitGet(var_0, EBIT_E007F);
    bnz(var_0, label_84f);
    bitSet(EBIT_E007F);
    ref_84a = dialogAlloc();
    ref_84b = msgShow(msg_108);
/***************************************
EBIT[tab]E007F
「廃工場クリア・Baofu編入」
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_84b);
    dialogFree(ref_84a);
    b(label_86e);
  label_84f:
    bitGet(var_0, EBIT_E008C);
    bnz(var_0, label_857);
    bitSet(EBIT_E008C);
    ref_852 = dialogAlloc();
    ref_853 = msgShow(msg_109);
/***************************************
EBIT[tab]E008C
「海底遺跡クリア」
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_853);
    dialogFree(ref_852);
    b(label_86e);
  label_857:
    bitGet(var_0, EBIT_E009F);
    bnz(var_0, label_85f);
    bitSet(EBIT_E009F);
    ref_85a = dialogAlloc();
    ref_85b = msgShow(msg_110);
/***************************************
EBIT[tab]E009F
「岩戸山クリア・南条かエリー離脱・達哉編入」
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_85b);
    dialogFree(ref_85a);
    b(label_86e);
  label_85f:
    bitGet(var_0, EBIT_E00AF);
    bnz(var_0, label_867);
    bitSet(EBIT_E00AF);
    ref_862 = dialogAlloc();
    ref_863 = msgShow(msg_111);
/***************************************
EBIT[tab]E00AF
「アメノトリフネクリア」
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_863);
    dialogFree(ref_862);
    b(label_86e);
  label_867:
    bitGet(var_0, EBIT_E00B8);
    bnz(var_0, label_86e);
    bitSet(EBIT_E00B8);
    ref_86a = dialogAlloc();
    ref_86b = msgShow(msg_112);
/***************************************
EBIT[tab]E00B8
「珠「瑠城クリア」
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_86b);
    dialogFree(ref_86a);
  label_86e:
}

function DOORBOX()
{
    controlDisable();
    sndMusicPlay(sound_306b, 127);
    objAnimTranslate(obj_6, 80, 0, 0, 30);
    objAnimTranslate(obj_7, -80, 0, 0, 30);
    objAnimWait(obj_6);
    objAnimWait(obj_7);
    call(GOOUT);
}

function GOOUT()
{
    bitClear(MBIT_EXITBIT);
    mapLoad(rengedai, 0, 0);
}

function warp1()
{
    call(DOORBOX);
}

function HA_SHOP_EXPLAIN_0()
{
    ref_87c = dialogAlloc();
    ref_87d = msgShow(msg_113);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]Uhyohyohyo!
[tab]Okay, I’ll tell you a little about shopping.
[wait][clear][color(yellow)]Satomi Sister #5[color(white)]
[tab]First, buying things. 
[tab]If you select "Buy items" here
[tab]you can choose from our sundries.
[wait][clear][color(yellow)]Satomi Sister #5[color(white)]
[tab]Oh, and there’s a limit to how many of the
[tab]same item you can carry.
[wait][clear][color(yellow)]Satomi Sister #5[color(white)]
[tab]Next, selling.
[tab]Select "Sell items" first, and then
[tab]choose which type of item to sell. 
[wait][clear][color(yellow)]Satomi Sister #5[color(white)]
[tab]Then pick a particular item to sell us.
[tab]Our resale prices are around half the original
[tab]price. You can’t sell anything you have equipped,
[wait][clear][color(yellow)]Satomi Sister #5[color(white)]
[tab]and some special items are off-limits too.
[tab]That’s about it.
[tab]Uhyohyohyo!
[wait][clear]
***************************************/
    wait(ref_87d);
    dialogFree(ref_87c);
}

function BITOFFALL()
{
    bitClear(IBIT_BLK_MAP_13);
    bitClear(IBIT_BLK_MAP_29);
    bitClear(IBIT_CMP_MAP_13);
    bitClear(IBIT_CMP_MAP_29);
    bitClear(IBIT_BLK_MAP_11);
    bitClear(IBIT_BLK_MAP_2C);
    bitClear(IBIT_CMP_MAP_11);
    bitClear(IBIT_CMP_MAP_2C);
    bitClear(IBIT_BLK_MAP_0F);
    bitClear(IBIT_CMP_MAP_0F);
    bitClear(IBIT_BLK_MAP_0D);
    bitClear(IBIT_BLK_MAP_19);
    bitClear(IBIT_CMP_MAP_0D);
    bitClear(IBIT_CMP_MAP_19);
    bitClear(IBIT_BLK_MAP_0C);
    bitClear(IBIT_CMP_MAP_0C);
    bitClear(IBIT_BLK_MAP_0B);
    bitClear(IBIT_BLK_MAP_2A);
    bitClear(IBIT_CMP_MAP_0B);
    bitClear(IBIT_CMP_MAP_2A);
    bitClear(IBIT_BLK_MAP_09);
    bitClear(IBIT_CMP_MAP_09);
    bitClear(IBIT_BLK_MAP_08);
    bitClear(IBIT_CMP_MAP_08);
}

function MESHYOUJI()
{
    li(var_0, 0);
    bitGet(var_1, IBIT_BLK_MAP_13);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_BLK_MAP_29);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_CMP_MAP_13);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_CMP_MAP_29);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_BLK_MAP_11);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_BLK_MAP_2C);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_CMP_MAP_11);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_CMP_MAP_2C);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_BLK_MAP_0F);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_CMP_MAP_0F);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_BLK_MAP_0D);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_BLK_MAP_19);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_CMP_MAP_0D);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_CMP_MAP_19);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_BLK_MAP_0C);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_CMP_MAP_0C);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_BLK_MAP_0B);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_BLK_MAP_2A);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_CMP_MAP_0B);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_CMP_MAP_2A);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_BLK_MAP_09);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_CMP_MAP_09);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_BLK_MAP_08);
    add(var_0, var_0, var_1);
    bitGet(var_1, IBIT_CMP_MAP_08);
    add(var_0, var_0, var_1);
    bne(var_0, 0, label_8ce);
    bitClear(LBIT_0010);
    b(label_8d0);
  label_8ce:
    bitSet(LBIT_0010);
    b(label_8d0);
  label_8d0:
}

function TIZU()
{
    li(var_0, 0);
    li(var_1, 0);
    li(var_2, 0);
    bitGet(var_1, IBIT_BLK_MAP_13);
    bitGet(var_2, IBIT_BLK_MAP_29);
    add(var_0, var_1, var_2);
    bne(var_0, 0, label_8d9);
    b(label_8dd);
  label_8d9:
    msgVarSet(msgvar_1, 4179);
    msgVarSet(msgvar_2, 4201);
    b(label_913);
    b(label_8dd);
  label_8dd:
    li(var_0, 0);
    bitGet(var_1, IBIT_BLK_MAP_11);
    bitGet(var_2, IBIT_BLK_MAP_2C);
    add(var_0, var_1, var_2);
    bne(var_0, 0, label_8e3);
    b(label_8e7);
  label_8e3:
    msgVarSet(msgvar_1, 4177);
    msgVarSet(msgvar_2, 4204);
    b(label_913);
    b(label_8e7);
  label_8e7:
    bitGet(var_1, IBIT_BLK_MAP_0F);
    bne(var_1, 0, label_8ea);
    b(label_8ed);
  label_8ea:
    msgVarSet(msgvar_1, 4175);
    b(label_913);
    b(label_8ed);
  label_8ed:
    li(var_0, 0);
    bitGet(var_1, IBIT_BLK_MAP_0D);
    bitGet(var_2, IBIT_BLK_MAP_19);
    add(var_0, var_1, var_2);
    bne(var_0, 0, label_8f3);
    b(label_8f7);
  label_8f3:
    msgVarSet(msgvar_1, 4173);
    msgVarSet(msgvar_2, 4185);
    b(label_913);
    b(label_8f7);
  label_8f7:
    bitGet(var_1, IBIT_BLK_MAP_0C);
    bne(var_1, 0, label_8fa);
    b(label_8fd);
  label_8fa:
    msgVarSet(msgvar_1, 4172);
    b(label_913);
    b(label_8fd);
  label_8fd:
    li(var_0, 0);
    bitGet(var_1, IBIT_BLK_MAP_0B);
    bitGet(var_2, IBIT_BLK_MAP_2A);
    add(var_0, var_1, var_2);
    bne(var_0, 0, label_903);
    b(label_907);
  label_903:
    msgVarSet(msgvar_1, 4171);
    msgVarSet(msgvar_2, 4202);
    b(label_913);
    b(label_907);
  label_907:
    bitGet(var_1, IBIT_BLK_MAP_09);
    bne(var_1, 0, label_90a);
    b(label_90d);
  label_90a:
    msgVarSet(msgvar_1, 4169);
    b(label_913);
    b(label_90d);
  label_90d:
    bitGet(var_1, IBIT_BLK_MAP_08);
    bne(var_1, 0, label_910);
    b(label_913);
  label_910:
    msgVarSet(msgvar_1, 4168);
    b(label_913);
    b(label_913);
  label_913:
}

function TUGIDOKOIKU()
{
    bitGet(var_0, EBIT_E00B8);
    bne(var_0, 0, label_917);
    b(label_922);
  label_917:
    bne(var_0, 1, label_922);
    bitGet(var_0, MBIT_MEND_13);
    bne(var_0, 0, label_91d);
    bitSet(LBIT_0011);
    b(label_994);
    b(label_921);
  label_91d:
    bne(var_0, 1, label_921);
    bitSet(LBIT_0012);
    b(label_994);
    b(label_921);
  label_921:
    b(label_922);
  label_922:
    bitGet(var_0, EBIT_E00AF);
    bne(var_0, 0, label_925);
    b(label_928);
  label_925:
    bne(var_0, 1, label_928);
    b(label_994);
    b(label_928);
  label_928:
    bitGet(var_0, EBIT_E009F);
    bne(var_0, 0, label_92b);
    b(label_936);
  label_92b:
    bne(var_0, 1, label_936);
    bitGet(var_0, MBIT_MEND_11);
    bne(var_0, 0, label_931);
    bitSet(LBIT_0011);
    b(label_994);
    b(label_935);
  label_931:
    bne(var_0, 1, label_935);
    bitSet(LBIT_0012);
    b(label_994);
    b(label_935);
  label_935:
    b(label_936);
  label_936:
    bitGet(var_0, EBIT_E008F);
    bne(var_0, 0, label_939);
    b(label_944);
  label_939:
    bne(var_0, 1, label_944);
    bitGet(var_0, MBIT_MEND_0F);
    bne(var_0, 0, label_93f);
    bitSet(LBIT_0011);
    b(label_994);
    b(label_943);
  label_93f:
    bne(var_0, 1, label_943);
    bitSet(LBIT_0012);
    b(label_994);
    b(label_943);
  label_943:
    b(label_944);
  label_944:
    bitGet(var_0, EBIT_E008C);
    bne(var_0, 0, label_947);
    b(label_94a);
  label_947:
    bne(var_0, 1, label_94a);
    b(label_994);
    b(label_94a);
  label_94a:
    bitGet(var_0, EBIT_E007F);
    bne(var_0, 0, label_94d);
    b(label_958);
  label_94d:
    bne(var_0, 1, label_958);
    bitGet(var_0, MBIT_MEND_0D);
    bne(var_0, 0, label_953);
    bitSet(LBIT_0011);
    b(label_994);
    b(label_957);
  label_953:
    bne(var_0, 1, label_957);
    bitSet(LBIT_0012);
    b(label_994);
    b(label_957);
  label_957:
    b(label_958);
  label_958:
    bitGet(var_0, EBIT_E007B);
    bne(var_0, 0, label_95b);
    b(label_966);
  label_95b:
    bne(var_0, 1, label_966);
    bitGet(var_0, MBIT_MEND_0C);
    bne(var_0, 0, label_961);
    bitSet(LBIT_0011);
    b(label_994);
    b(label_965);
  label_961:
    bne(var_0, 1, label_965);
    bitSet(LBIT_0012);
    b(label_994);
    b(label_965);
  label_965:
    b(label_966);
  label_966:
    bitGet(var_0, EBIT_E0077);
    bne(var_0, 0, label_969);
    b(label_96c);
  label_969:
    bne(var_0, 1, label_96c);
    b(label_994);
    b(label_96c);
  label_96c:
    bitGet(var_0, EBIT_E006F);
    bne(var_0, 0, label_96f);
    b(label_97a);
  label_96f:
    bne(var_0, 1, label_97a);
    bitGet(var_0, MBIT_MEND_0B);
    bne(var_0, 0, label_975);
    bitSet(LBIT_0011);
    b(label_994);
    b(label_979);
  label_975:
    bne(var_0, 1, label_979);
    bitSet(LBIT_0012);
    b(label_994);
    b(label_979);
  label_979:
    b(label_97a);
  label_97a:
    bitGet(var_0, MBIT_HI_ERITOUJO);
    bne(var_0, 0, label_97d);
    b(label_988);
  label_97d:
    bne(var_0, 1, label_988);
    bitGet(var_0, MBIT_MEND_09);
    bne(var_0, 0, label_983);
    bitSet(LBIT_0011);
    b(label_994);
    b(label_987);
  label_983:
    bne(var_0, 1, label_987);
    bitSet(LBIT_0012);
    b(label_994);
    b(label_987);
  label_987:
    b(label_988);
  label_988:
    bitGet(var_0, MBIT_HI_NANJOTOUJO);
    bne(var_0, 0, label_98b);
    b(label_994);
  label_98b:
    bne(var_0, 1, label_994);
    bitGet(var_0, MBIT_MEND_08);
    bne(var_0, 0, label_990);
    bitSet(LBIT_0011);
    b(label_993);
  label_990:
    bne(var_0, 1, label_993);
    bitSet(LBIT_0012);
    b(label_993);
  label_993:
    b(label_994);
  label_994:
}

function TOUHACHECK()
{
    li(var_0, 0);
    bitGet(var_1, MBIT_OK_MAP_13);
    bitGet(var_2, MBIT_OK_MAP_29);
    add(var_0, var_1, var_2);
    bne(var_0, 2, label_9a5);
    bitGet(var_0, MBIT_MEND_13);
    bne(var_0, 0, label_9a1);
    bitSet(MBIT_MAP_NOHAKUSI);
    bitSet(IBIT_CMP_MAP_13);
    bitSet(IBIT_CMP_MAP_29);
    b(label_a11);
    b(label_9a4);
  label_9a1:
    bne(var_0, 1, label_9a4);
    b(label_a11);
    b(label_9a4);
  label_9a4:
    b(label_9a6);
  label_9a5:
    b(label_9a6);
  label_9a6:
    li(var_0, 0);
    bitGet(var_1, MBIT_OK_MAP_11);
    bitGet(var_2, MBIT_OK_MAP_2C);
    add(var_0, var_1, var_2);
    bne(var_0, 2, label_9b6);
    bitGet(var_0, MBIT_MEND_11);
    bne(var_0, 0, label_9b2);
    bitSet(MBIT_MAP_NOHAKUSI);
    bitSet(IBIT_CMP_MAP_11);
    bitSet(IBIT_CMP_MAP_2C);
    b(label_a11);
    b(label_9b5);
  label_9b2:
    bne(var_0, 1, label_9b5);
    b(label_a11);
    b(label_9b5);
  label_9b5:
    b(label_9b7);
  label_9b6:
    b(label_9b7);
  label_9b7:
    bitGet(var_0, MBIT_OK_MAP_0F);
    bne(var_0, 0, label_9ba);
    b(label_9c5);
  label_9ba:
    bne(var_0, 1, label_9c5);
    bitGet(var_0, MBIT_MEND_0F);
    bne(var_0, 0, label_9c1);
    bitSet(MBIT_MAP_NOHAKUSI);
    bitSet(IBIT_CMP_MAP_0F);
    b(label_a11);
    b(label_9c4);
  label_9c1:
    bne(var_0, 1, label_9c4);
    b(label_a11);
    b(label_9c4);
  label_9c4:
    b(label_9c5);
  label_9c5:
    li(var_0, 0);
    bitGet(var_1, MBIT_OK_MAP_0D);
    bitGet(var_2, MBIT_OK_MAP_19);
    add(var_0, var_1, var_2);
    bne(var_0, 2, label_9d5);
    bitGet(var_0, MBIT_MEND_0D);
    bne(var_0, 0, label_9d1);
    bitSet(MBIT_MAP_NOHAKUSI);
    bitSet(IBIT_CMP_MAP_0D);
    bitSet(IBIT_CMP_MAP_19);
    b(label_a11);
    b(label_9d4);
  label_9d1:
    bne(var_0, 1, label_9d4);
    b(label_a11);
    b(label_9d4);
  label_9d4:
    b(label_9d6);
  label_9d5:
    b(label_9d6);
  label_9d6:
    bitGet(var_0, MBIT_OK_MAP_0C);
    bne(var_0, 0, label_9d9);
    b(label_9e4);
  label_9d9:
    bne(var_0, 1, label_9e4);
    bitGet(var_0, MBIT_MEND_0C);
    bne(var_0, 0, label_9e0);
    bitSet(MBIT_MAP_NOHAKUSI);
    bitSet(IBIT_CMP_MAP_0C);
    b(label_a11);
    b(label_9e3);
  label_9e0:
    bne(var_0, 1, label_9e3);
    b(label_a11);
    b(label_9e3);
  label_9e3:
    b(label_9e4);
  label_9e4:
    li(var_0, 0);
    bitGet(var_1, MBIT_OK_MAP_0B);
    bitGet(var_2, MBIT_OK_MAP_2A);
    add(var_0, var_1, var_2);
    bne(var_0, 2, label_9f4);
    bitGet(var_0, MBIT_MEND_0B);
    bne(var_0, 0, label_9f0);
    bitSet(MBIT_MAP_NOHAKUSI);
    bitSet(IBIT_CMP_MAP_0B);
    bitSet(IBIT_CMP_MAP_2A);
    b(label_a11);
    b(label_9f3);
  label_9f0:
    bne(var_0, 1, label_9f3);
    b(label_a11);
    b(label_9f3);
  label_9f3:
    b(label_9f5);
  label_9f4:
    b(label_9f5);
  label_9f5:
    bitGet(var_0, MBIT_OK_MAP_09);
    bne(var_0, 0, label_9f8);
    b(label_a03);
  label_9f8:
    bne(var_0, 1, label_a03);
    bitGet(var_0, MBIT_MEND_09);
    bne(var_0, 0, label_9ff);
    bitSet(MBIT_MAP_NOHAKUSI);
    bitSet(IBIT_CMP_MAP_09);
    b(label_a11);
    b(label_a02);
  label_9ff:
    bne(var_0, 1, label_a02);
    b(label_a11);
    b(label_a02);
  label_a02:
    b(label_a03);
  label_a03:
    bitGet(var_0, MBIT_OK_MAP_08);
    bne(var_0, 0, label_a06);
    b(label_a11);
  label_a06:
    bne(var_0, 1, label_a11);
    bitGet(var_0, MBIT_MEND_08);
    bne(var_0, 0, label_a0d);
    bitSet(MBIT_MAP_NOHAKUSI);
    bitSet(IBIT_CMP_MAP_08);
    b(label_a11);
    b(label_a10);
  label_a0d:
    bne(var_0, 1, label_a10);
    b(label_a11);
    b(label_a10);
  label_a10:
    b(label_a11);
  label_a11:
}

function RNDCHECK()
{
    rand(var_0, 15);
    bne(var_0, 0, label_a16);
    partyItemAdd(healing_card, 1);
    b(label_a42);
  label_a16:
    bne(var_0, 1, label_a19);
    partyItemAdd(holylight_card, 1);
    b(label_a42);
  label_a19:
    bne(var_0, 2, label_a1c);
    partyItemAdd(attack mirror_card, 1);
    b(label_a42);
  label_a1c:
    bne(var_0, 3, label_a1f);
    partyItemAdd(blessing_card, 1);
    b(label_a42);
  label_a1f:
    bne(var_0, 4, label_a22);
    partyItemAdd(sacrifice_card, 1);
    b(label_a42);
  label_a22:
    bne(var_0, 5, label_a25);
    partyItemAdd(magic mirror_card, 1);
    b(label_a42);
  label_a25:
    bne(var_0, 6, label_a28);
    partyItemAdd(inferno_card, 1);
    b(label_a42);
  label_a28:
    bne(var_0, 7, label_a2b);
    partyItemAdd(torrent_card, 1);
    b(label_a42);
  label_a2b:
    bne(var_0, 8, label_a2e);
    partyItemAdd(gale_card, 1);
    b(label_a42);
  label_a2e:
    bne(var_0, 9, label_a31);
    partyItemAdd(quake_card, 1);
    b(label_a42);
  label_a31:
    bne(var_0, 10, label_a34);
    partyItemAdd(frigid_card, 1);
    b(label_a42);
  label_a34:
    bne(var_0, 11, label_a37);
    partyItemAdd(thunderbolt_card, 1);
    b(label_a42);
  label_a37:
    bne(var_0, 12, label_a3a);
    partyItemAdd(scorching_card, 1);
    b(label_a42);
  label_a3a:
    bne(var_0, 13, label_a3d);
    partyItemAdd(wavelength_card, 1);
    b(label_a42);
  label_a3d:
    bne(var_0, 14, label_a40);
    partyItemAdd(pressure_card, 1);
    b(label_a42);
  label_a40:
    partyItemAdd(nuclear_card, 1);
    b(label_a42);
  label_a42:
}

function BARTEN()
{
  label_a43:
    unitAnimationPlay(shopkeeper, animation_28, 1);
    bitGet(var_0, LBIT_0005);
    bne(var_0, 0, label_a64);
    delayClear();
    delayWait(180);
    bitGet(var_0, LBIT_0005);
    bne(var_0, 0, label_a61);
    unitIdleOn(shopkeeper);
    bitGet(var_0, LBIT_0005);
    bne(var_0, 0, label_a5e);
    delayClear();
    delayWait(900);
    bitGet(var_0, LBIT_0005);
    bne(var_0, 0, label_a5b);
    unitIdleOff(shopkeeper);
    bitGet(var_0, LBIT_0005);
    bne(var_0, 0, label_a58);
    delayClear();
    delayWait(60);
    b(label_a43);
    b(label_a5a);
  label_a58:
    bne(var_0, 1, label_a5a);
    b(label_a5a);
  label_a5a:
    b(label_a5d);
  label_a5b:
    bne(var_0, 1, label_a5d);
    b(label_a5d);
  label_a5d:
    b(label_a60);
  label_a5e:
    bne(var_0, 1, label_a60);
    b(label_a60);
  label_a60:
    b(label_a63);
  label_a61:
    bne(var_0, 1, label_a63);
    b(label_a63);
  label_a63:
    b(label_a66);
  label_a64:
    bne(var_0, 1, label_a66);
    b(label_a66);
  label_a66:
}

function NOITEM()
{
    unitFacePlayer(shopkeeper);
    ref_a68 = bustupLoad(bustup_fd);
    bustupWait(ref_a68);
    ref_a6a = bustupAlloc(ref_a68, right, rgb(0,0,0));
    bustupFade(ref_a6a, rgb(128,0,0), 30);
    ref_a6c = dialogAlloc();
    ref_a6d = msgShow(msg_114);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]Oh, but you don’t have anything you can sell.[wait][clear]
***************************************/
    wait(ref_a6d);
    dialogFree(ref_a6c);
    ref_a70 = bustupFade(ref_a6a, rgb(0,0,0), 10);
    bustupWait(ref_a70);
    bustupFree(ref_a6a);
    li(var_5, 20);
}

function DECIDE_BUY()
{
    msgVar_Number(msgvar_0, var_6);
    unitFacePlayer(shopkeeper);
    ref_a77 = bustupLoad(bustup_fd);
    bustupWait(ref_a77);
    ref_a79 = bustupAlloc(ref_a77, left, rgb(0,0,0));
    bustupFade(ref_a79, rgb(128,0,0), 30);
    ref_a7b = dialogAlloc();
    choiceSetResult(1);
    op_105(1);
    ref_a7e = msgShow(msg_115);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]The total comes to ¥[var(msg_var_0)].
[tab]Is that all right?
[choice(2)]Yes
No
[end_choice][clear]
***************************************/
    wait(ref_a7e);
    choiceGetResult(var_7);
    bne(var_7, 0, label_a85);
    sndMusicPlay(sound_3037, 127);
    li(var_7, 1);
    b(label_a88);
  label_a85:
    bne(var_7, 1, label_a88);
    li(var_7, 0);
    b(label_a88);
  label_a88:
    wait(ref_a7e);
    dialogFree(ref_a7b);
    ref_a8a = bustupFade(ref_a79, rgb(0,0,0), 10);
    bustupWait(ref_a8a);
    bustupFree(ref_a79);
    li(var_5, 20);
}

function DECIDE_SELL()
{
    choiceSetResult(1);
    op_105(1);
    msgVar_Number(msgvar_0, var_6);
    unitFacePlayer(shopkeeper);
    ref_a93 = bustupLoad(bustup_fd);
    bustupWait(ref_a93);
    ref_a95 = bustupAlloc(ref_a93, left, rgb(0,0,0));
    bustupFade(ref_a95, rgb(128,0,0), 30);
    ref_a97 = dialogAlloc();
    choiceSetResult(1);
    op_105(1);
    ref_a9a = msgShow(msg_116);
/***************************************
[color(yellow)]Satomi Sister #5[color(white)]
[tab]The total comes to ¥[var(msg_var_0)].
[tab]Is that all right?
[choice(2)]Yes
No
[end_choice][clear]
***************************************/
    wait(ref_a9a);
    choiceGetResult(var_7);
    bne(var_7, 0, label_aa1);
    sndMusicPlay(sound_3037, 127);
    li(var_7, 1);
    b(label_aa4);
  label_aa1:
    bne(var_7, 1, label_aa4);
    li(var_7, 0);
    b(label_aa4);
  label_aa4:
    wait(ref_a9a);
    ref_aa5 = bustupFade(ref_a95, rgb(0,0,0), 10);
    bustupWait(ref_aa5);
    bustupFree(ref_a95);
    dialogFree(ref_a97);
    li(var_5, 20);
}
