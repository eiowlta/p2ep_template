function START()
{
    screenEffectInit();
    screenFade(160, 120, rgb(255,255,255), rgb(255,255,255), sub);
    sndMusicPlay(sound_304a, 127);
    levelFootstepSet(sfx_16);
    envTriggerSet(DOORBOX, 131, 1, line, coll_f);
    bitGet(var_0, MBIT_TOA_HATURAITEN);
    bnz(var_0, label_9);
    cameraSet(southwest, 395, 0, -1145);
    b(label_a);
  label_9:
    cameraSet(northeast, 660, 0, -235);
  label_a:
    li(var_0, 0);
    li(var_1, 0);
    partyMemberCheck(var_0, ulala);
    add(var_1, var_1, var_0);
    partyMemberCheck(var_0, katsuya);
    add(var_1, var_1, var_0);
    partyMemberCheck(var_0, baofu);
    add(var_1, var_1, var_0);
    partyMemberCheck(var_0, nanjo);
    add(var_1, var_1, var_0);
    partyMemberCheck(var_0, elly);
    add(var_1, var_1, var_0);
    boutrange(var_1, 0, 4, label_19);
    li(var_0, 0);
    b(label_1e);
  label_19:
    ref_19 = dialogAlloc();
    ref_1a = msgShow(msg_0);
/***************************************
More than four in the party.
Hang time!
[wait][clear]
***************************************/
    wait(ref_1a);
    dialogFree(ref_19);
    b(label_1e);
  label_1e:
    bitGet(var_0, EBIT_E0046);
    bez(var_0, label_46);
    partyMemberCheck(var_0, ulala);
    bez(var_0, label_26);
    ref_22 = spriteLoad(sprite_6);
    wait(ref_22);
    unitSpawn(ulala, sprite_6, 650, 0, -750, west, none);
    unitTriggerSet(ulala, B_URARATI, 255, 1);
  label_26:
    partyMemberCheck(var_0, katsuya);
    bez(var_0, label_2c);
    ref_28 = spriteLoad(sprite_d);
    wait(ref_28);
    unitSpawn(katsuya, sprite_d, 860, 0, -255, north, none);
    unitTriggerSet(katsuya, B_KATUYYY, 255, 1);
  label_2c:
    partyMemberCheck(var_0, baofu);
    bez(var_0, label_32);
    ref_2e = spriteLoad(sprite_13);
    wait(ref_2e);
    unitSpawn(baofu, sprite_13, 560, 0, -1145, south, none);
    unitTriggerSet(baofu, B_PAO, 255, 1);
  label_32:
    partyMemberCheck(var_0, nanjo);
    bez(var_0, label_38);
    ref_34 = spriteLoad(sprite_1f);
    wait(ref_34);
    unitSpawn(nanjo, sprite_1f, 350, 0, -800, east, none);
    unitTriggerSet(nanjo, B_NANJ, 255, 1);
  label_38:
    partyMemberCheck(var_0, elly);
    bez(var_0, label_3e);
    ref_3a = spriteLoad(sprite_23);
    wait(ref_3a);
    unitSpawn(elly, sprite_23, 650, 0, -845, west, none);
    unitTriggerSet(elly, B_ERI, 255, 1);
  label_3e:
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_45);
    ref_40 = spriteLoad(sprite_c5);
    wait(ref_40);
    unitSpawn(unit_59, sprite_c5, 350, 0, -570, east, none);
    unitPalette(unit_59, 1);
    unitTriggerSet(unit_59, MAEMUKI, 255, 1);
  label_45:
    b(label_7b);
  label_46:
    bitGet(var_0, EBIT_E003E);
    bnz(var_0, label_62);
    bitGet(var_0, EBIT_E0038);
    bez(var_0, label_62);
    partyMemberCheck(var_0, katsuya);
    bez(var_0, label_50);
    ref_4c = spriteLoad(sprite_d);
    wait(ref_4c);
    unitSpawn(katsuya, sprite_d, 350, 0, -570, west, none);
    unitTriggerSet(katsuya, B_KATUYYY, 255, 1);
  label_50:
    partyMemberCheck(var_0, baofu);
    bez(var_0, label_56);
    ref_52 = spriteLoad(sprite_13);
    wait(ref_52);
    unitSpawn(baofu, sprite_13, 650, 0, -750, east, none);
    unitTriggerSet(baofu, B_PAO, 255, 1);
  label_56:
    ref_56 = spriteLoad(sprite_6a);
    wait(ref_56);
    unitSpawn(makimura, sprite_6a, 650, 0, -845, east, none);
    unitTriggerSet(makimura, B_PAO, 255, 1);
    bitGet(var_0, EBIT_E0043);
    bnz(var_0, label_61);
    ref_5c = spriteLoad(sprite_bc);
    wait(ref_5c);
    unitSpawn(npc1, sprite_bc, 350, 0, -845, north, none);
    unitPalette(npc1, 2);
    unitTriggerSet(npc1, YMAN, 255, 1);
  label_61:
    b(label_7b);
  label_62:
    partyMemberCheck(var_0, ulala);
    bez(var_0, label_68);
    ref_64 = spriteLoad(sprite_6);
    wait(ref_64);
    unitSpawn(ulala, sprite_6, 650, 0, -750, west, none);
    unitTriggerSet(ulala, B_URARATI, 255, 1);
  label_68:
    partyMemberCheck(var_0, katsuya);
    bez(var_0, label_6e);
    ref_6a = spriteLoad(sprite_d);
    wait(ref_6a);
    unitSpawn(katsuya, sprite_d, 860, 0, -255, north, none);
    unitTriggerSet(katsuya, B_KATUYYY, 255, 1);
  label_6e:
    partyMemberCheck(var_0, baofu);
    bez(var_0, label_74);
    ref_70 = spriteLoad(sprite_13);
    wait(ref_70);
    unitSpawn(baofu, sprite_13, 560, 0, -1145, south, none);
    unitTriggerSet(baofu, B_PAO, 255, 1);
  label_74:
    bitGet(var_0, EBIT_E0043);
    bnz(var_0, label_7b);
    ref_76 = spriteLoad(sprite_bc);
    wait(ref_76);
    unitSpawn(npc1, sprite_bc, 350, 0, -845, north, none);
    unitPalette(npc1, 2);
    unitTriggerSet(npc1, YMAN, 255, 1);
  label_7b:
    ref_7b = spriteLoad(sprite_91);
    wait(ref_7b);
    unitSpawn(shopkeeper, sprite_91, 645, 0, -60, north, none);
    envTriggerSet(SHOP, 224, 1, line, coll_0);
    envTriggerSet(SHOP, 56, 1, line, coll_1);
    ref_80 = spriteLoad(sprite_bf);
    wait(ref_80);
    unitSpawn(unit_58, sprite_bf, 250, 0, -150, west, none);
    unitPalette(unit_58, 2);
    unitTriggerSet(unit_58, HENNAW, 255, 1);
    ref_85 = spriteLoad(sprite_0);
    wait(ref_85);
    ref_87 = spriteLoad(sprite_2);
    wait(ref_87);
    playerInit(south);
    controlDisable();
    screenEffectUnknown();
    screenFadeInner(rgb(0,0,0), 6, true);
    screenFadeOuter(rgb(0,0,0), 6, true);
    unitIdleOnAll();
    screenFadeWait(inner);
    screenFadeWait(outer);
    controlEnable();
}

function B_URARATI()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_b8);
    bitGet(var_0, EBIT_E0046);
    bnz(var_0, label_a8);
    unitFacePlayer(ulala);
    ref_99 = bustupLoad(bustup_17);
    bustupWait(ref_99);
    ref_9b = bustupAlloc(ref_99, left, rgb(0,0,0));
    bustupFade(ref_9b, rgb(128,0,0), 30);
    ref_9d = dialogAlloc();
    ref_9e = msgShow(msg_1);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]You shouldn’t trust men so easily.
[tab]Be careful, Ma-ya. Men are wolves!
[tab]It’ll be too late after you get hurt.
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_25, 1);
    wait(ref_9e);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_9d);
    ref_a3 = bustupFade(ref_9b, rgb(0,0,0), 10);
    bustupWait(ref_a3);
    bustupFree(ref_9b);
    unitRestoreFacing(ulala);
    b(label_c8);
  label_a8:
    unitFacePlayer(ulala);
    ref_a9 = bustupLoad(bustup_1f);
    bustupWait(ref_a9);
    ref_ab = bustupAlloc(ref_a9, left, rgb(0,0,0));
    bustupFade(ref_ab, rgb(128,0,0), 30);
    ref_ad = dialogAlloc();
    ref_ae = msgShow(msg_2);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]That Nanjo-kun is really something.
[tab]He’s younger than me and he has
[tab]so many lackeys? ...Wow.
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_1d, 1);
    wait(ref_ae);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_ad);
    ref_b3 = bustupFade(ref_ab, rgb(0,0,0), 10);
    bustupWait(ref_b3);
    bustupFree(ref_ab);
    unitRestoreFacing(ulala);
    b(label_c8);
  label_b8:
    unitFacePlayer(ulala);
    ref_b9 = bustupLoad(bustup_17);
    bustupWait(ref_b9);
    ref_bb = bustupAlloc(ref_b9, left, rgb(0,0,0));
    bustupFade(ref_bb, rgb(128,0,0), 30);
    ref_bd = dialogAlloc();
    ref_be = msgShow(msg_3);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]You know those dream diagnostics?
[tab]Isn’t it like you dream the opposite of
[tab]what’s in your heart? ...Or something.
[wait][clear]
***************************************/
    unitAnimationHold(ulala, animation_2d, -1);
    wait(ref_be);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_bd);
    ref_c3 = bustupFade(ref_bb, rgb(0,0,0), 10);
    bustupWait(ref_c3);
    bustupFree(ref_bb);
    unitRestoreFacing(ulala);
    b(label_c8);
  label_c8:
    controlEnable();
}

function B_KATUYYY()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_113);
    bitGet(var_0, EBIT_E0046);
    bnz(var_0, label_103);
    bitGet(var_0, EBIT_E003E);
    bnz(var_0, label_f3);
    bitGet(var_0, EBIT_E0038);
    bnz(var_0, label_e3);
    unitFacePlayer(katsuya);
    ref_d4 = bustupLoad(bustup_25);
    bustupWait(ref_d4);
    ref_d6 = bustupAlloc(ref_d4, left, rgb(0,0,0));
    bustupFade(ref_d6, rgb(128,0,0), 30);
    ref_d8 = dialogAlloc();
    ref_d9 = msgShow(msg_4);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]...Extremists?!
[tab]No, I shouldn’t suspect innocent citizens.
[tab]Shame on myself...
[wait][clear]
***************************************/
    unitAnimationHold(katsuya, animation_22, -1);
    wait(ref_d9);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_d8);
    ref_de = bustupFade(ref_d6, rgb(0,0,0), 10);
    bustupWait(ref_de);
    bustupFree(ref_d6);
    unitRestoreFacing(katsuya);
    b(label_123);
  label_e3:
    unitFacePlayer(katsuya);
    ref_e4 = bustupLoad(bustup_23);
    bustupWait(ref_e4);
    ref_e6 = bustupAlloc(ref_e4, left, rgb(0,0,0));
    bustupFade(ref_e6, rgb(128,0,0), 30);
    ref_e8 = dialogAlloc();
    ref_e9 = msgShow(msg_5);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]...I feel sad.
[tab]Makimura-kun, have you no conscience?
[tab]What you did was clearly a crime!!
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_2e, 1);
    wait(ref_e9);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_e8);
    ref_ee = bustupFade(ref_e6, rgb(0,0,0), 10);
    bustupWait(ref_ee);
    bustupFree(ref_e6);
    unitRestoreFacing(katsuya);
    b(label_123);
  label_f3:
    unitFacePlayer(katsuya);
    ref_f4 = bustupLoad(bustup_27);
    bustupWait(ref_f4);
    ref_f6 = bustupAlloc(ref_f4, left, rgb(0,0,0));
    bustupFade(ref_f6, rgb(128,0,0), 30);
    ref_f8 = dialogAlloc();
    ref_f9 = msgShow(msg_6);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]...Men are wolves.
[tab]I can’t deny that, but it’s unfortunate
[tab]that all men have to be labeled that way.
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_1a, 1);
    wait(ref_f9);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_f8);
    ref_fe = bustupFade(ref_f6, rgb(0,0,0), 10);
    bustupWait(ref_fe);
    bustupFree(ref_f6);
    unitRestoreFacing(katsuya);
    b(label_123);
  label_103:
    unitFacePlayer(katsuya);
    ref_104 = bustupLoad(bustup_21);
    bustupWait(ref_104);
    ref_106 = bustupAlloc(ref_104, left, rgb(0,0,0));
    bustupFade(ref_106, rgb(128,0,0), 30);
    ref_108 = dialogAlloc();
    ref_109 = msgShow(msg_7);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]Abducting people who’ve become Jokers...
[tab]Whatever their motives are, we cannot
[tab]let them do as they want.
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_2d, 1);
    wait(ref_109);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_108);
    ref_10e = bustupFade(ref_106, rgb(0,0,0), 10);
    bustupWait(ref_10e);
    bustupFree(ref_106);
    unitRestoreFacing(katsuya);
    b(label_123);
  label_113:
    unitFacePlayer(katsuya);
    ref_114 = bustupLoad(bustup_21);
    bustupWait(ref_114);
    ref_116 = bustupAlloc(ref_114, left, rgb(0,0,0));
    bustupFade(ref_116, rgb(128,0,0), 30);
    ref_118 = dialogAlloc();
    ref_119 = msgShow(msg_8);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]I had a dream once where many
[tab]incidents happened one after the other.
[tab]Could it have been a premonition?
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_1a, 1);
    wait(ref_119);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_118);
    ref_11e = bustupFade(ref_116, rgb(0,0,0), 10);
    bustupWait(ref_11e);
    bustupFree(ref_116);
    unitRestoreFacing(katsuya);
    b(label_123);
  label_123:
    controlEnable();
}

function B_PAO()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_18d);
    bitGet(var_0, EBIT_E0046);
    bnz(var_0, label_17d);
    bitGet(var_0, EBIT_E003E);
    bnz(var_0, label_16d);
    bitGet(var_0, EBIT_E0038);
    bnz(var_0, label_150);
    bitGet(var_0, EBIT_E0037);
    bnz(var_0, label_140);
    unitFacePlayer(baofu);
    ref_131 = bustupLoad(bustup_2d);
    bustupWait(ref_131);
    ref_133 = bustupAlloc(ref_131, left, rgb(0,0,0));
    bustupFade(ref_133, rgb(128,0,0), 30);
    ref_135 = dialogAlloc();
    ref_136 = msgShow(msg_9);
/***************************************
[color(yellow)]Kataoka[color(white)]
[tab]He should not be here. Deleted.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1d, 1);
    wait(ref_136);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_135);
    ref_13b = bustupFade(ref_133, rgb(0,0,0), 10);
    bustupWait(ref_13b);
    bustupFree(ref_133);
    unitRestoreFacing(baofu);
    b(label_19c);
  label_140:
    unitFacePlayer(baofu);
    ref_141 = bustupLoad(bustup_31);
    bustupWait(ref_141);
    ref_143 = bustupAlloc(ref_141, left, rgb(0,0,0));
    bustupFade(ref_143, rgb(128,0,0), 30);
    ref_145 = dialogAlloc();
    ref_146 = msgShow(msg_10);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]...Hey [suou], extremists
[tab]in this day and age?
[tab]What decade are you in, man?
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1d, 1);
    wait(ref_146);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_145);
    ref_14b = bustupFade(ref_143, rgb(0,0,0), 10);
    bustupWait(ref_14b);
    bustupFree(ref_143);
    unitRestoreFacing(baofu);
    b(label_19c);
  label_150:
    ref_150 = bustupLoad(bustup_d4);
    bustupWait(ref_150);
    ref_152 = bustupAlloc(ref_150, right, rgb(0,0,0));
    bustupFade(ref_152, rgb(128,0,0), 30);
    ref_154 = dialogAlloc();
    ref_155 = msgShow(msg_11);
/***************************************
[color(yellow)]Makimura[color(white)]
[tab]There! Officer, look at that man!
[tab]See, see all men are like that.
[tab]You’re a man too, so you understand, right?
[wait][clear]
***************************************/
    unitAnimationPlay(makimura, animation_21, 1);
    wait(ref_155);
    unitAnimationPlay(makimura, animation_0, 1);
    dialogFree(ref_154);
    ref_15a = bustupFade(ref_152, rgb(0,0,0), 10);
    bustupWait(ref_15a);
    bustupFree(ref_152);
    delayClear();
    delayWait(15);
    ref_15f = bustupLoad(bustup_2d);
    bustupWait(ref_15f);
    ref_161 = bustupAlloc(ref_15f, left, rgb(0,0,0));
    bustupFade(ref_161, rgb(128,0,0), 30);
    ref_163 = dialogAlloc();
    ref_164 = msgShow(msg_12);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]Hey [suou],
[tab]This con artist is talking to you.
[tab]Do you know how this guy feels?
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1d, 1);
    wait(ref_164);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_163);
    ref_169 = bustupFade(ref_161, rgb(0,0,0), 10);
    bustupWait(ref_169);
    bustupFree(ref_161);
    b(label_19c);
  label_16d:
    unitFacePlayer(baofu);
    ref_16e = bustupLoad(bustup_31);
    bustupWait(ref_16e);
    ref_170 = bustupAlloc(ref_16e, left, rgb(0,0,0));
    bustupFade(ref_170, rgb(128,0,0), 30);
    ref_172 = dialogAlloc();
    ref_173 = msgShow(msg_13);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]Hey, Serizawa, aren’t you confused?
[tab]Don’t blame your foolishness on men.
[tab]...You understand right?
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1a, 1);
    wait(ref_173);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_172);
    ref_178 = bustupFade(ref_170, rgb(0,0,0), 10);
    bustupWait(ref_178);
    bustupFree(ref_170);
    unitRestoreFacing(baofu);
    b(label_19c);
  label_17d:
    unitFacePlayer(baofu);
    ref_17e = bustupLoad(bustup_31);
    bustupWait(ref_17e);
    ref_180 = bustupAlloc(ref_17e, left, rgb(0,0,0));
    bustupFade(ref_180, rgb(128,0,0), 30);
    ref_182 = dialogAlloc();
    ref_183 = msgShow(msg_14);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]I’m starting to think that the New World
[tab]Order really isn’t anything great if those
[tab]richies can find stuff on them.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1a, 1);
    wait(ref_183);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_182);
    ref_188 = bustupFade(ref_180, rgb(0,0,0), 10);
    bustupWait(ref_188);
    bustupFree(ref_180);
    unitRestoreFacing(baofu);
    b(label_19c);
  label_18d:
    unitFacePlayer(baofu);
    ref_18e = bustupLoad(bustup_2d);
    bustupWait(ref_18e);
    ref_190 = bustupAlloc(ref_18e, left, rgb(0,0,0));
    bustupFade(ref_190, rgb(128,0,0), 30);
    ref_192 = dialogAlloc();
    ref_193 = msgShow(msg_15);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab][suou] had a dream where the
[tab]police station was bombed. 
[tab]Maybe he wants to kill his boss?
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_2d, 1);
    wait(ref_193);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_192);
    ref_198 = bustupFade(ref_190, rgb(0,0,0), 10);
    bustupWait(ref_198);
    bustupFree(ref_190);
    unitRestoreFacing(baofu);
  label_19c:
    controlEnable();
}

function B_NANJ()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_1b1);
    unitFacePlayer(nanjo);
    ref_1a2 = bustupLoad(bustup_36);
    bustupWait(ref_1a2);
    ref_1a4 = bustupAlloc(ref_1a2, left, rgb(0,0,0));
    bustupFade(ref_1a4, rgb(128,0,0), 30);
    ref_1a6 = dialogAlloc();
    ref_1a7 = msgShow(msg_16);
/***************************************
[color(yellow)]Nanjo[color(white)]
[tab]Mr. Baofu, perhaps it is not wise to
[tab]judge the enemy so lightly?
[tab]Or are you judging me lightly?
[wait][clear]
***************************************/
    unitAnimationPlay(nanjo, animation_1a, 1);
    wait(ref_1a7);
    unitAnimationPlay(nanjo, animation_a, 1);
    dialogFree(ref_1a6);
    ref_1ac = bustupFade(ref_1a4, rgb(0,0,0), 10);
    bustupWait(ref_1ac);
    bustupFree(ref_1a4);
    unitRestoreFacing(nanjo);
    b(label_1c0);
  label_1b1:
    unitFacePlayer(nanjo);
    ref_1b2 = bustupLoad(bustup_36);
    bustupWait(ref_1b2);
    ref_1b4 = bustupAlloc(ref_1b2, left, rgb(0,0,0));
    bustupFade(ref_1b4, rgb(128,0,0), 30);
    ref_1b6 = dialogAlloc();
    ref_1b7 = msgShow(msg_17);
/***************************************
[color(yellow)]Nanjo[color(white)]
[tab]Dreams could reflect reality.
[tab]I have had dreams where the Satomi Tadashi
[tab]song was loved by everyone.
[wait][clear]
***************************************/
    unitAnimationPlay(nanjo, animation_2d, 1);
    wait(ref_1b7);
    unitAnimationPlay(nanjo, animation_a, 1);
    dialogFree(ref_1b6);
    ref_1bc = bustupFade(ref_1b4, rgb(0,0,0), 10);
    bustupWait(ref_1bc);
    bustupFree(ref_1b4);
    unitRestoreFacing(nanjo);
  label_1c0:
    controlEnable();
}

function B_ERI()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_1d5);
    unitFacePlayer(elly);
    ref_1c6 = bustupLoad(bustup_3e);
    bustupWait(ref_1c6);
    ref_1c8 = bustupAlloc(ref_1c6, left, rgb(0,0,0));
    bustupFade(ref_1c8, rgb(128,0,0), 30);
    ref_1ca = dialogAlloc();
    ref_1cb = msgShow(msg_18);
/***************************************
[color(yellow)]Elly[color(white)]
[tab]Mr. Baofu...
[tab]I don’t really care what you think,
[tab]but it’s pathetic to envy youth.
[wait][clear]
***************************************/
    unitAnimationPlay(elly, animation_2d, 1);
    wait(ref_1cb);
    unitAnimationPlay(elly, animation_a, 1);
    dialogFree(ref_1ca);
    ref_1d0 = bustupFade(ref_1c8, rgb(0,0,0), 10);
    bustupWait(ref_1d0);
    bustupFree(ref_1c8);
    unitRestoreFacing(elly);
    b(label_1e5);
  label_1d5:
    unitFacePlayer(elly);
    ref_1d6 = bustupLoad(bustup_3d);
    bustupWait(ref_1d6);
    ref_1d8 = bustupAlloc(ref_1d6, left, rgb(0,0,0));
    bustupFade(ref_1d8, rgb(128,0,0), 30);
    ref_1da = dialogAlloc();
    ref_1db = msgShow(msg_19);
/***************************************
[color(yellow)]Elly[color(white)]
[tab]It is true that dreams are related to
[tab]a person’s heart. But it’s something deep,
[tab]and mere simple feelings are not reflected.
[wait][clear]
***************************************/
    unitAnimationPlay(elly, animation_1a, 1);
    wait(ref_1db);
    unitAnimationPlay(elly, animation_a, 1);
    dialogFree(ref_1da);
    ref_1e0 = bustupFade(ref_1d8, rgb(0,0,0), 10);
    bustupWait(ref_1e0);
    bustupFree(ref_1d8);
    unitRestoreFacing(elly);
    b(label_1e5);
  label_1e5:
    controlEnable();
}

function B_TATU()
{
}

function YMAN()
{
    controlDisable();
    unitFacePlayer(npc1);
    ref_1ea = dialogAlloc();
    ref_1eb = msgShow(msg_20);
/***************************************
[color(yellow)]Young Man[color(white)]
[tab]Hey! I know you!
[tab]You’re from that magazine publisher, right?
[tab]Could you introduce me to a model?
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_27, 1);
    wait(ref_1eb);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_1ea);
    delayClear();
    delayWait(60);
    ref_1f2 = dialogAlloc();
    ref_1f3 = msgShow(msg_21);
/***************************************
[color(yellow)]Young Man[color(white)]
[tab]What the hell! Don’t you ignore me!
[tab]Damn it, everyone treats me like dirt!
[tab]...I’ll make you pay just like them!!
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_26, 1);
    wait(ref_1f3);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_1f2);
    unitRestoreFacing(npc1);
    b(label_1fa);
  label_1fa:
    controlEnable();
}

function MAEMUKI()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_1ff);
  label_1ff:
    unitFacePlayer(unit_59);
    ref_200 = dialogAlloc();
    ref_201 = msgShow(msg_22);
/***************************************
[color(yellow)]Positive Woman[color(white)]
[tab]"Let’s think positive!"...
[tab]Aren’t they wonderful words? Aren’t they?
[tab]These words’ll change the world! Won’t they?
[wait][clear]
***************************************/
    unitAnimationHold(unit_59, animation_13, -1);
    wait(ref_201);
    unitAnimationPlay(unit_59, animation_0, 1);
    dialogFree(ref_200);
    unitRestoreFacing(unit_59);
    b(label_208);
  label_208:
    controlEnable();
}

function HENNAW()
{
    controlDisable();
    bitGet(var_0, MBIT_KE_TOA);
    bez(var_0, label_219);
    bitGet(var_0, MBIT_TOA_MIHA);
    bne(var_0, 0, label_217);
    bitGet(var_0, MBIT_HI_TOAARM);
    bne(var_0, 0, label_213);
    b(label_23c);
    b(label_216);
  label_213:
    bne(var_0, 1, label_216);
    b(label_246);
    b(label_216);
  label_216:
    b(label_219);
  label_217:
    bne(var_0, 1, label_219);
    b(label_219);
  label_219:
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_233);
    bitGet(var_0, EBIT_E0043);
    bnz(var_0, label_226);
    unitFacePlayer(unit_58);
    ref_21e = dialogAlloc();
    ref_21f = msgShow(msg_23);
/***************************************
[color(yellow)]Strange Woman[color(white)]
[tab]Oh, gross!
[tab]Why do I have to be hit on by a
[tab]creep like that? I wish I was a man...
[wait][clear]
***************************************/
    unitAnimationPlay(unit_58, animation_24, 1);
    wait(ref_21f);
    unitAnimationPlay(unit_58, animation_0, 1);
    dialogFree(ref_21e);
    unitRestoreFacing(unit_58);
    b(label_250);
  label_226:
    unitFacePlayer(unit_58);
    ref_227 = dialogAlloc();
    ref_228 = msgShow(msg_24);
/***************************************
[color(yellow)]Strange Woman[color(white)]
[tab]That creep all of a sudden went crazy.
[tab]I’m so glad those people came...
[tab]They shouldn’t let those people loose.
[wait][clear]
***************************************/
    unitAnimationPlay(unit_58, animation_24, 1);
    wait(ref_228);
    unitAnimationPlay(unit_58, animation_0, 1);
    ref_22c = msgShow(msg_25);
/***************************************
[color(yellow)]Strange Woman[color(white)]
[tab]Who were those people anyway?
[tab]...They must’ve been the police!
[tab]Good, they must have took him away!
[wait][clear]
***************************************/
    unitAnimationPlay(unit_58, animation_19, 1);
    wait(ref_22c);
    unitAnimationPlay(unit_58, animation_0, 1);
    dialogFree(ref_227);
    unitRestoreFacing(unit_58);
    b(label_250);
  label_233:
    unitFacePlayer(unit_58);
    ref_234 = dialogAlloc();
    ref_235 = msgShow(msg_26);
/***************************************
[color(yellow)]Strange Woman[color(white)]
[tab]Why are men so unreliable?
[tab]I’m more fit to be a man than him!
[tab]Why do women fall for guys like that...
[wait][clear]
***************************************/
    unitAnimationPlay(unit_58, animation_25, 1);
    wait(ref_235);
    unitAnimationPlay(unit_58, animation_0, 1);
    dialogFree(ref_234);
    unitRestoreFacing(unit_58);
    b(label_250);
  label_23c:
    unitFacePlayer(unit_58);
    ref_23d = dialogAlloc();
    ref_23e = msgShow(msg_27);
/***************************************
[color(yellow)]Strange Woman[color(white)]
[tab]I’ve been hearing rumors about it, 
[tab]but the owner’s tastes have really changed.
[tab]He started selling really odd armor.
[wait][clear]
***************************************/
    unitAnimationPlay(unit_58, animation_19, 1);
    wait(ref_23e);
    unitAnimationPlay(unit_58, animation_0, 1);
    dialogFree(ref_23d);
    unitRestoreFacing(unit_58);
    bitSet(MBIT_TOA_MIHA);
    b(label_250);
  label_246:
    unitFacePlayer(unit_58);
    ref_247 = dialogAlloc();
    ref_248 = msgShow(msg_28);
/***************************************
[color(yellow)]Strange Woman[color(white)]
[tab]I’ve been hearing rumors about it, 
[tab]but the owner’s tastes have really changed.
[tab]He started selling really odd weapons.
[wait][clear]
***************************************/
    unitAnimationPlay(unit_58, animation_19, 1);
    wait(ref_248);
    unitAnimationPlay(unit_58, animation_0, 1);
    dialogFree(ref_247);
    unitRestoreFacing(unit_58);
    bitSet(MBIT_TOA_MIHA);
    b(label_250);
  label_250:
    controlEnable();
}

function SAGIBOX()
{
}

function SHOP()
{
    controlDisable();
    ref_254 = shopOverlayInit();
    unitFacePlayer(shopkeeper);
    bitGet(var_0, MBIT_AIS_37);
    bne(var_0, 0, label_26c);
    bitGet(var_0, MBIT_KE_TOA);
    bne(var_0, 0, label_25c);
    b(label_27b);
    b(label_26b);
  label_25c:
    bne(var_0, 1, label_26b);
    bitGet(var_0, MBIT_TOA_HENIHATU);
    bne(var_0, 0, label_267);
    bitGet(var_0, MBIT_TOA_HATURAITEN);
    bne(var_0, 0, label_263);
    b(label_28e);
    b(label_266);
  label_263:
    bne(var_0, 1, label_266);
    b(label_27e);
    b(label_266);
  label_266:
    b(label_26a);
  label_267:
    bne(var_0, 1, label_26a);
    b(label_27b);
    b(label_26a);
  label_26a:
    b(label_26b);
  label_26b:
    b(label_27b);
  label_26c:
    bne(var_0, 1, label_27b);
    bitGet(var_0, MBIT_KE_TOA);
    bne(var_0, 0, label_271);
    b(label_29e);
    b(label_27a);
  label_271:
    bne(var_0, 1, label_27a);
    bitGet(var_0, MBIT_TOA_HENIHATU);
    bne(var_0, 0, label_276);
    b(label_2ae);
    b(label_279);
  label_276:
    bne(var_0, 1, label_279);
    b(label_29e);
    b(label_279);
  label_279:
    b(label_27a);
  label_27a:
    b(label_27b);
  label_27b:
    wait(ref_254);
    shopRate(100);
    b(label_2be);
  label_27e:
    ref_27e = bustupLoad(bustup_ed);
    bustupWait(ref_27e);
    ref_280 = bustupAlloc(ref_27e, right, rgb(0,0,0));
    bustupFade(ref_280, rgb(128,0,0), 30);
    ref_282 = dialogAlloc();
    ref_283 = msgShow(msg_29);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]I’ve got new stuff.
[tab]It’s special... Go home if you’re not buying...
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_283);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_282);
    ref_288 = bustupFade(ref_280, rgb(0,0,0), 10);
    bustupWait(ref_288);
    bustupFree(ref_280);
    wait(ref_254);
    shopRate(100);
    b(label_2be);
  label_28e:
    ref_28e = bustupLoad(bustup_ed);
    bustupWait(ref_28e);
    ref_290 = bustupAlloc(ref_28e, right, rgb(0,0,0));
    bustupFade(ref_290, rgb(128,0,0), 30);
    ref_292 = dialogAlloc();
    ref_293 = msgShow(msg_30);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]First-time customers...
[tab]Do you want the special ones...?
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_293);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_292);
    ref_298 = bustupFade(ref_290, rgb(0,0,0), 10);
    bustupWait(ref_298);
    bustupFree(ref_290);
    wait(ref_254);
    shopRate(100);
    b(label_2be);
  label_29e:
    ref_29e = bustupLoad(bustup_ed);
    bustupWait(ref_29e);
    ref_2a0 = bustupAlloc(ref_29e, right, rgb(0,0,0));
    bustupFade(ref_2a0, rgb(128,0,0), 30);
    ref_2a2 = dialogAlloc();
    ref_2a3 = msgShow(msg_31);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]I’ll sell it to you cheap if you’re buying.
[tab]Only today though...
[tab]...tweettweettweet...
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_2a3);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_2a2);
    ref_2a8 = bustupFade(ref_2a0, rgb(0,0,0), 10);
    bustupWait(ref_2a8);
    bustupFree(ref_2a0);
    wait(ref_254);
    shopRate(80);
    b(label_2be);
  label_2ae:
    ref_2ae = bustupLoad(bustup_ed);
    bustupWait(ref_2ae);
    ref_2b0 = bustupAlloc(ref_2ae, right, rgb(0,0,0));
    bustupFade(ref_2b0, rgb(128,0,0), 30);
    ref_2b2 = dialogAlloc();
    ref_2b3 = msgShow(msg_32);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]I’ll sell it cheap, but only today...
[tab]I’ve got the special ones too...
[tab]...tweettweettweet...
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_2b3);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_2b2);
    ref_2b8 = bustupFade(ref_2b0, rgb(0,0,0), 10);
    bustupWait(ref_2b8);
    bustupFree(ref_2b0);
    wait(ref_254);
    shopRate(80);
    b(label_2be);
  label_2be:
    bitClear(LBIT_0000);
    bitGet(var_0, MBIT_KE_TOA);
    bne(var_0, 0, label_2c3);
    shopInventory(9, shopInventory_21);
    b(label_2e5);
  label_2c3:
    bne(var_0, 1, label_2e5);
    bitGet(var_0, MBIT_HI_TOAARM);
    bne(var_0, 0, label_2d4);
    bitGet(var_0, EBIT_E009F);
    bne(var_0, 0, label_2d0);
    bitGet(var_0, EBIT_E007A);
    bne(var_0, 0, label_2cc);
    shopInventory(9, shopInventory_17);
    b(label_2cf);
  label_2cc:
    bne(var_0, 1, label_2cf);
    shopInventory(9, shopInventory_18);
    b(label_2cf);
  label_2cf:
    b(label_2d3);
  label_2d0:
    bne(var_0, 1, label_2d3);
    shopInventory(9, shopInventory_19);
    b(label_2d3);
  label_2d3:
    b(label_2e4);
  label_2d4:
    bne(var_0, 1, label_2e4);
    bitSet(LBIT_0000);
    bitGet(var_0, EBIT_E009F);
    bne(var_0, 0, label_2e0);
    bitGet(var_0, EBIT_E007A);
    bne(var_0, 0, label_2dc);
    shopInventory(9, shopInventory_14);
    b(label_2df);
  label_2dc:
    bne(var_0, 1, label_2df);
    shopInventory(9, shopInventory_15);
    b(label_2df);
  label_2df:
    b(label_2e3);
  label_2e0:
    bne(var_0, 1, label_2e3);
    shopInventory(9, shopInventory_16);
    b(label_2e3);
  label_2e3:
    b(label_2e4);
  label_2e4:
    b(label_2e5);
  label_2e5:
    choiceSetResult(4);
    op_105(3);
    ref_2e7 = bustupLoad(bustup_ed);
    bustupWait(ref_2e7);
    ref_2e9 = bustupAlloc(ref_2e7, left, rgb(0,0,0));
    bustupFade(ref_2e9, rgb(128,0,0), 30);
    ref_2eb = dialogAlloc();
    ref_2ec = msgShow(msg_33);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]Yeah, what do you want?
[choice(6)][if_none(LBIT_0000)]Buy armor
[if_all(LBIT_0000)]Buy weapons
Sell items
Talk to Whistler
Never mind
Leave the store
[end_choice][clear]
***************************************/
    wait(ref_2ec);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_2f3);
    li(var_5, 0);
    b(label_31c);
  label_2f3:
    bne(var_0, 1, label_2f6);
    li(var_5, 0);
    b(label_31c);
  label_2f6:
    bne(var_0, 2, label_304);
    choiceSetResult(0);
    op_105(0);
    ref_2f9 = msgShow(msg_34);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]What have you got for me?
[choice(7)][dbl_tab][if_all(EBIT_SINARIOFF)]Hidden items
[dbl_tab]Sell items
[dbl_tab]Sell weapons
[dbl_tab][if_all(EBIT_SINARIOFF)]Sell helmets
[dbl_tab]Sell armor
[dbl_tab][if_all(EBIT_SINARIOFF)]Sell leggings
[dbl_tab]Sell accessories
[end_choice][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_2f9);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    choiceGetResult(var_5);
    bne(var_5, 0, label_301);
    li(var_5, 1000);
    b(label_303);
  label_301:
    add(var_5, var_5, 10);
    b(label_303);
  label_303:
    b(label_31c);
  label_304:
    bne(var_0, 3, label_316);
    choiceSetResult(2);
    op_105(2);
    ref_307 = msgShow(msg_35);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]What’s there to talk about?
[choice(3)]Make small talk
Ask about shopping
[if_all(EBIT_SINARIOFF)]Hidden items
[end_choice][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_307);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    choiceGetResult(var_0);
    bne(var_0, 0, label_30f);
    li(var_5, 2);
    b(label_315);
  label_30f:
    bne(var_0, 1, label_312);
    li(var_5, 2000);
    b(label_315);
  label_312:
    bne(var_0, 2, label_315);
    li(var_5, 1000);
    b(label_315);
  label_315:
    b(label_31c);
  label_316:
    bne(var_0, 4, label_319);
    li(var_5, 3);
    b(label_31c);
  label_319:
    bne(var_0, 5, label_31c);
    li(var_5, 4);
    b(label_31c);
  label_31c:
    dialogFree(ref_2eb);
    ref_31d = bustupFade(ref_2e9, rgb(0,0,0), 10);
    bustupWait(ref_31d);
    bustupFree(ref_2e9);
    ref_320 = shopOpen(10);
    wait(ref_320);
}

function HA_SHOP_RESTART_0()
{
    choiceSetResult(4);
    op_105(3);
    ref_325 = bustupLoad(bustup_ed);
    bustupWait(ref_325);
    ref_327 = bustupAlloc(ref_325, right, rgb(0,0,0));
    bustupFade(ref_327, rgb(128,0,0), 30);
    ref_329 = dialogAlloc();
    ref_32a = msgShow(msg_36);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]You still want something?
[choice(6)][if_none(LBIT_0000)]Buy armor
[if_all(LBIT_0000)]Buy weapons
Sell items
Talk to Whistler
Never mind
Leave the store
[end_choice][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_32a);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_333);
    li(var_5, 0);
    b(label_358);
  label_333:
    bne(var_0, 1, label_336);
    li(var_5, 0);
    b(label_358);
  label_336:
    bne(var_0, 2, label_342);
    choiceSetResult(0);
    op_105(0);
    ref_339 = msgShow(msg_37);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]What have you got for me?
[choice(7)][dbl_tab][if_all(EBIT_SINARIOFF)]Hidden items
[dbl_tab]Sell items
[dbl_tab]Sell weapons
[dbl_tab][if_all(EBIT_SINARIOFF)]Sell helmets
[dbl_tab]Sell armor
[dbl_tab][if_all(EBIT_SINARIOFF)]Sell leggings
[dbl_tab]Sell accessories
[end_choice][clear]
***************************************/
    wait(ref_339);
    choiceGetResult(var_5);
    bne(var_5, 0, label_33f);
    li(var_5, 1000);
    b(label_341);
  label_33f:
    add(var_5, var_5, 10);
    b(label_341);
  label_341:
    b(label_358);
  label_342:
    bne(var_0, 3, label_352);
    choiceSetResult(2);
    op_105(2);
    ref_345 = msgShow(msg_38);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]What’s there to talk about?
[choice(3)]Make small talk
Ask about shopping
[if_all(EBIT_SINARIOFF)]Hidden items
[end_choice][clear]
***************************************/
    wait(ref_345);
    choiceGetResult(var_0);
    bne(var_0, 0, label_34b);
    li(var_5, 2);
    b(label_351);
  label_34b:
    bne(var_0, 1, label_34e);
    li(var_5, 2000);
    b(label_351);
  label_34e:
    bne(var_0, 2, label_351);
    li(var_5, 1000);
    b(label_351);
  label_351:
    b(label_358);
  label_352:
    bne(var_0, 4, label_355);
    li(var_5, 3);
    b(label_358);
  label_355:
    bne(var_0, 5, label_358);
    li(var_5, 4);
    b(label_358);
  label_358:
    dialogFree(ref_329);
    ref_359 = bustupFade(ref_327, rgb(0,0,0), 10);
    bustupWait(ref_359);
    bustupFree(ref_327);
}

function HA_SHOP_TALK_0()
{
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_37d);
    bitGet(var_0, EBIT_E0043);
    bnz(var_0, label_36f);
    ref_361 = bustupLoad(bustup_ed);
    bustupWait(ref_361);
    ref_363 = bustupAlloc(ref_361, right, rgb(0,0,0));
    bustupFade(ref_363, rgb(128,0,0), 30);
    ref_365 = dialogAlloc();
    ref_366 = msgShow(msg_39);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]Go home if you’re window-shopping...
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_366);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_365);
    ref_36b = bustupFade(ref_363, rgb(0,0,0), 10);
    bustupWait(ref_36b);
    bustupFree(ref_363);
    b(label_38a);
  label_36f:
    ref_36f = bustupLoad(bustup_ed);
    bustupWait(ref_36f);
    ref_371 = bustupAlloc(ref_36f, right, rgb(0,0,0));
    bustupFade(ref_371, rgb(128,0,0), 30);
    ref_373 = dialogAlloc();
    ref_374 = msgShow(msg_40);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]...Abduction?
[tab]You have to protect your own ass...
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_374);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_373);
    ref_379 = bustupFade(ref_371, rgb(0,0,0), 10);
    bustupWait(ref_379);
    bustupFree(ref_371);
    b(label_38a);
  label_37d:
    ref_37d = bustupLoad(bustup_ed);
    bustupWait(ref_37d);
    ref_37f = bustupAlloc(ref_37d, right, rgb(0,0,0));
    bustupFade(ref_37f, rgb(128,0,0), 30);
    ref_381 = dialogAlloc();
    ref_382 = msgShow(msg_41);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]Buy something or go home...
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_382);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_381);
    ref_387 = bustupFade(ref_37f, rgb(0,0,0), 10);
    bustupWait(ref_387);
    bustupFree(ref_37f);
  label_38a:
}

function HA_SHOP_END_0()
{
    ref_38b = bustupLoad(bustup_ed);
    bustupWait(ref_38b);
    ref_38d = bustupAlloc(ref_38b, right, rgb(0,0,0));
    bustupFade(ref_38d, rgb(128,0,0), 30);
    ref_38f = dialogAlloc();
    ref_390 = msgShow(msg_42);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]Go home.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_390);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    shopOverlayInit();
    dialogFree(ref_38f);
    ref_396 = bustupFade(ref_38d, rgb(0,0,0), 10);
    bustupWait(ref_396);
    bustupFree(ref_38d);
    bitGet(var_0, MBIT_KE_TOA);
    bez(var_0, label_39c);
    bitSet(MBIT_TOA_HENIHATU);
  label_39c:
    bitSet(MBIT_TOA_HATURAITEN);
    bitGet(var_0, MBIT_EXITBIT);
    bne(var_0, 0, label_3a2);
    unitRestoreFacing(shopkeeper);
    controlEnable();
    b(label_3a5);
  label_3a2:
    bne(var_0, 1, label_3a5);
    call(GOOUT);
    b(label_3a5);
  label_3a5:
}

function TANA()
{
    bitGet(var_0, MBIT_KE_TOA);
    bnz(var_0, label_3ad);
    bitSet(MBIT_KE_TOA);
    ref_3a9 = dialogAlloc();
    ref_3aa = msgShow(msg_43);
/***************************************
MBIT[tab]KE[tab]TOA
東亜ディフェンス・販売物決定
(噂による変化)
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_3aa);
    dialogFree(ref_3a9);
  label_3ad:
}

function DORAMU()
{
    bitGet(var_0, MBIT_AIS_37);
    bnz(var_0, label_3b6);
    bitSet(MBIT_AIS_37);
    ref_3b1 = dialogAlloc();
    ref_3b2 = msgShow(msg_44);
/***************************************
MBIT[tab]AIS[tab]37
相性占いの
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_3b2);
    dialogFree(ref_3b1);
    b(label_3e6);
  label_3b6:
    bitGet(var_0, EBIT_E0037);
    bnz(var_0, label_3be);
    bitSet(EBIT_E0037);
    ref_3b9 = dialogAlloc();
    ref_3ba = msgShow(msg_45);
/***************************************
EBIT[tab]E0037
警察署[half_tab]受付、終了
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_3ba);
    dialogFree(ref_3b9);
    b(label_3e6);
  label_3be:
    bitGet(var_0, EBIT_E0038);
    bnz(var_0, label_3c6);
    bitSet(EBIT_E0038);
    ref_3c1 = dialogAlloc();
    ref_3c2 = msgShow(msg_46);
/***************************************
EBIT[tab]E0038
「詐欺男を確保」
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_3c2);
    dialogFree(ref_3c1);
    b(label_3e6);
  label_3c6:
    bitGet(var_0, EBIT_E003E);
    bnz(var_0, label_3ce);
    bitSet(EBIT_E003E);
    ref_3c9 = dialogAlloc();
    ref_3ca = msgShow(msg_47);
/***************************************
EBIT[tab]E003E
「ゴールドクリア」「Ulala編入」
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_3ca);
    dialogFree(ref_3c9);
    b(label_3e6);
  label_3ce:
    bitGet(var_0, EBIT_E0043);
    bnz(var_0, label_3d6);
    bitSet(EBIT_E0043);
    ref_3d1 = dialogAlloc();
    ref_3d2 = msgShow(msg_48);
/***************************************
EBIT[tab]E0043
「クラブクリア」
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_3d2);
    dialogFree(ref_3d1);
    b(label_3e6);
  label_3d6:
    bitGet(var_0, EBIT_E0046);
    bnz(var_0, label_3de);
    bitSet(EBIT_E0046);
    ref_3d9 = dialogAlloc();
    ref_3da = msgShow(msg_49);
/***************************************
EBIT[tab]E0046
「南条orエリー編入」
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_3da);
    dialogFree(ref_3d9);
    b(label_3e6);
  label_3de:
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_3e6);
    bitSet(EBIT_E006F);
    ref_3e1 = dialogAlloc();
    ref_3e2 = msgShow(msg_50);
/***************************************
EBIT[tab]E006F
「研究施設・TV局クリア」
びっとお~んッ!!
[wait][clear]
***************************************/
    wait(ref_3e2);
    dialogFree(ref_3e1);
    b(label_3e6);
  label_3e6:
}

function DOORBOX()
{
    controlDisable();
    sndMusicPlay(sound_306e, 127);
    objAnimRotate(obj_1, 0, -70, 0, 30, 0);
    objAnimRotate(obj_0, 0, 70, 0, 30, 0);
    objAnimWait(obj_1);
    objAnimWait(obj_0);
    call(GOOUT);
}

function GOOUT()
{
    bitClear(MBIT_EXITBIT);
    mapLoad(rengedai, 0, 0);
}

function warp1()
{
    call(DOORBOX);
}

function HA_SHOP_EXPLAIN_0()
{
    bitGet(var_0, MBIT_HI_TOAARM);
    bne(var_0, 0, label_3fb);
    ref_3f6 = dialogAlloc();
    ref_3f7 = msgShow(msg_51);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]You actually need me to explain how to shop?
[tab]Ffff. Choose "Buy armor" and you buy some armor.
[wait][clear][color(yellow)]Whistler[color(white)]
[tab]Only certain people can wear certain pieces
[tab]of armor. Check before you buy anything, 
[tab]because all sales here are final.
[wait][clear][color(yellow)]Whistler[color(white)]
[tab]Or you can choose "Sell items" if you have
[tab]something you want to get rid of. Pick which
[tab]kind of item, then choose what you wanna sell.
[wait][clear][color(yellow)]Whistler[color(white)]
[tab]I pay about half the retail price. Them’s the
[tab]breaks. And I won’t buy anything you got
[tab]equipped or anything I got no use for.
[wait][clear]
***************************************/
    wait(ref_3f7);
    dialogFree(ref_3f6);
    b(label_401);
  label_3fb:
    bne(var_0, 1, label_401);
    ref_3fc = dialogAlloc();
    ref_3fd = msgShow(msg_52);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]You actually need me to explain how to shop?
[tab]Ffff. Choose "Buy weapons" 
[tab]and you buy some weapons.
[wait][clear][color(yellow)]Whistler[color(white)]
[tab]Only certain people can use certain weapons.
[tab]Check before you buy anything, because all
[tab]sales here are final.
[wait][clear][color(yellow)]Whistler[color(white)]
[tab]...There’s more than one weapon? 
[tab]There’s lots of them in the warehouse.
[tab]...Don’t worry about the details.
[wait][clear][color(yellow)][color(white)]
[tab]Or you can choose "Sell items" if you have
[tab]something you want to get rid of. Pick which
[tab]kind of item, then choose what you wanna sell.
[wait][clear][color(yellow)]Whistler[color(white)]
[tab]I pay about half the retail price. Them’s the
[tab]breaks. And I won’t buy anything you got
[tab]equipped or anything I got no use for.
[wait][clear]
***************************************/
    wait(ref_3fd);
    dialogFree(ref_3fc);
    b(label_401);
  label_401:
}

function NOITEM()
{
    unitFacePlayer(shopkeeper);
    ref_403 = bustupLoad(bustup_ed);
    bustupWait(ref_403);
    ref_405 = bustupAlloc(ref_403, right, rgb(0,0,0));
    bustupFade(ref_405, rgb(128,0,0), 30);
    ref_407 = dialogAlloc();
    ref_408 = msgShow(msg_53);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]You don’t have anything to sell.[wait][clear]
***************************************/
    wait(ref_408);
    dialogFree(ref_407);
    ref_40b = bustupFade(ref_405, rgb(0,0,0), 10);
    bustupWait(ref_40b);
    bustupFree(ref_405);
    li(var_5, 20);
}

function DECIDE_BUY()
{
    msgVar_Number(msgvar_0, var_6);
    unitFacePlayer(shopkeeper);
    ref_412 = bustupLoad(bustup_ed);
    bustupWait(ref_412);
    ref_414 = bustupAlloc(ref_412, left, rgb(0,0,0));
    bustupFade(ref_414, rgb(128,0,0), 30);
    ref_416 = dialogAlloc();
    choiceSetResult(1);
    op_105(1);
    ref_419 = msgShow(msg_54);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]In total that’s ¥[var(msg_var_0)].
[choice(2)]Yes
No
[end_choice][clear]
***************************************/
    wait(ref_419);
    choiceGetResult(var_7);
    bne(var_7, 0, label_420);
    sndMusicPlay(sound_3037, 127);
    li(var_7, 1);
    b(label_423);
  label_420:
    bne(var_7, 1, label_423);
    li(var_7, 0);
    b(label_423);
  label_423:
    wait(ref_419);
    dialogFree(ref_416);
    ref_425 = bustupFade(ref_414, rgb(0,0,0), 10);
    bustupWait(ref_425);
    bustupFree(ref_414);
    li(var_5, 20);
}

function DECIDE_SELL()
{
    choiceSetResult(1);
    op_105(1);
    msgVar_Number(msgvar_0, var_6);
    unitFacePlayer(shopkeeper);
    ref_42e = bustupLoad(bustup_ed);
    bustupWait(ref_42e);
    ref_430 = bustupAlloc(ref_42e, left, rgb(0,0,0));
    bustupFade(ref_430, rgb(128,0,0), 30);
    ref_432 = dialogAlloc();
    choiceSetResult(1);
    op_105(1);
    ref_435 = msgShow(msg_55);
/***************************************
[color(yellow)]Whistler[color(white)]
[tab]In total that’s ¥[var(msg_var_0)].
[choice(2)]Yes
No
[end_choice][clear]
***************************************/
    wait(ref_435);
    choiceGetResult(var_7);
    bne(var_7, 0, label_43c);
    sndMusicPlay(sound_3037, 127);
    li(var_7, 1);
    b(label_43f);
  label_43c:
    bne(var_7, 1, label_43f);
    li(var_7, 0);
    b(label_43f);
  label_43f:
    wait(ref_435);
    dialogFree(ref_432);
    ref_441 = bustupFade(ref_430, rgb(0,0,0), 10);
    bustupWait(ref_441);
    bustupFree(ref_430);
    li(var_5, 20);
}
