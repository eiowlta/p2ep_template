function START()
{
    screenEffectInit();
    screenFade(160, 120, rgb(255,255,255), rgb(255,255,255), sub);
    sndMusicPlay(sound_3046, 127);
    bitGet(var_0, MBIT_HI_KAORIHENNI);
    bne(var_0, 0, label_6);
    b(label_1d);
  label_6:
    bne(var_0, 1, label_1d);
    bitGet(var_0, MBIT_KAHENIDIS);
    bne(var_0, 0, label_1a);
    rand(var_0, 1);
    bne(var_0, 0, label_e);
    bitSet(MBIT_KAHENIDIS);
    bitSet(MBIT_KAORIZOUKA);
    b(label_19);
  label_e:
    bne(var_0, 1, label_19);
    bitSet(MBIT_KAHENIDIS);
    bitSet(MBIT_KAORIKYUUKA);
    bitGet(var_0, MBIT_KAKYUKACHK);
    bne(var_0, 0, label_16);
    bitSet(MBIT_KAOYASUMI);
    bitSet(MBIT_KAKYUKACHK);
    b(label_18);
  label_16:
    bne(var_0, 1, label_18);
    b(label_18);
  label_18:
    b(label_19);
  label_19:
    b(label_1c);
  label_1a:
    bne(var_0, 1, label_1c);
    b(label_1c);
  label_1c:
    b(label_1d);
  label_1d:
    envTriggerSet(EXITBOX, 131, 1, line, coll_22);
    li(var_0, 0);
    partyMemberCheck(var_0, ulala);
    add(var_1, var_1, var_0);
    partyMemberCheck(var_0, katsuya);
    add(var_1, var_1, var_0);
    partyMemberCheck(var_0, baofu);
    add(var_1, var_1, var_0);
    partyMemberCheck(var_0, nanjo);
    add(var_1, var_1, var_0);
    partyMemberCheck(var_0, elly);
    add(var_1, var_1, var_0);
    partyMemberCheck(var_0, tatsuya);
    add(var_1, var_1, var_0);
    boutrange(var_1, 0, 4, label_2e);
    li(var_0, 0);
    b(label_33);
  label_2e:
    ref_2e = dialogAlloc();
    ref_2f = msgShow(msg_0);
/***************************************
More than four in party.
[tab]It’s gonna hang.
[wait][clear]
***************************************/
    wait(ref_2f);
    dialogFree(ref_2e);
    b(label_33);
  label_33:
    partyMemberCheck(var_0, ulala);
    bez(var_0, label_39);
    ref_35 = spriteLoad(sprite_6);
    wait(ref_35);
    unitSpawn(ulala, sprite_6, 887, 0, -482, west, none);
    unitTriggerSet(ulala, B_URARATI, 255, 1);
  label_39:
    partyMemberCheck(var_0, katsuya);
    bez(var_0, label_3f);
    ref_3b = spriteLoad(sprite_d);
    wait(ref_3b);
    unitSpawn(katsuya, sprite_d, 192, 0, -344, north, none);
    unitTriggerSet(katsuya, B_KATUYYY, 255, 1);
  label_3f:
    partyMemberCheck(var_0, baofu);
    bez(var_0, label_45);
    ref_41 = spriteLoad(sprite_13);
    wait(ref_41);
    unitSpawn(baofu, sprite_13, 928, 0, -892, east, none);
    unitTriggerSet(baofu, B_PAO, 255, 1);
  label_45:
    partyMemberCheck(var_0, nanjo);
    bez(var_0, label_4b);
    ref_47 = spriteLoad(sprite_1f);
    wait(ref_47);
    unitSpawn(nanjo, sprite_1f, 704, 0, -560, east, none);
    unitTriggerSet(nanjo, B_NANJ, 255, 1);
  label_4b:
    partyMemberCheck(var_0, elly);
    bez(var_0, label_51);
    ref_4d = spriteLoad(sprite_23);
    wait(ref_4d);
    unitSpawn(elly, sprite_23, 130, 0, -623, east, none);
    unitTriggerSet(elly, B_ERI, 255, 1);
  label_51:
    partyMemberCheck(var_0, tatsuya);
    bez(var_0, label_57);
    ref_53 = spriteLoad(sprite_18);
    wait(ref_53);
    unitSpawn(tatsuya, sprite_18, 133, 0, -544, east, none);
    unitTriggerSet(tatsuya, B_TATU, 255, 1);
  label_57:
    bitGet(var_0, EBIT_E003E);
    bnz(var_0, label_5f);
    bitGet(var_0, EBIT_E0038);
    bez(var_0, label_5f);
    ref_5b = spriteLoad(sprite_6a);
    wait(ref_5b);
    unitSpawn(makimura, sprite_6a, 185, 0, -1029, north, none);
    unitTriggerSet(makimura, SAGIBOX, 255, 1);
  label_5f:
    ref_5f = spriteLoad(sprite_8e);
    wait(ref_5f);
    unitSpawn(shopkeeper, sprite_8e, 510, 0, -797, north, none);
    unitTriggerSet(shopkeeper, SHOPBOX, 255, 1);
    ref_63 = spriteLoad(sprite_ba);
    wait(ref_63);
    unitSpawn(npc1, sprite_ba, 96, 0, -835, west, none);
    unitPalette(npc1, 1);
    unitTriggerSet(npc1, WAKAMONO, 255, 1);
    ref_68 = spriteLoad(sprite_c5);
    wait(ref_68);
    unitSpawn(npc2, sprite_c5, 457, 0, -251, north, none);
    unitPalette(npc2, 1);
    unitTriggerSet(npc2, OBASAN, 255, 1);
    bitGet(var_0, MBIT_KAORIRIYOU);
    bne(var_0, 0, label_71);
    cameraSet(southeast, 508, 0, -1089);
    b(label_74);
  label_71:
    bne(var_0, 1, label_74);
    cameraSet(southeast, 503, 0, -877);
    b(label_74);
  label_74:
    ref_74 = spriteLoad(sprite_0);
    wait(ref_74);
    ref_76 = spriteLoad(sprite_2);
    wait(ref_76);
    playerInit(south);
    controlDisable();
    screenEffectUnknown();
    screenFadeInner(rgb(0,0,0), 6, true);
    screenFadeOuter(rgb(0,0,0), 6, true);
    unitIdleOnAll();
    screenFadeWait(inner);
    screenFadeWait(outer);
    controlEnable();
}

function B_URARATI()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_f9);
    bitGet(var_0, EBIT_E0046);
    bnz(var_0, label_e9);
    bitGet(var_0, EBIT_E0043);
    bnz(var_0, label_d9);
    bitGet(var_0, EBIT_E003E);
    bnz(var_0, label_c9);
    bitGet(var_0, EBIT_E0018);
    bnz(var_0, label_b9);
    bitGet(var_0, MBIT_KAOTALK01);
    bnz(var_0, label_a9);
    unitFacePlayer(ulala);
    ref_90 = bustupLoad(bustup_1a);
    bustupWait(ref_90);
    ref_92 = bustupAlloc(ref_90, left, rgb(0,0,0));
    bustupFade(ref_92, rgb(128,0,0), 30);
    ref_94 = dialogAlloc();
    ref_95 = msgShow(msg_1);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]In case you forgot...
[tab]I’m just a regular, normal citizen ya know?
[tab]I’m feeling down by all these murders.
[wait][clear]
***************************************/
    wait(ref_95);
    ref_97 = bustupFade(ref_92, rgb(0,0,0), 10);
    bustupWait(ref_97);
    bustupFree(ref_92);
    ref_9a = bustupLoad(bustup_17);
    bustupWait(ref_9a);
    ref_9c = bustupAlloc(ref_9a, left, rgb(0,0,0));
    bustupFade(ref_9c, rgb(128,0,0), 30);
    ref_9e = msgShow(msg_2);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]So, I want to calm myself down with
[tab]some aromatherapy...
[tab]Breathe in... breathe out...[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_2d, 1);
    wait(ref_9e);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_94);
    ref_a3 = bustupFade(ref_9c, rgb(0,0,0), 10);
    bustupWait(ref_a3);
    bustupFree(ref_9c);
    unitRestoreFacing(ulala);
    bitSet(MBIT_KAOTALK01);
    b(label_113);
  label_a9:
    unitFacePlayer(ulala);
    ref_aa = bustupLoad(bustup_18);
    bustupWait(ref_aa);
    ref_ac = bustupAlloc(ref_aa, left, rgb(0,0,0));
    bustupFade(ref_ac, rgb(128,0,0), 30);
    ref_ae = dialogAlloc();
    ref_af = msgShow(msg_3);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]Ahhhh, that smells good.
[tab]Not like your room that smells all moldy.
[tab]A girl should keep her room clean ya know.
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_2d, 1);
    wait(ref_af);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_ae);
    ref_b4 = bustupFade(ref_ac, rgb(0,0,0), 10);
    bustupWait(ref_b4);
    bustupFree(ref_ac);
    unitRestoreFacing(ulala);
    b(label_113);
  label_b9:
    unitFacePlayer(ulala);
    ref_ba = bustupLoad(bustup_18);
    bustupWait(ref_ba);
    ref_bc = bustupAlloc(ref_ba, left, rgb(0,0,0));
    bustupFade(ref_bc, rgb(128,0,0), 30);
    ref_be = dialogAlloc();
    ref_bf = msgShow(msg_4);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]"Baofu", huh... What a weird name.
[tab]I can’t say it with a straight face.
[tab]I think I’ll call him "Bao"!
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_30, 1);
    wait(ref_bf);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_be);
    ref_c4 = bustupFade(ref_bc, rgb(0,0,0), 10);
    bustupWait(ref_c4);
    bustupFree(ref_bc);
    unitRestoreFacing(ulala);
    b(label_113);
  label_c9:
    unitFacePlayer(ulala);
    ref_ca = bustupLoad(bustup_19);
    bustupWait(ref_ca);
    ref_cc = bustupAlloc(ref_ca, left, rgb(0,0,0));
    bustupFade(ref_cc, rgb(128,0,0), 30);
    ref_ce = dialogAlloc();
    ref_cf = msgShow(msg_5);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]If that girl Noriko-chan was abducted because
[tab]she became a Joker, that could’ve happened
[tab]to me too... I can’t let this pass by!
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_2f, 1);
    wait(ref_cf);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_ce);
    ref_d4 = bustupFade(ref_cc, rgb(0,0,0), 10);
    bustupWait(ref_d4);
    bustupFree(ref_cc);
    unitRestoreFacing(ulala);
    b(label_113);
  label_d9:
    unitFacePlayer(ulala);
    ref_da = bustupLoad(bustup_1f);
    bustupWait(ref_da);
    ref_dc = bustupAlloc(ref_da, left, rgb(0,0,0));
    bustupFade(ref_dc, rgb(128,0,0), 30);
    ref_de = dialogAlloc();
    ref_df = msgShow(msg_6);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]The guys are being kinda scary.
[tab]They don’t need to get so upset.
[tab]Ma-ya, you should stay away from them.
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_1a, 1);
    wait(ref_df);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_de);
    ref_e4 = bustupFade(ref_dc, rgb(0,0,0), 10);
    bustupWait(ref_e4);
    bustupFree(ref_dc);
    unitRestoreFacing(ulala);
    b(label_113);
  label_e9:
    unitFacePlayer(ulala);
    ref_ea = bustupLoad(bustup_1d);
    bustupWait(ref_ea);
    ref_ec = bustupAlloc(ref_ea, left, rgb(0,0,0));
    bustupFade(ref_ec, rgb(128,0,0), 30);
    ref_ee = dialogAlloc();
    ref_ef = msgShow(msg_7);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]I don’t really get it but,
[tab]the Joker is just a Persona right?
[tab]What can you do by collecting it?
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_2d, 1);
    wait(ref_ef);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_ee);
    ref_f4 = bustupFade(ref_ec, rgb(0,0,0), 10);
    bustupWait(ref_f4);
    bustupFree(ref_ec);
    unitRestoreFacing(ulala);
    b(label_113);
  label_f9:
    unitFacePlayer(ulala);
    ref_fa = bustupLoad(bustup_17);
    bustupWait(ref_fa);
    ref_fc = bustupAlloc(ref_fa, left, rgb(0,0,0));
    bustupFade(ref_fc, rgb(128,0,0), 30);
    ref_fe = dialogAlloc();
    ref_ff = msgShow(msg_8);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]Let’s see... first they announced that people
[tab]who do the Joker curse become Jokers.
[tab]So, I went through all that horrible stuff...
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_1a, 1);
    wait(ref_ff);
    unitAnimationPlay(ulala, animation_a, 1);
    ref_103 = bustupFade(ref_fc, rgb(0,0,0), 10);
    bustupWait(ref_103);
    bustupFree(ref_fc);
    ref_106 = bustupLoad(bustup_1d);
    bustupWait(ref_106);
    ref_108 = bustupAlloc(ref_106, left, rgb(0,0,0));
    bustupFade(ref_108, rgb(128,0,0), 30);
    ref_10a = msgShow(msg_9);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]And now, you’ll become a Joker if you don’t
[tab]go to the seminar to have your Kegare removed? 
[tab]There’s just no escape from this.
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_2d, 1);
    wait(ref_10a);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_fe);
    ref_10f = bustupFade(ref_108, rgb(0,0,0), 10);
    bustupWait(ref_10f);
    bustupFree(ref_108);
    unitRestoreFacing(ulala);
  label_113:
    controlEnable();
}

function B_KATUYYY()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_1a4);
    bitGet(var_0, EBIT_E0046);
    bnz(var_0, label_194);
    bitGet(var_0, EBIT_E0043);
    bnz(var_0, label_184);
    bitGet(var_0, EBIT_E003E);
    bnz(var_0, label_174);
    bitGet(var_0, EBIT_E0038);
    bnz(var_0, label_164);
    bitGet(var_0, EBIT_E0037);
    bnz(var_0, label_154);
    bitGet(var_0, EBIT_E0018);
    bnz(var_0, label_146);
    unitFacePlayer(katsuya);
    ref_125 = bustupLoad(bustup_21);
    bustupWait(ref_125);
    ref_127 = bustupAlloc(ref_125, left, rgb(0,0,0));
    bustupFade(ref_127, rgb(128,0,0), 30);
    ref_129 = dialogAlloc();
    ref_12a = msgShow(msg_10);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]So this is the healing stuff...
[tab]I never thought I would have to depend on
[tab]this kind of thing but, it’s helping now...
[sync][wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_1f, 1);
    unitWait(katsuya);
    delayClear();
    delayWait(30);
    unitAnimationPlay(katsuya, animation_0, 1);
    delayClear();
    delayWait(20);
    unitAnimationPlay(katsuya, animation_6, 1);
    sync();
    wait(ref_12a);
    ref_135 = bustupFade(ref_127, rgb(0,0,0), 10);
    bustupWait(ref_135);
    bustupFree(ref_127);
    ref_138 = bustupLoad(bustup_27);
    bustupWait(ref_138);
    ref_13a = bustupAlloc(ref_138, left, rgb(0,0,0));
    bustupFade(ref_13a, rgb(128,0,0), 30);
    ref_13c = msgShow(msg_11);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]Personas... Philemon...
[tab]All these insane things are happening...
[tab]Tell you the truth, it makes my head spin.
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_2e, 1);
    wait(ref_13c);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_129);
    ref_141 = bustupFade(ref_13a, rgb(0,0,0), 10);
    bustupWait(ref_141);
    bustupFree(ref_13a);
    unitRestoreFacing(katsuya);
    b(label_1b3);
  label_146:
    ref_146 = bustupLoad(bustup_21);
    bustupWait(ref_146);
    ref_148 = bustupAlloc(ref_146, left, rgb(0,0,0));
    bustupFade(ref_148, rgb(128,0,0), 30);
    ref_14a = dialogAlloc();
    ref_14b = msgShow(msg_12);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]Minister of Foreign Affairs, Tatsuzou Sudou...
[tab]If he had something to do with the serial
[tab]killing 10 years ago... then...
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_1a, 1);
    wait(ref_14b);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_14a);
    ref_150 = bustupFade(ref_148, rgb(0,0,0), 10);
    bustupWait(ref_150);
    bustupFree(ref_148);
    b(label_1b3);
  label_154:
    unitFacePlayer(katsuya);
    ref_155 = bustupLoad(bustup_23);
    bustupWait(ref_155);
    ref_157 = bustupAlloc(ref_155, left, rgb(0,0,0));
    bustupFade(ref_157, rgb(128,0,0), 30);
    ref_159 = dialogAlloc();
    ref_15a = msgShow(msg_13);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]The case can’t be solved by standard
[tab]investigation techniques...
[tab]Why doesn’t Captain Shimazu understand that?
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_2f, 1);
    wait(ref_15a);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_159);
    ref_15f = bustupFade(ref_157, rgb(0,0,0), 10);
    bustupWait(ref_15f);
    bustupFree(ref_157);
    unitRestoreFacing(katsuya);
    b(label_1b3);
  label_164:
    unitFacePlayer(katsuya);
    ref_165 = bustupLoad(bustup_21);
    bustupWait(ref_165);
    ref_167 = bustupAlloc(ref_165, left, rgb(0,0,0));
    bustupFade(ref_167, rgb(128,0,0), 30);
    ref_169 = dialogAlloc();
    ref_16a = msgShow(msg_14);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]Now that you mention it, Serizawa-kun
[tab]was acting strange since the incident at
[tab]the school. Who knew she did the curse too?
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_2d, 1);
    wait(ref_16a);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_169);
    ref_16f = bustupFade(ref_167, rgb(0,0,0), 10);
    bustupWait(ref_16f);
    bustupFree(ref_167);
    unitRestoreFacing(katsuya);
    b(label_1b3);
  label_174:
    unitFacePlayer(katsuya);
    ref_175 = bustupLoad(bustup_23);
    bustupWait(ref_175);
    ref_177 = bustupAlloc(ref_175, left, rgb(0,0,0));
    bustupFade(ref_177, rgb(128,0,0), 30);
    ref_179 = dialogAlloc();
    ref_17a = msgShow(msg_15);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]That girl Noriko did the Joker curse...
[tab]I should have noticed earlier.
[tab]I didn’t investigate it deep enough...
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_2d, 1);
    wait(ref_17a);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_179);
    ref_17f = bustupFade(ref_177, rgb(0,0,0), 10);
    bustupWait(ref_17f);
    bustupFree(ref_177);
    unitRestoreFacing(katsuya);
    b(label_1b3);
  label_184:
    unitFacePlayer(katsuya);
    ref_185 = bustupLoad(bustup_23);
    bustupWait(ref_185);
    ref_187 = bustupAlloc(ref_185, left, rgb(0,0,0));
    bustupFade(ref_187, rgb(128,0,0), 30);
    ref_189 = dialogAlloc();
    ref_18a = msgShow(msg_16);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]A government officer working with an assassin... 
[tab]That should never happen!
[tab]I WILL expose all this corruption!
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_2f, 1);
    wait(ref_18a);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_189);
    ref_18f = bustupFade(ref_187, rgb(0,0,0), 10);
    bustupWait(ref_18f);
    bustupFree(ref_187);
    unitRestoreFacing(katsuya);
    b(label_1b3);
  label_194:
    unitFacePlayer(katsuya);
    ref_195 = bustupLoad(bustup_21);
    bustupWait(ref_195);
    ref_197 = bustupAlloc(ref_195, left, rgb(0,0,0));
    bustupFade(ref_197, rgb(128,0,0), 30);
    ref_199 = dialogAlloc();
    ref_19a = msgShow(msg_17);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]The invitation to the New World Order
[tab]was targeted at the important people
[tab]of the mass media and political fields.
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_1a, 1);
    wait(ref_19a);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_199);
    ref_19f = bustupFade(ref_197, rgb(0,0,0), 10);
    bustupWait(ref_19f);
    bustupFree(ref_197);
    unitRestoreFacing(katsuya);
    b(label_1b3);
  label_1a4:
    unitFacePlayer(katsuya);
    ref_1a5 = bustupLoad(bustup_21);
    bustupWait(ref_1a5);
    ref_1a7 = bustupAlloc(ref_1a5, left, rgb(0,0,0));
    bustupFade(ref_1a7, rgb(128,0,0), 30);
    ref_1a9 = dialogAlloc();
    ref_1aa = msgShow(msg_18);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]They caused the fortune telling fad
[tab]in order to spread the Joker curse and
[tab]collect the power that resulted from it...
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_1a, 1);
    wait(ref_1aa);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_1a9);
    ref_1af = bustupFade(ref_1a7, rgb(0,0,0), 10);
    bustupWait(ref_1af);
    bustupFree(ref_1a7);
    unitRestoreFacing(katsuya);
  label_1b3:
    controlEnable();
}

function B_PAO()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_226);
    bitGet(var_0, EBIT_E0046);
    bnz(var_0, label_216);
    bitGet(var_0, EBIT_E0043);
    bnz(var_0, label_206);
    bitGet(var_0, EBIT_E003E);
    bnz(var_0, label_1f6);
    bitGet(var_0, EBIT_E0038);
    bnz(var_0, label_1e6);
    bitGet(var_0, EBIT_E0033);
    bnz(var_0, label_1d6);
    unitFacePlayer(baofu);
    ref_1c3 = bustupLoad(bustup_2e);
    bustupWait(ref_1c3);
    ref_1c5 = bustupAlloc(ref_1c3, left, rgb(0,0,0));
    bustupFade(ref_1c5, rgb(128,0,0), 30);
    ref_1c7 = dialogAlloc();
    ref_1c8 = msgShow(msg_19);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]Hmph... what’s with all these sweet smells,
[tab]is this a powder room or something?
[tab]They should air out this place.
[sync][wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(baofu, animation_2, 1);
    sync();
    wait(ref_1c8);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_1c7);
    ref_1d1 = bustupFade(ref_1c5, rgb(0,0,0), 10);
    bustupWait(ref_1d1);
    bustupFree(ref_1c5);
    unitRestoreFacing(baofu);
    b(label_239);
  label_1d6:
    unitFacePlayer(baofu);
    ref_1d7 = bustupLoad(bustup_31);
    bustupWait(ref_1d7);
    ref_1d9 = bustupAlloc(ref_1d7, left, rgb(0,0,0));
    bustupFade(ref_1d9, rgb(128,0,0), 30);
    ref_1db = dialogAlloc();
    ref_1dc = msgShow(msg_20);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]Thinking about it, rumors becoming reality sucks. 
[tab]Due to that show, the city is full of Jokers...
[tab]How will the police handle it?
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_2d, 1);
    wait(ref_1dc);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_1db);
    ref_1e1 = bustupFade(ref_1d9, rgb(0,0,0), 10);
    bustupWait(ref_1e1);
    bustupFree(ref_1d9);
    unitRestoreFacing(baofu);
    b(label_239);
  label_1e6:
    unitFacePlayer(baofu);
    ref_1e7 = bustupLoad(bustup_2d);
    bustupWait(ref_1e7);
    ref_1e9 = bustupAlloc(ref_1e7, left, rgb(0,0,0));
    bustupFade(ref_1e9, rgb(128,0,0), 30);
    ref_1eb = dialogAlloc();
    ref_1ec = msgShow(msg_21);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]We’ve got Makimura, but what now...?
[tab]There is no guarantee that Serizawa will
[tab]return to normal.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_2d, 1);
    wait(ref_1ec);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_1eb);
    ref_1f1 = bustupFade(ref_1e9, rgb(0,0,0), 10);
    bustupWait(ref_1f1);
    bustupFree(ref_1e9);
    unitRestoreFacing(baofu);
    b(label_239);
  label_1f6:
    unitFacePlayer(baofu);
    ref_1f7 = bustupLoad(bustup_2e);
    bustupWait(ref_1f7);
    ref_1f9 = bustupAlloc(ref_1f7, left, rgb(0,0,0));
    bustupFade(ref_1f9, rgb(128,0,0), 30);
    ref_1fb = dialogAlloc();
    ref_1fc = msgShow(msg_22);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]This is ridiculous.
[tab]Did we volunteer to save the Joker people?
[tab]I can’t be bothered with this crap.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_2d, 1);
    wait(ref_1fc);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_1fb);
    ref_201 = bustupFade(ref_1f9, rgb(0,0,0), 10);
    bustupWait(ref_201);
    bustupFree(ref_1f9);
    unitRestoreFacing(baofu);
    b(label_239);
  label_206:
    unitFacePlayer(baofu);
    ref_207 = bustupLoad(bustup_31);
    bustupWait(ref_207);
    ref_209 = bustupAlloc(ref_207, left, rgb(0,0,0));
    bustupFade(ref_209, rgb(128,0,0), 30);
    ref_20b = dialogAlloc();
    ref_20c = msgShow(msg_23);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]I don’t care what you think of me.
[tab]We’re from different worlds.
[tab]Just keep that in mind.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1d, 1);
    wait(ref_20c);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_20b);
    ref_211 = bustupFade(ref_209, rgb(0,0,0), 10);
    bustupWait(ref_211);
    bustupFree(ref_209);
    unitRestoreFacing(baofu);
    b(label_239);
  label_216:
    unitFacePlayer(baofu);
    ref_217 = bustupLoad(bustup_2e);
    bustupWait(ref_217);
    ref_219 = bustupAlloc(ref_217, left, rgb(0,0,0));
    bustupFade(ref_219, rgb(128,0,0), 30);
    ref_21b = dialogAlloc();
    ref_21c = msgShow(msg_24);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]Your problem is you would trust anyone.
[tab]Just because they appeared from rumors
[tab]doesn’t mean they’re on your side.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_2d, 1);
    wait(ref_21c);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_21b);
    ref_221 = bustupFade(ref_219, rgb(0,0,0), 10);
    bustupWait(ref_221);
    bustupFree(ref_219);
    unitRestoreFacing(baofu);
    b(label_239);
  label_226:
    unitFacePlayer(baofu);
    ref_227 = bustupLoad(bustup_31);
    bustupWait(ref_227);
    ref_229 = bustupAlloc(ref_227, left, rgb(0,0,0));
    bustupFade(ref_229, rgb(128,0,0), 30);
    ref_22b = dialogAlloc();
    ref_22c = msgShow(msg_25);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]There’s no such thing as an impure human...
[tab]But how much Kegare could you possibly
[tab]get from just ordinary people?
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1a, 1);
    wait(ref_22c);
    unitAnimationPlay(baofu, animation_a, 1);
    ref_230 = msgShow(msg_26);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]There’s gotta be something behind it...
[tab]Not just to gather Kegare,
[tab]but some other reason...
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_2d, 1);
    wait(ref_230);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_22b);
    ref_235 = bustupFade(ref_229, rgb(0,0,0), 10);
    bustupWait(ref_235);
    bustupFree(ref_229);
    unitRestoreFacing(baofu);
  label_239:
    controlEnable();
}

function B_NANJ()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_24e);
    unitFacePlayer(nanjo);
    ref_23f = bustupLoad(bustup_36);
    bustupWait(ref_23f);
    ref_241 = bustupAlloc(ref_23f, left, rgb(0,0,0));
    bustupFade(ref_241, rgb(128,0,0), 30);
    ref_243 = dialogAlloc();
    ref_244 = msgShow(msg_27);
/***************************************
[color(yellow)]Nanjo[color(white)]
[tab]I am surprised you are all Persona users.
[tab]As they say, birds of a feather.
[wait][clear]
***************************************/
    unitAnimationPlay(nanjo, animation_1a, 1);
    wait(ref_244);
    unitAnimationPlay(nanjo, animation_a, 1);
    dialogFree(ref_243);
    ref_249 = bustupFade(ref_241, rgb(0,0,0), 10);
    bustupWait(ref_249);
    bustupFree(ref_241);
    unitRestoreFacing(nanjo);
    b(label_25d);
  label_24e:
    unitFacePlayer(nanjo);
    ref_24f = bustupLoad(bustup_36);
    bustupWait(ref_24f);
    ref_251 = bustupAlloc(ref_24f, left, rgb(0,0,0));
    bustupFade(ref_251, rgb(128,0,0), 30);
    ref_253 = dialogAlloc();
    ref_254 = msgShow(msg_28);
/***************************************
[color(yellow)]Nanjo[color(white)]
[tab]That Kandori is undoubtedly the real one.
[tab]He remembers about our fight at Sebec,
[tab]and about me. Then why... is he...
[wait][clear]
***************************************/
    unitAnimationPlay(nanjo, animation_6, 1);
    wait(ref_254);
    unitAnimationPlay(nanjo, animation_a, 1);
    dialogFree(ref_253);
    ref_259 = bustupFade(ref_251, rgb(0,0,0), 10);
    bustupWait(ref_259);
    bustupFree(ref_251);
    unitRestoreFacing(nanjo);
  label_25d:
    controlEnable();
}

function B_ERI()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_276);
    unitFacePlayer(elly);
    ref_263 = bustupLoad(bustup_3e);
    bustupWait(ref_263);
    ref_265 = bustupAlloc(ref_263, left, rgb(0,0,0));
    bustupFade(ref_265, rgb(128,0,0), 30);
    ref_267 = dialogAlloc();
    ref_268 = msgShow(msg_29);
/***************************************
[color(yellow)]Elly[color(white)]
[tab]Oh, this is fantastic!
[tab]I didn’t know there was such a nice little
[tab]shop like this in Sumaru City!
[wait][clear]
***************************************/
    unitAnimationPlay(elly, animation_30, 1);
    wait(ref_268);
    unitAnimationPlay(elly, animation_a, 1);
    ref_26c = msgShow(msg_30);
/***************************************
[color(yellow)]Elly[color(white)]
[tab]This is the "Cananga Odorata" fragrance.
[tab]I’ve been interested in aromatherapy
[tab]since I was in High School.
[wait][clear]
***************************************/
    unitAnimationPlay(elly, animation_25, 1);
    wait(ref_26c);
    unitAnimationPlay(elly, animation_a, 1);
    dialogFree(ref_267);
    ref_271 = bustupFade(ref_265, rgb(0,0,0), 10);
    bustupWait(ref_271);
    bustupFree(ref_265);
    unitRestoreFacing(elly);
    b(label_285);
  label_276:
    unitFacePlayer(elly);
    ref_277 = bustupLoad(bustup_40);
    bustupWait(ref_277);
    ref_279 = bustupAlloc(ref_277, left, rgb(0,0,0));
    bustupFade(ref_279, rgb(128,0,0), 30);
    ref_27b = dialogAlloc();
    ref_27c = msgShow(msg_31);
/***************************************
[color(yellow)]Elly[color(white)]
[tab]Wang Long Chizuru was connected to the
[tab]New World Order... as well as Mr. Kandori.
[tab]What does she intend to do...?
[wait][clear]
***************************************/
    unitAnimationPlay(elly, animation_6, 1);
    wait(ref_27c);
    unitAnimationPlay(elly, animation_a, 1);
    dialogFree(ref_27b);
    ref_281 = bustupFade(ref_279, rgb(0,0,0), 10);
    bustupWait(ref_281);
    bustupFree(ref_279);
    unitRestoreFacing(elly);
  label_285:
    controlEnable();
}

function B_TATU()
{
}

function SAGIBOX()
{
    controlDisable();
    unitFacePlayer(makimura);
    ref_28a = bustupLoad(bustup_d4);
    bustupWait(ref_28a);
    ref_28c = bustupAlloc(ref_28a, right, rgb(0,0,0));
    bustupFade(ref_28c, rgb(128,0,0), 30);
    ref_28e = dialogAlloc();
    ref_28f = msgShow(msg_32);
/***************************************
[color(yellow)]Makimura[color(white)]
[tab]S-Say... she used to like flowers...
[tab]Oh wait, was it Miyuki...
[tab]Or was it Shizuka...
[wait][clear]
***************************************/
    unitAnimationPlay(makimura, animation_24, 1);
    wait(ref_28f);
    unitAnimationPlay(makimura, animation_0, 1);
    ref_293 = msgShow(msg_33);
/***************************************
[color(yellow)]Makimura[color(white)]
[tab]I-I have to be nice to her...
[tab]Or else I’m dead...
[tab]Once she’s mad she’s uncontrollable...
[wait][clear]
***************************************/
    unitAnimationPlay(makimura, animation_6, 1);
    wait(ref_293);
    unitAnimationPlay(makimura, animation_0, 1);
    dialogFree(ref_28e);
    ref_298 = bustupFade(ref_28c, rgb(0,0,0), 10);
    bustupWait(ref_298);
    bustupFree(ref_28c);
    unitRestoreFacing(makimura);
    controlEnable();
}

function SHOPBOX()
{
    controlDisable();
    bitGet(var_0, MBIT_KAOYASUMI);
    bne(var_0, 0, label_2a3);
    shopOverlayInit();
    b(label_2a5);
  label_2a3:
    bne(var_0, 1, label_2a5);
    b(label_2a5);
  label_2a5:
    unitFacePlayer(shopkeeper);
    bitGet(var_0, MBIT_KAHENIDIS);
    bne(var_0, 0, label_2c8);
    bitGet(var_0, MBIT_HI_KAORIAROMA);
    bne(var_0, 0, label_2b2);
    bitGet(var_0, MBIT_AIS_47);
    bne(var_0, 0, label_2ae);
    b(label_450);
    b(label_2b1);
  label_2ae:
    bne(var_0, 1, label_2b1);
    b(label_46b);
    b(label_2b1);
  label_2b1:
    b(label_2c7);
  label_2b2:
    bne(var_0, 1, label_2c7);
    bitGet(var_0, MBIT_SYOUAROMA);
    bne(var_0, 0, label_2bd);
    bitGet(var_0, MBIT_AIS_47);
    bne(var_0, 0, label_2b9);
    b(label_33c);
    b(label_2bc);
  label_2b9:
    bne(var_0, 1, label_2bc);
    b(label_353);
    b(label_2bc);
  label_2bc:
    b(label_2c6);
  label_2bd:
    bne(var_0, 1, label_2c6);
    bitGet(var_0, MBIT_AIS_47);
    bne(var_0, 0, label_2c2);
    b(label_450);
    b(label_2c5);
  label_2c2:
    bne(var_0, 1, label_2c5);
    b(label_46b);
    b(label_2c5);
  label_2c5:
    b(label_2c6);
  label_2c6:
    b(label_2c7);
  label_2c7:
    b(label_33c);
  label_2c8:
    bne(var_0, 1, label_33c);
    bitGet(var_0, MBIT_KAORIZOUKA);
    bne(var_0, 0, label_2df);
    bitGet(var_0, MBIT_KAOYASUMI);
    bne(var_0, 0, label_2d5);
    bitGet(var_0, MBIT_AIS_47);
    bne(var_0, 0, label_2d1);
    b(label_450);
    b(label_2d4);
  label_2d1:
    bne(var_0, 1, label_2d4);
    b(label_46b);
    b(label_2d4);
  label_2d4:
    b(label_2de);
  label_2d5:
    bne(var_0, 1, label_2de);
    bitGet(var_0, MBIT_AIS_47);
    bne(var_0, 0, label_2da);
    b(label_398);
    b(label_2dd);
  label_2da:
    bne(var_0, 1, label_2dd);
    b(label_3f4);
    b(label_2dd);
  label_2dd:
    b(label_2de);
  label_2de:
    b(label_33b);
  label_2df:
    bne(var_0, 1, label_33b);
    bitGet(var_0, MBIT_COUSZOU);
    bne(var_0, 0, label_331);
    bitSet(TBIT_HE_KA);
    bitSet(TBIT_101);
    bitSet(TBIT_102);
    bitSet(TBIT_103);
    bitSet(TBIT_201);
    bitSet(TBIT_202);
    bitSet(TBIT_203);
    bitSet(TBIT_301);
    bitSet(TBIT_302);
    bitSet(TBIT_303);
    bitSet(TBIT_401);
    bitSet(TBIT_402);
    bitSet(TBIT_403);
    bitSet(TBIT_501);
    bitSet(TBIT_502);
    bitSet(TBIT_503);
    bitSet(TBIT_601);
    bitSet(TBIT_602);
    bitClear(TBIT_HE_RA);
    bitClear(TBIT_HE_RB);
    bitClear(MBIT_MI_MONSYOU);
    bitClear(MBIT_MI_ROSAHEN_A);
    bitClear(MBIT_MI_ROSAHEN_B);
    bitClear(MBIT_MI_KAOHEN_A);
    bitClear(MBIT_MI_KAOHEN_B);
    bitClear(MBIT_MI_JIKANSELL);
    bitClear(MBIT_MI_JIKANDUP);
    bitClear(MBIT_MI_KAORIAROMA);
    bitClear(MBIT_MI_KAORIHENNI);
    bitClear(MBIT_MI_SIRAMAN);
    bitClear(MBIT_MI_SIRAHENNI);
    bitClear(MBIT_MI_TOAARM);
    bitClear(MBIT_MI_TONYITEM);
    bitClear(MBIT_MI_MUSLOT);
    bitClear(MBIT_MI_GIGACD1);
    bitClear(MBIT_MI_GIGACD2);
    bitClear(MBIT_MI_BARARM);
    bitClear(MBIT_MI_BARHENNI);
    bitClear(MBIT_MI_ROSADEF);
    bitClear(MBIT_MI_ROSAHENNI);
    bitClear(MBIT_MI_ETEESTHE);
    bitClear(MBIT_MI_ETEHENNI);
    bitClear(MBIT_MI_GYPAISHO1);
    bitClear(MBIT_MI_GYPAISHO2);
    bitClear(MBIT_MI_CLEARM);
    bitClear(MBIT_MI_CLEAOBA);
    bitClear(MBIT_MI_JEWDEVE);
    bitClear(MBIT_MI_JEWKOUNAN);
    bitClear(MBIT_MI_SKYMAP);
    bitClear(MBIT_MI_TRISHOKUJI);
    bitClear(MBIT_MI_TRIKAISIN);
    bitClear(MBIT_MI_BATOLUBUKI);
    bitClear(MBIT_MI_MAGICKITEM);
    bitClear(MBIT_MI_PELPELBUKI);
    bitClear(MBIT_MI_DEVIL1);
    bitClear(MBIT_MI_DEVIL2);
    bitClear(MBIT_MI_DEVIL3);
    bitClear(MBIT_MI_DEVIL4);
    bitClear(MBIT_MI_DEVIL5);
    bitClear(MBIT_MI_DEVIL6);
    bitClear(MBIT_MI_DEVIL7);
    bitClear(MBIT_MI_DEVIL8);
    bitClear(MBIT_MI_DEVIL9);
    bitClear(MBIT_MI_DEVIL10);
    bitClear(MBIT_MI_DENNSETU);
    bitClear(MBIT_MI_NANJOTOUJO);
    bitClear(MBIT_MI_HANAKOTOBA);
    bitClear(MBIT_MI_TATUNOSIN);
    bitClear(MBIT_MI_MAIHIME);
    bitClear(MBIT_MI_ZODI2F);
    bitClear(MBIT_MI_GYPSTART);
    bitGet(var_0, MBIT_AIS_47);
    bne(var_0, 0, label_32d);
    b(label_36a);
    b(label_330);
  label_32d:
    bne(var_0, 1, label_330);
    b(label_381);
    b(label_330);
  label_330:
    b(label_33a);
  label_331:
    bne(var_0, 1, label_33a);
    bitGet(var_0, MBIT_AIS_47);
    bne(var_0, 0, label_336);
    b(label_450);
    b(label_339);
  label_336:
    bne(var_0, 1, label_339);
    b(label_46b);
    b(label_339);
  label_339:
    b(label_33a);
  label_33a:
    b(label_33b);
  label_33b:
    b(label_33c);
  label_33c:
    ref_33c = bustupLoad(bustup_f1);
    bustupWait(ref_33c);
    ref_33e = bustupAlloc(ref_33c, right, rgb(0,0,0));
    bustupFade(ref_33e, rgb(128,0,0), 30);
    ref_340 = dialogAlloc();
    ref_341 = msgShow(msg_34);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Welcome to my shop.
[tab]I’ve prepared a new fragrance course.
[tab]I call it the "Encounter Aroma".
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]By putting on a certain scent, it changes
[tab]your surroundings and you will have new
[tab]meetings. Please give it a try.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    bitSet(MBIT_SYOUAROMA);
    wait(ref_341);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_340);
    ref_347 = bustupFade(ref_33e, rgb(0,0,0), 10);
    bustupWait(ref_347);
    bustupFree(ref_33e);
    bitGet(var_0, MBIT_KAORIZOUKA);
    bne(var_0, 0, label_34e);
    shopInventory(22, shopInventory_0);
    b(label_351);
  label_34e:
    bne(var_0, 1, label_351);
    shopInventory(22, shopInventory_1);
    b(label_351);
  label_351:
    shopRate(100);
    b(label_485);
  label_353:
    ref_353 = bustupLoad(bustup_f1);
    bustupWait(ref_353);
    ref_355 = bustupAlloc(ref_353, right, rgb(0,0,0));
    bustupFade(ref_355, rgb(128,0,0), 30);
    ref_357 = dialogAlloc();
    ref_358 = msgShow(msg_35);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Welcome to my shop.
[tab]I’ve prepared a new fragrance course.
[tab]I call it the "Encounter Aroma".
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]By putting on a certain scent, it changes
[tab]your surroundings and you will have new
[tab]meetings. Please give it a try.
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]I will lower the price just for you.
[tab]I feel a special connection to you...
[tab]Please give it a try.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    bitSet(MBIT_SYOUAROMA);
    wait(ref_358);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_357);
    ref_35e = bustupFade(ref_355, rgb(0,0,0), 10);
    bustupWait(ref_35e);
    bustupFree(ref_355);
    bitGet(var_0, MBIT_KAORIZOUKA);
    bne(var_0, 0, label_365);
    shopInventory(22, shopInventory_0);
    b(label_368);
  label_365:
    bne(var_0, 1, label_368);
    shopInventory(22, shopInventory_1);
    b(label_368);
  label_368:
    shopRate(80);
    b(label_485);
  label_36a:
    ref_36a = bustupLoad(bustup_f1);
    bustupWait(ref_36a);
    ref_36c = bustupAlloc(ref_36a, right, rgb(0,0,0));
    bustupFade(ref_36c, rgb(128,0,0), 30);
    ref_36e = dialogAlloc();
    ref_36f = msgShow(msg_36);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Welcome to my shop.
[tab]The other day, I went abroad to look for
[tab]a new essential oil.
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]After going through much trouble I was
[tab]able to get the finest scent.
[tab]I do recommend you try this at least once.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    bitSet(MBIT_COUSZOU);
    wait(ref_36f);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_36e);
    ref_375 = bustupFade(ref_36c, rgb(0,0,0), 10);
    bustupWait(ref_375);
    bustupFree(ref_36c);
    bitGet(var_0, MBIT_KAORIZOUKA);
    bne(var_0, 0, label_37c);
    shopInventory(22, shopInventory_0);
    b(label_37f);
  label_37c:
    bne(var_0, 1, label_37f);
    shopInventory(22, shopInventory_1);
    b(label_37f);
  label_37f:
    shopRate(100);
    b(label_485);
  label_381:
    ref_381 = bustupLoad(bustup_f1);
    bustupWait(ref_381);
    ref_383 = bustupAlloc(ref_381, right, rgb(0,0,0));
    bustupFade(ref_383, rgb(128,0,0), 30);
    ref_385 = dialogAlloc();
    ref_386 = msgShow(msg_37);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Welcome to my shop.
[tab]The other day, I went abroad to look for
[tab]a new essential oil.
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]After going through much trouble I was
[tab]able to get the finest scent.
[tab]I do recommend you try this at least once.
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]I will lower the price just for you.
[tab]I feel a special connection to you...
[tab]Please give it a try.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    bitSet(MBIT_COUSZOU);
    wait(ref_386);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_385);
    ref_38c = bustupFade(ref_383, rgb(0,0,0), 10);
    bustupWait(ref_38c);
    bustupFree(ref_383);
    bitGet(var_0, MBIT_KAORIZOUKA);
    bne(var_0, 0, label_393);
    shopInventory(22, shopInventory_0);
    b(label_396);
  label_393:
    bne(var_0, 1, label_396);
    shopInventory(22, shopInventory_1);
    b(label_396);
  label_396:
    shopRate(80);
    b(label_485);
  label_398:
    ref_398 = bustupLoad(bustup_f1);
    bustupWait(ref_398);
    ref_39a = bustupAlloc(ref_398, right, rgb(0,0,0));
    bustupFade(ref_39a, rgb(128,0,0), 30);
    ref_39c = dialogAlloc();
    ref_39d = msgShow(msg_38);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]I’m sorry... I’ve caught a cold
[tab]and I can’t smell anything...
[tab]I won’t be able to treat you today...
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_39d);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_39c);
    ref_3a2 = bustupFade(ref_39a, rgb(0,0,0), 10);
    bustupWait(ref_3a2);
    bustupFree(ref_39a);
    bitGet(var_0, MBIT_GAT_URARA_01);
    bne(var_0, 0, label_3f0);
    bitSet(MBIT_GAT_URARA_01);
    bitSet(TBIT_HE_KB);
    bitSet(TBIT_101);
    bitSet(TBIT_102);
    bitSet(TBIT_103);
    bitSet(TBIT_201);
    bitSet(TBIT_202);
    bitSet(TBIT_203);
    bitSet(TBIT_301);
    bitSet(TBIT_302);
    bitSet(TBIT_303);
    bitSet(TBIT_401);
    bitSet(TBIT_402);
    bitSet(TBIT_403);
    bitSet(TBIT_501);
    bitSet(TBIT_502);
    bitSet(TBIT_503);
    bitSet(TBIT_601);
    bitSet(TBIT_602);
    bitClear(TBIT_HE_RA);
    bitClear(TBIT_HE_RB);
    bitClear(MBIT_MI_MONSYOU);
    bitClear(MBIT_MI_ROSAHEN_A);
    bitClear(MBIT_MI_ROSAHEN_B);
    bitClear(MBIT_MI_KAOHEN_A);
    bitClear(MBIT_MI_KAOHEN_B);
    bitClear(MBIT_MI_JIKANSELL);
    bitClear(MBIT_MI_JIKANDUP);
    bitClear(MBIT_MI_KAORIAROMA);
    bitClear(MBIT_MI_KAORIHENNI);
    bitClear(MBIT_MI_SIRAMAN);
    bitClear(MBIT_MI_SIRAHENNI);
    bitClear(MBIT_MI_TOAARM);
    bitClear(MBIT_MI_TONYITEM);
    bitClear(MBIT_MI_MUSLOT);
    bitClear(MBIT_MI_GIGACD1);
    bitClear(MBIT_MI_GIGACD2);
    bitClear(MBIT_MI_BARARM);
    bitClear(MBIT_MI_BARHENNI);
    bitClear(MBIT_MI_ROSADEF);
    bitClear(MBIT_MI_ROSAHENNI);
    bitClear(MBIT_MI_ETEESTHE);
    bitClear(MBIT_MI_ETEHENNI);
    bitClear(MBIT_MI_GYPAISHO1);
    bitClear(MBIT_MI_GYPAISHO2);
    bitClear(MBIT_MI_CLEARM);
    bitClear(MBIT_MI_CLEAOBA);
    bitClear(MBIT_MI_JEWDEVE);
    bitClear(MBIT_MI_JEWKOUNAN);
    bitClear(MBIT_MI_SKYMAP);
    bitClear(MBIT_MI_TRISHOKUJI);
    bitClear(MBIT_MI_TRIKAISIN);
    bitClear(MBIT_MI_BATOLUBUKI);
    bitClear(MBIT_MI_MAGICKITEM);
    bitClear(MBIT_MI_PELPELBUKI);
    bitClear(MBIT_MI_DEVIL1);
    bitClear(MBIT_MI_DEVIL2);
    bitClear(MBIT_MI_DEVIL3);
    bitClear(MBIT_MI_DEVIL4);
    bitClear(MBIT_MI_DEVIL5);
    bitClear(MBIT_MI_DEVIL6);
    bitClear(MBIT_MI_DEVIL7);
    bitClear(MBIT_MI_DEVIL8);
    bitClear(MBIT_MI_DEVIL9);
    bitClear(MBIT_MI_DEVIL10);
    bitClear(MBIT_MI_DENNSETU);
    bitClear(MBIT_MI_NANJOTOUJO);
    bitClear(MBIT_MI_HANAKOTOBA);
    bitClear(MBIT_MI_TATUNOSIN);
    bitClear(MBIT_MI_MAIHIME);
    bitClear(MBIT_MI_ZODI2F);
    bitClear(MBIT_MI_GYPSTART);
    b(label_3f2);
  label_3f0:
    bne(var_0, 1, label_3f2);
    b(label_3f2);
  label_3f2:
    controlEnable();
    b(label_4e3);
  label_3f4:
    ref_3f4 = bustupLoad(bustup_f1);
    bustupWait(ref_3f4);
    ref_3f6 = bustupAlloc(ref_3f4, right, rgb(0,0,0));
    bustupFade(ref_3f6, rgb(128,0,0), 30);
    ref_3f8 = dialogAlloc();
    ref_3f9 = msgShow(msg_39);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]I’m sorry... I’ve caught a cold
[tab]and I can’t smell anything...
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]Even though I feel this special connection
[tab]with you I’m unable to offer a nice scent.
[tab]I need to rest a little while...
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_3f9);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_3f8);
    ref_3fe = bustupFade(ref_3f6, rgb(0,0,0), 10);
    bustupWait(ref_3fe);
    bustupFree(ref_3f6);
    bitGet(var_0, MBIT_GAT_URARA_01);
    bne(var_0, 0, label_44c);
    bitSet(MBIT_GAT_URARA_01);
    bitSet(TBIT_HE_KB);
    bitSet(TBIT_101);
    bitSet(TBIT_102);
    bitSet(TBIT_103);
    bitSet(TBIT_201);
    bitSet(TBIT_202);
    bitSet(TBIT_203);
    bitSet(TBIT_301);
    bitSet(TBIT_302);
    bitSet(TBIT_303);
    bitSet(TBIT_401);
    bitSet(TBIT_402);
    bitSet(TBIT_403);
    bitSet(TBIT_501);
    bitSet(TBIT_502);
    bitSet(TBIT_503);
    bitSet(TBIT_601);
    bitSet(TBIT_602);
    bitClear(TBIT_HE_RA);
    bitClear(TBIT_HE_RB);
    bitClear(MBIT_MI_MONSYOU);
    bitClear(MBIT_MI_ROSAHEN_A);
    bitClear(MBIT_MI_ROSAHEN_B);
    bitClear(MBIT_MI_KAOHEN_A);
    bitClear(MBIT_MI_KAOHEN_B);
    bitClear(MBIT_MI_JIKANSELL);
    bitClear(MBIT_MI_JIKANDUP);
    bitClear(MBIT_MI_KAORIAROMA);
    bitClear(MBIT_MI_KAORIHENNI);
    bitClear(MBIT_MI_SIRAMAN);
    bitClear(MBIT_MI_SIRAHENNI);
    bitClear(MBIT_MI_TOAARM);
    bitClear(MBIT_MI_TONYITEM);
    bitClear(MBIT_MI_MUSLOT);
    bitClear(MBIT_MI_GIGACD1);
    bitClear(MBIT_MI_GIGACD2);
    bitClear(MBIT_MI_BARARM);
    bitClear(MBIT_MI_BARHENNI);
    bitClear(MBIT_MI_ROSADEF);
    bitClear(MBIT_MI_ROSAHENNI);
    bitClear(MBIT_MI_ETEESTHE);
    bitClear(MBIT_MI_ETEHENNI);
    bitClear(MBIT_MI_GYPAISHO1);
    bitClear(MBIT_MI_GYPAISHO2);
    bitClear(MBIT_MI_CLEARM);
    bitClear(MBIT_MI_CLEAOBA);
    bitClear(MBIT_MI_JEWDEVE);
    bitClear(MBIT_MI_JEWKOUNAN);
    bitClear(MBIT_MI_SKYMAP);
    bitClear(MBIT_MI_TRISHOKUJI);
    bitClear(MBIT_MI_TRIKAISIN);
    bitClear(MBIT_MI_BATOLUBUKI);
    bitClear(MBIT_MI_MAGICKITEM);
    bitClear(MBIT_MI_PELPELBUKI);
    bitClear(MBIT_MI_DEVIL1);
    bitClear(MBIT_MI_DEVIL2);
    bitClear(MBIT_MI_DEVIL3);
    bitClear(MBIT_MI_DEVIL4);
    bitClear(MBIT_MI_DEVIL5);
    bitClear(MBIT_MI_DEVIL6);
    bitClear(MBIT_MI_DEVIL7);
    bitClear(MBIT_MI_DEVIL8);
    bitClear(MBIT_MI_DEVIL9);
    bitClear(MBIT_MI_DEVIL10);
    bitClear(MBIT_MI_DENNSETU);
    bitClear(MBIT_MI_NANJOTOUJO);
    bitClear(MBIT_MI_HANAKOTOBA);
    bitClear(MBIT_MI_TATUNOSIN);
    bitClear(MBIT_MI_MAIHIME);
    bitClear(MBIT_MI_ZODI2F);
    bitClear(MBIT_MI_GYPSTART);
    b(label_44e);
  label_44c:
    bne(var_0, 1, label_44e);
    b(label_44e);
  label_44e:
    controlEnable();
    b(label_4e3);
  label_450:
    ref_450 = bustupLoad(bustup_f1);
    bustupWait(ref_450);
    ref_452 = bustupAlloc(ref_450, right, rgb(0,0,0));
    bustupFade(ref_452, rgb(128,0,0), 30);
    ref_454 = dialogAlloc();
    ref_455 = msgShow(msg_40);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Welcome to my shop.

[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_455);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_454);
    ref_45a = bustupFade(ref_452, rgb(0,0,0), 10);
    bustupWait(ref_45a);
    bustupFree(ref_452);
    shopRate(100);
    bitGet(var_0, MBIT_HI_KAORIAROMA);
    bne(var_0, 0, label_461);
    b(label_46a);
  label_461:
    bne(var_0, 1, label_46a);
    bitGet(var_0, MBIT_KAORIZOUKA);
    bne(var_0, 0, label_466);
    shopInventory(22, shopInventory_0);
    b(label_469);
  label_466:
    bne(var_0, 1, label_469);
    shopInventory(22, shopInventory_1);
    b(label_469);
  label_469:
    b(label_46a);
  label_46a:
    b(label_485);
  label_46b:
    ref_46b = bustupLoad(bustup_f1);
    bustupWait(ref_46b);
    ref_46d = bustupAlloc(ref_46b, right, rgb(0,0,0));
    bustupFade(ref_46d, rgb(128,0,0), 30);
    ref_46f = dialogAlloc();
    ref_470 = msgShow(msg_41);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]I sense... a mysterious scent from you.
[tab]A heartwarming, gentle smell...
[tab]I will reconsider the prices for you.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_470);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_46f);
    ref_475 = bustupFade(ref_46d, rgb(0,0,0), 10);
    bustupWait(ref_475);
    bustupFree(ref_46d);
    shopRate(80);
    bitGet(var_0, MBIT_HI_KAORIAROMA);
    bne(var_0, 0, label_47c);
    b(label_485);
  label_47c:
    bne(var_0, 1, label_485);
    bitGet(var_0, MBIT_KAORIZOUKA);
    bne(var_0, 0, label_481);
    shopInventory(22, shopInventory_0);
    b(label_484);
  label_481:
    bne(var_0, 1, label_484);
    shopInventory(22, shopInventory_1);
    b(label_484);
  label_484:
    b(label_485);
  label_485:
    bitGet(var_0, MBIT_HI_KAORIAROMA);
    bne(var_0, 0, label_4b3);
    choiceSetResult(2);
    op_105(3);
    ref_489 = bustupLoad(bustup_f1);
    bustupWait(ref_489);
    ref_48b = bustupAlloc(ref_489, right, rgb(0,0,0));
    bustupFade(ref_48b, rgb(128,0,0), 30);
    ref_48d = dialogAlloc();
    ref_48e = msgShow(msg_42);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]What fragrance have you come for today?
[choice(4)]Heal
Talk to Miss Kaori
Never mind
Leave
[end_choice][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_48e);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    choiceGetResult(var_0);
    bne(var_0, 0, label_496);
    li(var_5, 0);
    b(label_4ac);
  label_496:
    bne(var_0, 1, label_4a6);
    choiceSetResult(2);
    op_105(2);
    ref_499 = msgShow(msg_43);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]And what do you propose we speak of?
[choice(2)]Make small talk
Ask about the shop
[if_all(EBIT_SINARIOFF)]Hidden items
[end_choice][clear]
***************************************/
    wait(ref_499);
    choiceGetResult(var_0);
    bne(var_0, 0, label_49f);
    li(var_5, 1);
    b(label_4a5);
  label_49f:
    bne(var_0, 1, label_4a2);
    li(var_5, 2000);
    b(label_4a5);
  label_4a2:
    bne(var_0, 2, label_4a5);
    li(var_5, 1000);
    b(label_4a5);
  label_4a5:
    b(label_4ac);
  label_4a6:
    bne(var_0, 2, label_4a9);
    li(var_5, 2);
    b(label_4ac);
  label_4a9:
    bne(var_0, 3, label_4ac);
    li(var_5, 3);
    b(label_4ac);
  label_4ac:
    dialogFree(ref_48d);
    ref_4ad = bustupFade(ref_48b, rgb(0,0,0), 10);
    bustupWait(ref_4ad);
    bustupFree(ref_48b);
    ref_4b0 = shopOpen(11);
    wait(ref_4b0);
    b(label_4e3);
  label_4b3:
    bne(var_0, 1, label_4e3);
    choiceSetResult(3);
    op_105(3);
    ref_4b6 = bustupLoad(bustup_f1);
    bustupWait(ref_4b6);
    ref_4b8 = bustupAlloc(ref_4b6, right, rgb(0,0,0));
    bustupFade(ref_4b8, rgb(128,0,0), 30);
    ref_4ba = dialogAlloc();
    ref_4bb = msgShow(msg_44);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]What fragrance have you come for today?
[choice(4)]Heal
Aromatherapy
Talk to Miss Kaori
Never mind
Leave
[end_choice][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_4bb);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    choiceGetResult(var_0);
    bne(var_0, 0, label_4c3);
    li(var_5, 0);
    b(label_4dc);
  label_4c3:
    bne(var_0, 1, label_4c6);
    li(var_5, 1);
    b(label_4dc);
  label_4c6:
    bne(var_0, 2, label_4d6);
    choiceSetResult(2);
    op_105(2);
    ref_4c9 = msgShow(msg_45);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]And what do you propose we speak of?
[choice(2)]Make small talk
Ask about the shop
[if_all(EBIT_SINARIOFF)]Hidden items
[end_choice][clear]
***************************************/
    wait(ref_4c9);
    choiceGetResult(var_0);
    bne(var_0, 0, label_4cf);
    li(var_5, 2);
    b(label_4d5);
  label_4cf:
    bne(var_0, 1, label_4d2);
    li(var_5, 2000);
    b(label_4d5);
  label_4d2:
    bne(var_0, 2, label_4d5);
    li(var_5, 1000);
    b(label_4d5);
  label_4d5:
    b(label_4dc);
  label_4d6:
    bne(var_0, 3, label_4d9);
    li(var_5, 3);
    b(label_4dc);
  label_4d9:
    bne(var_0, 4, label_4dc);
    li(var_5, 4);
    b(label_4dc);
  label_4dc:
    dialogFree(ref_4ba);
    ref_4dd = bustupFade(ref_4b8, rgb(0,0,0), 10);
    bustupWait(ref_4dd);
    bustupFree(ref_4b8);
    ref_4e0 = shopOpen(3);
    wait(ref_4e0);
    b(label_4e3);
  label_4e3:
}

function HA_SHOP_RESTART_0()
{
    bitGet(var_0, MBIT_HI_KAORIAROMA);
    bne(var_0, 0, label_510);
    choiceSetResult(2);
    op_105(3);
    ref_4e8 = bustupLoad(bustup_f1);
    bustupWait(ref_4e8);
    ref_4ea = bustupAlloc(ref_4e8, right, rgb(0,0,0));
    bustupFade(ref_4ea, rgb(128,0,0), 30);
    ref_4ec = dialogAlloc();
    ref_4ed = msgShow(msg_46);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Is there anything else I can help you with?
[choice(4)]Heal
Talk to Miss Kaori
Never mind
Leave
[end_choice][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_4ed);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    choiceGetResult(var_0);
    bne(var_0, 0, label_4f5);
    li(var_5, 0);
    b(label_50b);
  label_4f5:
    bne(var_0, 1, label_505);
    choiceSetResult(2);
    op_105(2);
    ref_4f8 = msgShow(msg_47);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]And what do you propose we speak of?
[choice(2)]Make small talk
Ask about the shop
[if_all(EBIT_SINARIOFF)]Hidden items
[end_choice][clear]
***************************************/
    wait(ref_4f8);
    choiceGetResult(var_0);
    bne(var_0, 0, label_4fe);
    li(var_5, 1);
    b(label_504);
  label_4fe:
    bne(var_0, 1, label_501);
    li(var_5, 2000);
    b(label_504);
  label_501:
    bne(var_0, 2, label_504);
    li(var_5, 1000);
    b(label_504);
  label_504:
    b(label_50b);
  label_505:
    bne(var_0, 2, label_508);
    li(var_5, 2);
    b(label_50b);
  label_508:
    bne(var_0, 3, label_50b);
    li(var_5, 3);
    b(label_50b);
  label_50b:
    dialogFree(ref_4ec);
    ref_50c = bustupFade(ref_4ea, rgb(0,0,0), 10);
    bustupWait(ref_50c);
    bustupFree(ref_4ea);
    b(label_53e);
  label_510:
    bne(var_0, 1, label_53e);
    choiceSetResult(3);
    op_105(3);
    ref_513 = bustupLoad(bustup_f1);
    bustupWait(ref_513);
    ref_515 = bustupAlloc(ref_513, right, rgb(0,0,0));
    bustupFade(ref_515, rgb(128,0,0), 30);
    ref_517 = dialogAlloc();
    ref_518 = msgShow(msg_48);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Is there anything else I can help you with?
[choice(4)]Heal
Aromatherapy
Talk to Miss Kaori
Never mind
Leave
[end_choice][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_518);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    choiceGetResult(var_0);
    bne(var_0, 0, label_520);
    li(var_5, 0);
    b(label_539);
  label_520:
    bne(var_0, 1, label_523);
    li(var_5, 1);
    b(label_539);
  label_523:
    bne(var_0, 2, label_533);
    choiceSetResult(2);
    op_105(2);
    ref_526 = msgShow(msg_49);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]And what do you propose we speak of?
[choice(2)]Make small talk
Ask about the shop
[if_all(EBIT_SINARIOFF)]Hidden items
[end_choice][clear]
***************************************/
    wait(ref_526);
    choiceGetResult(var_0);
    bne(var_0, 0, label_52c);
    li(var_5, 2);
    b(label_532);
  label_52c:
    bne(var_0, 1, label_52f);
    li(var_5, 2000);
    b(label_532);
  label_52f:
    bne(var_0, 2, label_532);
    li(var_5, 1000);
    b(label_532);
  label_532:
    b(label_539);
  label_533:
    bne(var_0, 3, label_536);
    li(var_5, 3);
    b(label_539);
  label_536:
    bne(var_0, 4, label_539);
    li(var_5, 4);
    b(label_539);
  label_539:
    dialogFree(ref_517);
    ref_53a = bustupFade(ref_515, rgb(0,0,0), 10);
    bustupWait(ref_53a);
    bustupFree(ref_515);
    b(label_53e);
  label_53e:
}

function HA_SHOP_TALK_0()
{
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_58f);
    bitGet(var_0, EBIT_E0046);
    bnz(var_0, label_581);
    bitGet(var_0, EBIT_E0043);
    bnz(var_0, label_573);
    bitGet(var_0, EBIT_E003E);
    bnz(var_0, label_565);
    bitGet(var_0, EBIT_E0018);
    bnz(var_0, label_557);
    ref_549 = bustupLoad(bustup_f1);
    bustupWait(ref_549);
    ref_54b = bustupAlloc(ref_549, right, rgb(0,0,0));
    bustupFade(ref_54b, rgb(128,0,0), 30);
    ref_54d = dialogAlloc();
    ref_54e = msgShow(msg_50);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Scents have different effects.
[tab]Not only do they soothe the soul,
[tab]but they can also help illnesses.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_54e);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_54d);
    ref_553 = bustupFade(ref_54b, rgb(0,0,0), 10);
    bustupWait(ref_553);
    bustupFree(ref_54b);
    b(label_59c);
  label_557:
    ref_557 = bustupLoad(bustup_f1);
    bustupWait(ref_557);
    ref_559 = bustupAlloc(ref_557, right, rgb(0,0,0));
    bustupFade(ref_559, rgb(128,0,0), 30);
    ref_55b = dialogAlloc();
    ref_55c = msgShow(msg_51);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]If you are irritable, I recommend
[tab]ylang ylang, or lavender, or jasmine.
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]Ylang ylang calms your heart, 
[tab]jasmine will take away your depression...
[tab]I hope you have a nice day.[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_55c);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_55b);
    ref_561 = bustupFade(ref_559, rgb(0,0,0), 10);
    bustupWait(ref_561);
    bustupFree(ref_559);
    b(label_59c);
  label_565:
    ref_565 = bustupLoad(bustup_f1);
    bustupWait(ref_565);
    ref_567 = bustupAlloc(ref_565, right, rgb(0,0,0));
    bustupFade(ref_567, rgb(128,0,0), 30);
    ref_569 = dialogAlloc();
    ref_56a = msgShow(msg_52);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]If you tend to feel down, 
[tab]I recommend lavender or rosemary.
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]Lavender stabilizes your feelings and
[tab]rosemary will uplift your spirit.
[tab]I hope you have a nice day.[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_56a);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_569);
    ref_56f = bustupFade(ref_567, rgb(0,0,0), 10);
    bustupWait(ref_56f);
    bustupFree(ref_567);
    b(label_59c);
  label_573:
    ref_573 = bustupLoad(bustup_f1);
    bustupWait(ref_573);
    ref_575 = bustupAlloc(ref_573, right, rgb(0,0,0));
    bustupFade(ref_575, rgb(128,0,0), 30);
    ref_577 = dialogAlloc();
    ref_578 = msgShow(msg_53);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]If you have a hard time concentrating
[tab]I recommend peppermint or eucalyptus.
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]Peppermint will refresh your senses.
[tab]Eucalyptus will help your concentration.
[tab]I hope you have a nice day.[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_578);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_577);
    ref_57d = bustupFade(ref_575, rgb(0,0,0), 10);
    bustupWait(ref_57d);
    bustupFree(ref_575);
    b(label_59c);
  label_581:
    ref_581 = bustupLoad(bustup_f1);
    bustupWait(ref_581);
    ref_583 = bustupAlloc(ref_581, right, rgb(0,0,0));
    bustupFade(ref_583, rgb(128,0,0), 30);
    ref_585 = dialogAlloc();
    ref_586 = msgShow(msg_54);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]If you are worrisome, 
[tab]I recommend geranium and neroli.
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]Geranium stabilizes your mind.
[tab]Neroli will brighten your spirits.
[tab]I hope you have a nice day.[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_586);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_585);
    ref_58b = bustupFade(ref_583, rgb(0,0,0), 10);
    bustupWait(ref_58b);
    bustupFree(ref_583);
    b(label_59c);
  label_58f:
    ref_58f = bustupLoad(bustup_f1);
    bustupWait(ref_58f);
    ref_591 = bustupAlloc(ref_58f, right, rgb(0,0,0));
    bustupFade(ref_591, rgb(128,0,0), 30);
    ref_593 = dialogAlloc();
    ref_594 = msgShow(msg_55);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]If you are looking for love,
[tab]I recommend clary sage and sandalwood.
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]Clary sage makes you feel fulfilled and happy. 
[tab]Sandalwood calms you down.
[tab]I hope you have a good day.[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_594);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_593);
    ref_599 = bustupFade(ref_591, rgb(0,0,0), 10);
    bustupWait(ref_599);
    bustupFree(ref_591);
  label_59c:
}

function HA_SHOP_END_0()
{
    ref_59d = bustupLoad(bustup_f1);
    bustupWait(ref_59d);
    ref_59f = bustupAlloc(ref_59d, right, rgb(0,0,0));
    bustupFade(ref_59f, rgb(128,0,0), 30);
    ref_5a1 = dialogAlloc();
    ref_5a2 = msgShow(msg_56);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Please come again.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_5a2);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    ref_5a6 = bustupFade(ref_59f, rgb(0,0,0), 10);
    bustupWait(ref_5a6);
    bustupFree(ref_59f);
    shopOverlayInit();
    dialogFree(ref_5a1);
    delayClear();
    delayWait(10);
    bitSet(MBIT_KAORIRIYOU);
    bitGet(var_0, MBIT_EXITBIT);
    bne(var_0, 0, label_5b3);
    unitRestoreFacing(shopkeeper);
    controlEnable();
    b(label_5b6);
  label_5b3:
    bne(var_0, 1, label_5b6);
    call(GOOUT);
    b(label_5b6);
  label_5b6:
}

function HA_SHOP_HEAL_0()
{
    ref_5b7 = call(KAIFUKUSURUBEKI);
    wait(ref_5b7);
    bitGet(var_1, LBIT_0000);
    bne(var_1, 0, label_5ca);
    ref_5bb = bustupLoad(bustup_f1);
    bustupWait(ref_5bb);
    ref_5bd = bustupAlloc(ref_5bb, right, rgb(0,0,0));
    bustupFade(ref_5bd, rgb(128,0,0), 30);
    ref_5bf = dialogAlloc();
    ref_5c0 = msgShow(msg_57);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]My...[delay(15)]
[tab]You all seem very healthy. [delay(15)]
[tab]You do not need treatment.[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_5c0);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_5bf);
    ref_5c5 = bustupFade(ref_5bd, rgb(0,0,0), 10);
    bustupWait(ref_5c5);
    bustupFree(ref_5bd);
    b(label_659);
    b(label_5fc);
  label_5ca:
    bne(var_1, 1, label_5fc);
    ref_5cb = bustupLoad(bustup_f1);
    bustupWait(ref_5cb);
    ref_5cd = bustupAlloc(ref_5cb, right, rgb(0,0,0));
    bustupFade(ref_5cd, rgb(128,0,0), 30);
    ref_5cf = dialogAlloc();
    bitGet(var_0, MBIT_AIS_47);
    bne(var_0, 0, label_5d7);
    shopInventory(3, shopInventory_-bb8);
    ref_5d3 = msgShow(msg_58);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Okay...
[tab]That will be ¥3000 for everyone...
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_5d3);
    b(label_5dd);
  label_5d7:
    bne(var_0, 1, label_5dd);
    shopInventory(3, shopInventory_-5dc);
    ref_5d9 = msgShow(msg_59);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Since you’re my special customers...
[tab]I’ll make it half that, ¥1500.[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_5d9);
    b(label_5dd);
  label_5dd:
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_5cf);
    ref_5df = bustupFade(ref_5cd, rgb(0,0,0), 10);
    bustupWait(ref_5df);
    bustupFree(ref_5cd);
    choiceSetResult(1);
    op_105(1);
    ref_5e4 = bustupLoad(bustup_1);
    bustupWait(ref_5e4);
    ref_5e6 = bustupAlloc(ref_5e4, center, rgb(0,0,0));
    bustupFade(ref_5e6, rgb(128,0,0), 30);
    ref_5e8 = dialogChoiceAlloc();
    shopCurrencyType(8, -110, 150);
    shopCurrencyDisplay(13, 150, false);
    ref_5eb = msgShow(msg_60);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Would you like it?
[choice(2)]Yes
No
[end_choice][clear]
***************************************/
    wait(ref_5eb);
    dialogFree(ref_5e8);
    ref_5ee = bustupFade(ref_5e6, rgb(0,0,0), 10);
    bustupWait(ref_5ee);
    bustupFree(ref_5e6);
    choiceGetResult(var_0);
    bne(var_0, 0, label_5f5);
    b(label_5fc);
    b(label_5fb);
  label_5f5:
    bne(var_0, 1, label_5fb);
    shopCurrencyDisplay(-110, 150, true);
    delayClear();
    delayWait(30);
    b(label_659);
    b(label_5fb);
  label_5fb:
    b(label_5fc);
  label_5fc:
    bitGet(var_0, MBIT_AIS_47);
    bne(var_0, 0, label_607);
    partyMoneyGet(var_2);
    boutrange(var_2, 0, 2999, label_602);
    b(label_64b);
    b(label_606);
  label_602:
    partyMoneyAdd(-3000);
    ref_603 = call(KAIFUKUMESS);
    wait(ref_603);
    b(label_606);
  label_606:
    b(label_611);
  label_607:
    bne(var_0, 1, label_611);
    partyMoneyGet(var_2);
    boutrange(var_2, 0, 1499, label_60c);
    b(label_64b);
    b(label_610);
  label_60c:
    partyMoneyAdd(-1500);
    ref_60d = call(KAIFUKUMESS);
    wait(ref_60d);
    b(label_610);
  label_610:
    b(label_611);
  label_611:
    screenEffectInit();
    screenFade(160, 120, rgb(0,0,0), rgb(0,0,0), add);
    screenFadeInner(rgb(255,255,255), 8, false);
    screenFadeOuter(rgb(255,255,255), 8, false);
    screenFadeWait(inner);
    screenFadeWait(outer);
    sndMusicPlay(sound_3, 127);
    partyHealthRestore(maya);
    partySPRestore(maya);
    partyStatusClear(maya);
    partyMemberCheck(var_3, ulala);
    bez(var_3, label_620);
    partyHealthRestore(ulala);
    partySPRestore(ulala);
    partyStatusClear(ulala);
  label_620:
    partyMemberCheck(var_3, katsuya);
    bez(var_3, label_625);
    partyHealthRestore(katsuya);
    partySPRestore(katsuya);
    partyStatusClear(katsuya);
  label_625:
    partyMemberCheck(var_3, baofu);
    bez(var_3, label_62a);
    partyHealthRestore(baofu);
    partySPRestore(baofu);
    partyStatusClear(baofu);
  label_62a:
    partyMemberCheck(var_3, nanjo);
    bez(var_3, label_62f);
    partyHealthRestore(nanjo);
    partySPRestore(nanjo);
    partyStatusClear(nanjo);
  label_62f:
    partyMemberCheck(var_3, elly);
    bez(var_3, label_634);
    partyHealthRestore(elly);
    partySPRestore(elly);
    partyStatusClear(elly);
  label_634:
    partyMemberCheck(var_3, tatsuya);
    bez(var_3, label_639);
    partyHealthRestore(tatsuya);
    partySPRestore(tatsuya);
    partyStatusClear(tatsuya);
  label_639:
    screenFade(160, 120, rgb(255,255,255), rgb(255,255,255), add);
    screenFadeInner(rgb(0,0,0), 8, true);
    screenFadeOuter(rgb(0,0,0), 8, true);
    screenEffectUnknown();
    screenFadeWait(inner);
    screenFadeWait(outer);
    ref_63f = bustupLoad(bustup_1);
    bustupWait(ref_63f);
    ref_641 = bustupAlloc(ref_63f, center, rgb(0,0,0));
    bustupFade(ref_641, rgb(128,0,0), 30);
    ref_643 = dialogAlloc();
    ref_644 = msgShow(msg_61);
/***************************************
[color(green)]Maya’s party recovered.[color(white)]
[wait][clear]
***************************************/
    wait(ref_644);
    dialogFree(ref_643);
    ref_647 = bustupFade(ref_641, rgb(0,0,0), 10);
    bustupWait(ref_647);
    bustupFree(ref_641);
    b(label_659);
  label_64b:
    ref_64b = bustupLoad(bustup_f1);
    bustupWait(ref_64b);
    ref_64d = bustupAlloc(ref_64b, right, rgb(0,0,0));
    bustupFade(ref_64d, rgb(128,0,0), 30);
    ref_64f = dialogAlloc();
    ref_650 = msgShow(msg_62);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Excuse me...
[tab]But you don’t have enough money...
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_650);
    shopCurrencyDisplay(-110, 150, true);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_64f);
    ref_656 = bustupFade(ref_64d, rgb(0,0,0), 10);
    bustupWait(ref_656);
    bustupFree(ref_64d);
  label_659:
}

function WAKAMONO()
{
    controlDisable();
    bitGet(var_0, MBIT_SH_S_03);
    bne(var_0, 0, label_65e);
    b(label_66b);
  label_65e:
    bne(var_0, 1, label_66b);
    bitGet(var_0, MBIT_SH_H_03);
    bne(var_0, 0, label_668);
    bitGet(var_0, MBIT_MURATA_GET);
    bne(var_0, 0, label_665);
    b(label_66c);
    b(label_667);
  label_665:
    bne(var_0, 1, label_667);
    b(label_667);
  label_667:
    b(label_66a);
  label_668:
    bne(var_0, 1, label_66a);
    b(label_66a);
  label_66a:
    b(label_66b);
  label_66b:
    b(label_6b7);
  label_66c:
    add(var_a, var_a, 1);
    boutrange(var_a, 0, 1, label_670);
    b(label_674);
    b(label_674);
  label_670:
    bne(var_a, 2, label_674);
    sub(var_a, var_a, 2);
    b(label_67d);
    b(label_674);
  label_674:
    unitFacePlayer(npc1);
    ref_675 = dialogAlloc();
    ref_676 = msgShow(msg_63);
/***************************************
[color(yellow)]Young Guy[color(white)]
[tab](sigh)...
[tab]I want to tell Miss Kaori my feelings...
[tab]But it’s no use...
[wait][clear][color(yellow)]Young Guy[color(white)]
[tab]I bet she keeps this shop open because
[tab]she can’t forget about her husband...
[tab]I have no right to say anything...
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_24, 1);
    wait(ref_676);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_675);
    unitRestoreFacing(npc1);
    b(label_707);
  label_67d:
    unitFacePlayer(npc1);
    ref_67e = dialogAlloc();
    ref_67f = msgShow(msg_64);
/***************************************
[color(yellow)]Young Guy[color(white)]
[tab]Oh... you’re still here.
[tab]Do you want something from me?
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_24, 1);
    wait(ref_67f);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_67e);
    choiceSetResult(2);
    op_105(2);
    ref_686 = bustupLoad(bustup_1);
    bustupWait(ref_686);
    ref_688 = bustupAlloc(ref_686, center, rgb(0,0,0));
    bustupFade(ref_688, rgb(128,0,0), 30);
    ref_68a = dialogChoiceAlloc();
    ref_68b = msgShow(msg_65);
/***************************************
[tab]Do you want something from me?
[choice(3)]Guess name
Talk
Nothing
[end_choice][clear]
***************************************/
    ref_68c = textInputInit();
    wait(ref_68b);
    dialogFree(ref_68a);
    ref_68f = bustupFade(ref_688, rgb(0,0,0), 10);
    bustupWait(ref_68f);
    bustupFree(ref_688);
    wait(ref_68c);
    choiceGetResult(var_0);
    bne(var_0, 0, label_697);
    b(label_69f);
    b(label_69e);
  label_697:
    bne(var_0, 1, label_69b);
    unitRestoreFacing(npc1);
    b(label_6b7);
    b(label_69e);
  label_69b:
    bne(var_0, 2, label_69e);
    unitRestoreFacing(npc1);
    b(label_69e);
  label_69e:
    b(label_707);
  label_69f:
    ref_69f = textInputPrompt();
    wait(ref_69f);
    textInputCompare(msg_66, var_0);
    bne(var_0, 0, label_6ab);
    ref_6a3 = dialogAlloc();
    ref_6a4 = msgShow(msg_67);
/***************************************
[color(yellow)]Young Guy[color(white)]
[tab]Huh? Who’s that?
[tab]That’s not me...
[tab]You must be thinking of someone else...
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_24, 1);
    wait(ref_6a4);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_6a3);
    unitRestoreFacing(npc1);
    b(label_6b6);
  label_6ab:
    bne(var_0, 1, label_6b6);
    ref_6ac = dialogAlloc();
    ref_6ad = msgShow(msg_68);
/***************************************
[color(yellow)]Young Guy[color(white)]
[tab]Eh?
[tab]How do you know my name?
[tab]Have I introduced myself to you?
[wait][clear][color(yellow)]Takuya Murata[color(white)]
[tab]A search request? For me?
[tab]Must be my younger sister...
[tab]She should mind her own business!
[wait][clear][color(yellow)]Takuya Murata[color(white)]
[tab]Well thanks for letting me know.
[tab]I’ll contact her and Shiraishi.
[tab]Thanks for all your trouble.
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_24, 1);
    wait(ref_6ad);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_6ac);
    bitSet(MBIT_SH_HH);
    bitSet(MBIT_MURATA_GET);
    unitRestoreFacing(npc1);
    b(label_6b6);
  label_6b6:
    b(label_707);
  label_6b7:
    bitGet(var_0, EBIT_E0038);
    bnz(var_0, label_6f8);
    bitGet(var_0, EBIT_E0033);
    bnz(var_0, label_6dd);
    bitGet(var_0, EBIT_E0018);
    bnz(var_0, label_6cd);
    unitFacePlayer(npc1);
    ref_6be = dialogAlloc();
    bitGet(var_0, MBIT_MURATA_GET);
    bne(var_0, 0, label_6c3);
    msgShow(msg_69);
/***************************************
[color(yellow)]Young Guy[color(white)]

***************************************/
    b(label_6c6);
  label_6c3:
    bne(var_0, 1, label_6c6);
    msgShow(msg_70);
/***************************************
[color(yellow)]Takuya Murata[color(white)]

***************************************/
    b(label_6c6);
  label_6c6:
    ref_6c6 = msgShow(msg_71);
/***************************************
[tab]Miss Kaori’s husband died five years ago...
[tab]She’s been keeping this shop open
[tab]all by herself since then.
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_24, 1);
    wait(ref_6c6);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_6be);
    unitRestoreFacing(npc1);
    b(label_707);
  label_6cd:
    unitFacePlayer(npc1);
    ref_6ce = dialogAlloc();
    bitGet(var_0, MBIT_MURATA_GET);
    bne(var_0, 0, label_6d3);
    msgShow(msg_72);
/***************************************
[color(yellow)]Young Guy[color(white)]

***************************************/
    b(label_6d6);
  label_6d3:
    bne(var_0, 1, label_6d6);
    msgShow(msg_73);
/***************************************
[color(yellow)]Takuya Murata[color(white)]

***************************************/
    b(label_6d6);
  label_6d6:
    ref_6d6 = msgShow(msg_74);
/***************************************
[tab]Huh? Why am I always here?
[tab]I-It’s to protect Miss Kaori.
[tab]You know, with the Joker curse and all...
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_24, 1);
    wait(ref_6d6);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_6ce);
    unitRestoreFacing(npc1);
    b(label_707);
  label_6dd:
    unitFacePlayer(npc1);
    ref_6de = dialogAlloc();
    bitGet(var_0, MBIT_MURATA_GET);
    bne(var_0, 0, label_6e3);
    msgShow(msg_75);
/***************************************
[color(yellow)]Young Guy[color(white)]

***************************************/
    b(label_6e6);
  label_6e3:
    bne(var_0, 1, label_6e6);
    msgShow(msg_76);
/***************************************
[color(yellow)]Takuya Murata[color(white)]

***************************************/
    b(label_6e6);
  label_6e6:
    ref_6e6 = msgShow(msg_77);
/***************************************
[tab]Wang Long Chizuru... she’s pretty...
[tab]"Bewitching" was created for
[tab]people like her...
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_24, 1);
    wait(ref_6e6);
    unitAnimationPlay(npc1, animation_0, 1);
    bitGet(var_0, MBIT_MURATA_GET);
    bne(var_0, 0, label_6ee);
    msgShow(msg_78);
/***************************************
[color(yellow)]Young Guy[color(white)]

***************************************/
    b(label_6f1);
  label_6ee:
    bne(var_0, 1, label_6f1);
    msgShow(msg_79);
/***************************************
[color(yellow)]Takuya Murata[color(white)]

***************************************/
    b(label_6f1);
  label_6f1:
    ref_6f1 = msgShow(msg_80);
/***************************************
[tab]! ?
[tab]No! No! My heart belongs to Miss Kaori!
[tab]Ah... I’m so weak willed...
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_25, 1);
    wait(ref_6f1);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_6de);
    unitRestoreFacing(npc1);
    b(label_707);
  label_6f8:
    unitFacePlayer(npc1);
    ref_6f9 = dialogAlloc();
    bitGet(var_0, MBIT_MURATA_GET);
    bne(var_0, 0, label_6fe);
    msgShow(msg_81);
/***************************************
[color(yellow)]Young Guy[color(white)]

***************************************/
    b(label_701);
  label_6fe:
    bne(var_0, 1, label_701);
    msgShow(msg_82);
/***************************************
[color(yellow)]Takuya Murata[color(white)]

***************************************/
    b(label_701);
  label_701:
    ref_701 = msgShow(msg_83);
/***************************************
[tab]I wonder if it’s just my imagination...
[tab]But since Wang Long Chizuru has appeared on
[tab]TV, haven’t the Joker incidents increased?
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_6, 1);
    wait(ref_701);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_6f9);
    unitRestoreFacing(npc1);
  label_707:
    controlEnable();
}

function OBASAN()
{
    controlDisable();
    bitGet(var_0, MBIT_HI_KAORIHENNI);
    bne(var_0, 0, label_71a);
    bitGet(var_0, MBIT_HI_KAORIAROMA);
    bne(var_0, 0, label_710);
    b(label_74e);
    b(label_719);
  label_710:
    bne(var_0, 1, label_719);
    bitGet(var_0, MBIT_MIHAALOMA);
    bne(var_0, 0, label_715);
    b(label_730);
    b(label_718);
  label_715:
    bne(var_0, 1, label_718);
    b(label_74e);
    b(label_718);
  label_718:
    b(label_719);
  label_719:
    b(label_72f);
  label_71a:
    bne(var_0, 1, label_72f);
    bitGet(var_0, MBIT_KAORIZOUKA);
    bne(var_0, 0, label_725);
    bitGet(var_0, MBIT_MIHAKAHENI);
    bne(var_0, 0, label_721);
    b(label_73a);
    b(label_724);
  label_721:
    bne(var_0, 1, label_724);
    b(label_74e);
    b(label_724);
  label_724:
    b(label_72e);
  label_725:
    bne(var_0, 1, label_72e);
    bitGet(var_0, MBIT_MIHAKAHENI);
    bne(var_0, 0, label_72a);
    b(label_744);
    b(label_72d);
  label_72a:
    bne(var_0, 1, label_72d);
    b(label_74e);
    b(label_72d);
  label_72d:
    b(label_72e);
  label_72e:
    b(label_72f);
  label_72f:
    b(label_78f);
  label_730:
    unitFacePlayer(npc2);
    ref_731 = dialogAlloc();
    ref_732 = msgShow(msg_84);
/***************************************
[color(yellow)]Woman[color(white)]
[tab]Do you know?
[tab]They’ve started a new fragrance course here.
[tab]It’s called the "Encounter Aroma".
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_24, 1);
    wait(ref_732);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_731);
    unitRestoreFacing(npc2);
    bitSet(MBIT_MIHAALOMA);
    b(label_78f);
  label_73a:
    unitFacePlayer(npc2);
    ref_73b = dialogAlloc();
    ref_73c = msgShow(msg_85);
/***************************************
[color(yellow)]Woman[color(white)]
[tab]This place was closed for a while.
[tab]I heard that Miss Kaori had a cold.
[tab]She shouldn’t be working so hard.
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_24, 1);
    wait(ref_73c);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_73b);
    unitRestoreFacing(npc2);
    bitSet(MBIT_MIHAKAHENI);
    b(label_78f);
  label_744:
    unitFacePlayer(npc2);
    ref_745 = dialogAlloc();
    ref_746 = msgShow(msg_86);
/***************************************
[color(yellow)]Woman[color(white)]
[tab]This place was closed for a while.
[tab]I heard that Miss Kaori was traveling to
[tab]find a new oil. She’s so dedicated.
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_24, 1);
    wait(ref_746);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_745);
    unitRestoreFacing(npc2);
    bitSet(MBIT_MIHAKAHENI);
    b(label_78f);
  label_74e:
    bitGet(var_0, EBIT_E0038);
    bnz(var_0, label_787);
    bitGet(var_0, EBIT_E0033);
    bnz(var_0, label_77e);
    bitGet(var_0, EBIT_E0018);
    bnz(var_0, label_775);
    bitGet(var_0, MBIT_KATALKOBA02);
    bnz(var_0, label_76c);
    bitGet(var_0, MBIT_KATALKOBA01);
    bnz(var_0, label_762);
    unitFacePlayer(npc2);
    ref_759 = dialogAlloc();
    ref_75a = msgShow(msg_87);
/***************************************
[color(yellow)]Woman[color(white)]
[tab]The aromatherapy here can even cure
[tab]wounds and illnesses! I didn’t believe the
[tab]rumor, but it was true!
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_24, 1);
    wait(ref_75a);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_759);
    unitRestoreFacing(npc2);
    bitSet(MBIT_KATALKOBA01);
    b(label_78f);
  label_762:
    unitFacePlayer(npc2);
    ref_763 = dialogAlloc();
    ref_764 = msgShow(msg_88);
/***************************************
[color(yellow)]Woman[color(white)]
[tab]I wonder if that popular Wang Long
[tab]fortune telling really works?
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_24, 1);
    wait(ref_764);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_763);
    unitRestoreFacing(npc2);
    bitSet(MBIT_KATALKOBA02);
    b(label_78f);
  label_76c:
    unitFacePlayer(npc2);
    ref_76d = dialogAlloc();
    ref_76e = msgShow(msg_89);
/***************************************
[color(yellow)]Woman[color(white)]
[tab]According to Wang Long,
[tab]I seem to be a Light Dragon.
[tab]I’m supposed to be a moral person...
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_24, 1);
    wait(ref_76e);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_76d);
    unitRestoreFacing(npc2);
    b(label_78f);
  label_775:
    unitFacePlayer(npc2);
    ref_776 = dialogAlloc();
    ref_777 = msgShow(msg_90);
/***************************************
[color(yellow)]Woman[color(white)]
[tab]Is it true that Sevens’ Principal was
[tab]killed by the Joker? It’s so close...
[tab]What are the police doing!?
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_26, 1);
    wait(ref_777);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_776);
    unitRestoreFacing(npc2);
    b(label_78f);
  label_77e:
    unitFacePlayer(npc2);
    ref_77f = dialogAlloc();
    ref_780 = msgShow(msg_91);
/***************************************
[color(yellow)]Woman[color(white)]
[tab]The Joker curse is that rumor, huh...
[tab]So does everyone using it become a Joker?
[tab]But isn’t the city filled with them?
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_24, 1);
    wait(ref_780);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_77f);
    unitRestoreFacing(npc2);
    b(label_78f);
  label_787:
    unitFacePlayer(npc2);
    ref_788 = dialogAlloc();
    ref_789 = msgShow(msg_92);
/***************************************
[color(yellow)]Woman[color(white)]
[tab]Hey, have you heard?
[tab]There’s been kidnappings all
[tab]over the city!
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_24, 1);
    wait(ref_789);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_788);
    unitRestoreFacing(npc2);
  label_78f:
    controlEnable();
}

function KAIFUKUMESS()
{
    ref_791 = bustupLoad(bustup_f1);
    bustupWait(ref_791);
    ref_793 = bustupAlloc(ref_791, right, rgb(0,0,0));
    bustupFade(ref_793, rgb(128,0,0), 30);
    ref_795 = dialogAlloc();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_7b4);
    bitGet(var_0, EBIT_E0046);
    bnz(var_0, label_7b0);
    bitGet(var_0, EBIT_E0043);
    bnz(var_0, label_7ac);
    bitGet(var_0, EBIT_E003E);
    bnz(var_0, label_7a8);
    bitGet(var_0, EBIT_E0018);
    bnz(var_0, label_7a4);
    ref_7a0 = msgShow(msg_93);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Today, the scent is ylang ylang...
[tab]The tree of fragrance, ylang ylang...
[tab]The smell makes you feel better.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_7a0);
    b(label_7b7);
  label_7a4:
    ref_7a4 = msgShow(msg_94);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Today, the scent is asphodel.
[tab]This fragrance will set your spirit free
[tab]and send you on another journey.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_7a4);
    b(label_7b7);
  label_7a8:
    ref_7a8 = msgShow(msg_95);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Today, the scent is mandrake.
[tab]The mandrake can take another’s life with
[tab]its screams. Its magic can give you power.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_7a8);
    b(label_7b7);
  label_7ac:
    ref_7ac = msgShow(msg_96);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Today, the scent is lily.
[tab]Lily represents rebirth and immortality.
[tab]This scent will regenerate you.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_7ac);
    b(label_7b7);
  label_7b0:
    ref_7b0 = msgShow(msg_97);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Today, the scent is laurel.
[tab]Laurel represents victory and peace.
[tab]This scent will bring you to immortality.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_7b0);
    b(label_7b7);
  label_7b4:
    ref_7b4 = msgShow(msg_98);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Today, the scent is iris.
[tab]The iris is the flower of the Virgin Mary.
[tab]This scent will empower you with light.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_7b4);
  label_7b7:
    shopCurrencyDisplay(-110, 150, true);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_795);
    ref_7ba = bustupFade(ref_793, rgb(0,0,0), 10);
    bustupWait(ref_7ba);
    bustupFree(ref_793);
}

function KAIFUKUSURUBEKI()
{
    partyStatusHas(var_0, maya, poison);
    bnz(var_0, label_820);
    partyStatusHas(var_0, maya, possesion);
    bnz(var_0, label_820);
    partyInfoGet(var_4, maya, maxHealth);
    partyInfoGet(var_5, maya, health);
    beq(var_4, var_5, label_7c6);
    b(label_820);
  label_7c6:
    partyInfoGet(var_4, maya, maxSP);
    partyInfoGet(var_5, maya, sp);
    beq(var_4, var_5, label_7ca);
    b(label_820);
  label_7ca:
    partyMemberCheck(var_4, ulala);
    bez(var_4, label_7d8);
    partyStatusHas(var_0, ulala, poison);
    bnz(var_0, label_820);
    partyStatusHas(var_0, ulala, possesion);
    bnz(var_0, label_820);
    partyInfoGet(var_4, ulala, maxHealth);
    partyInfoGet(var_5, ulala, health);
    beq(var_4, var_5, label_7d4);
    b(label_820);
  label_7d4:
    partyInfoGet(var_4, ulala, maxSP);
    partyInfoGet(var_5, ulala, sp);
    beq(var_4, var_5, label_7d8);
    b(label_820);
  label_7d8:
    partyMemberCheck(var_4, katsuya);
    bez(var_4, label_7e6);
    partyStatusHas(var_0, katsuya, poison);
    bnz(var_0, label_820);
    partyStatusHas(var_0, katsuya, possesion);
    bnz(var_0, label_820);
    partyInfoGet(var_4, katsuya, maxHealth);
    partyInfoGet(var_5, katsuya, health);
    beq(var_4, var_5, label_7e2);
    b(label_820);
  label_7e2:
    partyInfoGet(var_4, katsuya, maxSP);
    partyInfoGet(var_5, katsuya, sp);
    beq(var_4, var_5, label_7e6);
    b(label_820);
  label_7e6:
    partyMemberCheck(var_4, baofu);
    bez(var_4, label_7f4);
    partyStatusHas(var_0, baofu, poison);
    bnz(var_0, label_820);
    partyStatusHas(var_0, baofu, possesion);
    bnz(var_0, label_820);
    partyInfoGet(var_4, baofu, maxHealth);
    partyInfoGet(var_5, baofu, health);
    beq(var_4, var_5, label_7f0);
    b(label_820);
  label_7f0:
    partyInfoGet(var_4, baofu, maxSP);
    partyInfoGet(var_5, baofu, sp);
    beq(var_4, var_5, label_7f4);
    b(label_820);
  label_7f4:
    partyMemberCheck(var_4, nanjo);
    bez(var_4, label_802);
    partyStatusHas(var_0, nanjo, poison);
    bnz(var_0, label_820);
    partyStatusHas(var_0, nanjo, possesion);
    bnz(var_0, label_820);
    partyInfoGet(var_4, nanjo, maxHealth);
    partyInfoGet(var_5, nanjo, health);
    beq(var_4, var_5, label_7fe);
    b(label_820);
  label_7fe:
    partyInfoGet(var_4, nanjo, maxSP);
    partyInfoGet(var_5, nanjo, sp);
    beq(var_4, var_5, label_802);
    b(label_820);
  label_802:
    partyMemberCheck(var_4, elly);
    bez(var_4, label_810);
    partyStatusHas(var_0, elly, poison);
    bnz(var_0, label_820);
    partyStatusHas(var_0, elly, possesion);
    bnz(var_0, label_820);
    partyInfoGet(var_4, elly, maxHealth);
    partyInfoGet(var_5, elly, health);
    beq(var_4, var_5, label_80c);
    b(label_820);
  label_80c:
    partyInfoGet(var_4, elly, maxSP);
    partyInfoGet(var_5, elly, sp);
    beq(var_4, var_5, label_810);
    b(label_820);
  label_810:
    partyMemberCheck(var_4, tatsuya);
    bez(var_4, label_81e);
    partyStatusHas(var_0, tatsuya, poison);
    bnz(var_0, label_820);
    partyStatusHas(var_0, tatsuya, possesion);
    bnz(var_0, label_820);
    partyInfoGet(var_4, tatsuya, maxHealth);
    partyInfoGet(var_5, tatsuya, health);
    beq(var_4, var_5, label_81a);
    b(label_820);
  label_81a:
    partyInfoGet(var_4, tatsuya, maxSP);
    partyInfoGet(var_5, tatsuya, sp);
    beq(var_4, var_5, label_81e);
    b(label_820);
  label_81e:
    bitClear(LBIT_0000);
    b(label_822);
  label_820:
    bitSet(LBIT_0000);
    b(label_822);
  label_822:
}

function EXITBOX()
{
    controlDisable();
    bitGet(var_0, MBIT_KAOYASUMI01);
    bne(var_0, 0, label_82f);
    bitGet(var_0, MBIT_KAOYASUMI02);
    bne(var_0, 0, label_82b);
    bitSet(MBIT_KAOYASUMI01);
    bitSet(MBIT_KAOYASUMI02);
    b(label_82e);
  label_82b:
    bne(var_0, 1, label_82e);
    bitClear(MBIT_KAOYASUMI);
    b(label_82e);
  label_82e:
    b(label_83a);
  label_82f:
    bne(var_0, 1, label_83a);
    bitGet(var_0, MBIT_KAOYASUMI02);
    bne(var_0, 0, label_835);
    bitClear(MBIT_KAOYASUMI01);
    bitSet(MBIT_KAOYASUMI02);
    b(label_839);
  label_835:
    bne(var_0, 1, label_839);
    bitSet(MBIT_KAOYASUMI01);
    bitClear(MBIT_KAOYASUMI02);
    b(label_839);
  label_839:
    b(label_83a);
  label_83a:
    objAnimRotate(obj_16, 0, -70, 0, 30, 0);
    objAnimRotate(obj_15, 0, 70, 0, 30, 0);
    sndMusicPlay(sound_3068, 127);
    objAnimWait(obj_15);
    objAnimWait(obj_16);
    call(GOOUT);
}

function warp1()
{
    call(EXITBOX);
}

function GOOUT()
{
    bitClear(MBIT_EXITBIT);
    mapLoad(rengedai, 0, 0);
}

function HA_SHOP_EXPLAIN_0()
{
    choiceSetResult(2);
    op_105(7);
    ref_848 = dialogChoiceAlloc();
    ref_849 = msgShow(msg_99);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]What would you like to hear?
[choice(3)]Ask about healing
[if_all(MBIT_HI_KAORIAROMA)]Ask about aromatherapy
Nothing
[end_choice][clear]
***************************************/
    wait(ref_849);
    dialogFree(ref_848);
    choiceGetResult(var_0);
    bne(var_0, 0, label_853);
    ref_84e = dialogAlloc();
    ref_84f = msgShow(msg_100);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Healing it is, then.
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]If you select "Heal" here, your HP, SP, and
[tab]status ailments such as poison will be
[tab]healed through breathing in fragrances.
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]It does cost you, but since the healing aromas
[tab]affect everyone, it’s cheaper in the long run.
[wait][clear]
***************************************/
    wait(ref_84f);
    dialogFree(ref_84e);
    b(label_85b);
  label_853:
    bne(var_0, 1, label_859);
    ref_854 = dialogAlloc();
    ref_855 = msgShow(msg_101);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Aromatherapy?
[tab]If you select "Aromatherapy" here then 
[tab]you’ll be treated with a special "scent".
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]As a result you will attract or repel
[tab]certain people.
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]I heard that the incense has an effect 
[tab]on demons too. I wonder if it’s true.
[wait][clear][color(yellow)]Miss Kaori[color(white)]
[tab]One more thing, you cannot apply a new
[tab]scent until the previous one has worn off.
[wait][clear]
***************************************/
    wait(ref_855);
    dialogFree(ref_854);
    b(label_85b);
  label_859:
    bne(var_0, 2, label_85b);
    b(label_85b);
  label_85b:
}

function DECIDE_EAT()
{
    choiceSetResult(1);
    op_105(1);
    msgVar_Number(msgvar_0, var_6);
    unitFacePlayer(shopkeeper);
    ref_860 = bustupLoad(bustup_f1);
    bustupWait(ref_860);
    ref_862 = bustupAlloc(ref_860, left, rgb(0,0,0));
    bustupFade(ref_862, rgb(128,0,0), 30);
    ref_864 = dialogAlloc();
    choiceSetResult(1);
    op_105(1);
    ref_867 = msgShow(msg_102);
/***************************************
[color(yellow)]Miss Kaori[color(white)]
[tab]Understood. Then it will be a group rate of
[tab]¥[var(msg_var_0)]. Is that all right?
[choice(2)]Yes
No
[end_choice][clear]
***************************************/
    wait(ref_867);
    choiceGetResult(var_7);
    bne(var_7, 0, label_86e);
    sndMusicPlay(sound_3069, 127);
    li(var_7, 1);
    b(label_871);
  label_86e:
    bne(var_7, 1, label_871);
    li(var_7, 0);
    b(label_871);
  label_871:
    wait(ref_867);
    dialogFree(ref_864);
    ref_873 = bustupFade(ref_862, rgb(0,0,0), 10);
    bustupWait(ref_873);
    bustupFree(ref_862);
    li(var_5, 20);
}
