function START()
{
    screenEffectInit();
    screenFade(160, 120, rgb(255,255,255), rgb(255,255,255), sub);
    sndMusicPlay(sound_305c, 127);
    envTriggerSet(DOORBOX, 131, 1, line, coll_3c);
    li(var_0, 0);
    partyMemberCheck(var_0, ulala);
    add(var_5, var_5, var_0);
    bez(var_0, label_c);
    ref_8 = spriteLoad(sprite_6);
    wait(ref_8);
    unitSpawn(ulala, sprite_6, 953, -50, -133, east, none);
    unitTriggerSet(ulala, B_URARATI, 255, 1);
  label_c:
    partyMemberCheck(var_0, katsuya);
    add(var_5, var_5, var_0);
    bez(var_0, label_13);
    ref_f = spriteLoad(sprite_d);
    wait(ref_f);
    unitSpawn(katsuya, sprite_d, 407, -50, -792, south, none);
    unitTriggerSet(katsuya, B_KATUYYY, 255, 1);
  label_13:
    partyMemberCheck(var_0, baofu);
    add(var_5, var_5, var_0);
    bez(var_0, label_1a);
    ref_16 = spriteLoad(sprite_13);
    wait(ref_16);
    unitSpawn(baofu, sprite_13, 956, -50, -570, east, none);
    unitTriggerSet(baofu, B_PAO, 255, 1);
  label_1a:
    partyMemberCheck(var_0, nanjo);
    add(var_5, var_5, var_0);
    bez(var_0, label_21);
    ref_1d = spriteLoad(sprite_1f);
    wait(ref_1d);
    unitSpawn(nanjo, sprite_1f, 46, -50, -497, east, none);
    unitTriggerSet(nanjo, B_NANJ, 255, 1);
  label_21:
    partyMemberCheck(var_0, elly);
    add(var_5, var_5, var_0);
    bez(var_0, label_28);
    ref_24 = spriteLoad(sprite_23);
    wait(ref_24);
    unitSpawn(elly, sprite_23, 410, -50, -525, south, none);
    unitTriggerSet(elly, B_ERI, 255, 1);
  label_28:
    partyMemberCheck(var_0, tatsuya);
    add(var_5, var_5, var_0);
    bez(var_0, label_2f);
    ref_2b = spriteLoad(sprite_18);
    wait(ref_2b);
    unitSpawn(tatsuya, sprite_18, 44, -50, -835, east, none);
    unitTriggerSet(tatsuya, B_TATU, 255, 1);
  label_2f:
    boutrange(var_5, 0, 4, label_32);
    li(var_0, 0);
    b(label_37);
  label_32:
    ref_32 = dialogAlloc();
    ref_33 = msgShow(msg_0);
/***************************************
More than 4 in your party.
It’s hangtime.
Go get Kaneda, Kataoka.
[wait][clear]
***************************************/
    wait(ref_33);
    dialogFree(ref_32);
    b(label_37);
  label_37:
    ref_37 = spriteLoad(sprite_9e);
    wait(ref_37);
    unitSpawn(shopkeeper, sprite_9e, 540, -50, -173, north, none);
    envTriggerSet(SHOP, 14, 1, line, coll_9);
    envTriggerSet(SHOP, 28, 1, line, coll_8);
    envTriggerSet(SHOP, 56, 1, line, coll_7);
    envTriggerSet(SHOP, 28, 1, line, coll_30);
    envTriggerSet(SHOP, 56, 1, line, coll_13);
    envTriggerSet(SHOP, 56, 1, line, coll_12);
    envTriggerSet(SHOP, 112, 1, line, coll_31);
    envTriggerSet(SHOP, 112, 1, line, coll_3a);
    envTriggerSet(SHOP, 56, 1, line, coll_3b);
    bitGet(var_0, EBIT_E003E);
    bnz(var_0, label_4b);
    bitGet(var_0, EBIT_E0038);
    bez(var_0, label_4b);
    ref_47 = spriteLoad(sprite_6a);
    wait(ref_47);
    unitSpawn(makimura, sprite_6a, 725, 0, -1069, west, none);
    unitTriggerSet(makimura, SAGIBOX, 255, 1);
  label_4b:
    ref_4b = spriteLoad(sprite_ca);
    wait(ref_4b);
    unitSpawn(npc1, sprite_ca, 276, -50, -1140, west, none);
    unitTriggerSet(npc1, SEKENHANASI, 255, 1);
    unitPalette(npc1, 2);
    ref_50 = spriteLoad(sprite_c4);
    wait(ref_50);
    unitSpawn(npc2, sprite_c4, 385, -50, -1134, east, none);
    unitPalette(npc2, 2);
    unitTriggerSet(npc2, SEKENHANASI, 255, 1);
    bitGet(var_0, MBIT_JYORI_RIYOU);
    bne(var_0, 0, label_59);
    cameraSet(southeast, 798, 0, -1089);
    b(label_5c);
  label_59:
    bne(var_0, 1, label_5c);
    cameraSet(northwest, 524, -50, -535);
    b(label_5c);
  label_5c:
    ref_5c = spriteLoad(sprite_0);
    wait(ref_5c);
    ref_5e = spriteLoad(sprite_2);
    wait(ref_5e);
    playerInit(south);
    controlDisable();
    screenEffectUnknown();
    screenFadeInner(rgb(0,0,0), 6, true);
    screenFadeOuter(rgb(0,0,0), 6, true);
    unitIdleOnAll();
    screenFadeWait(inner);
    screenFadeWait(outer);
    controlEnable();
}

function B_URARATI()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_b1);
    bitGet(var_0, EBIT_E003E);
    bnz(var_0, label_83);
    unitFacePlayer(ulala);
    ref_70 = bustupLoad(bustup_1d);
    bustupWait(ref_70);
    ref_72 = bustupAlloc(ref_70, left, rgb(0,0,0));
    bustupFade(ref_72, rgb(128,0,0), 30);
    ref_74 = dialogAlloc();
    ref_75 = msgShow(msg_1);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]Ma-ya, what should we do...?
[tab]I asked the barkeeper, and he said that
[tab]there’s a bunch of kids at the museum!
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_2c, 1);
    wait(ref_75);
    unitAnimationPlay(ulala, animation_a, 1);
    ref_79 = msgShow(msg_2);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]What if something happens...
[tab]N... No, No! We’re here to ensure
[tab]it does not happen!
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_2f, 1);
    wait(ref_79);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_74);
    ref_7e = bustupFade(ref_72, rgb(0,0,0), 10);
    bustupWait(ref_7e);
    bustupFree(ref_72);
    unitRestoreFacing(ulala);
    b(label_d3);
  label_83:
    bitGet(var_0, MBIT_JYORI_URARA_02);
    bnz(var_0, label_a1);
    unitFacePlayer(ulala);
    ref_86 = bustupLoad(bustup_1b);
    bustupWait(ref_86);
    ref_88 = bustupAlloc(ref_86, left, rgb(0,0,0));
    bustupFade(ref_88, rgb(128,0,0), 30);
    ref_8a = dialogAlloc();
    ref_8b = msgShow(msg_3);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]Ah! Come to think of it,
[tab]Makimura invited me for a cruise
[tab]even though he didn’t have a boat!
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_2d, 1);
    wait(ref_8b);
    ref_8e = bustupFade(ref_88, rgb(0,0,0), 10);
    bustupWait(ref_8e);
    bustupFree(ref_88);
    unitAnimationPlay(ulala, animation_a, 1);
    ref_92 = bustupLoad(bustup_19);
    bustupWait(ref_92);
    ref_94 = bustupAlloc(ref_92, left, rgb(0,0,0));
    bustupFade(ref_94, rgb(128,0,0), 30);
    ref_96 = msgShow(msg_4);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]Uki------------!!
[tab]I knew I should’ve smacked him!
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_2f, 1);
    wait(ref_96);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_8a);
    ref_9b = bustupFade(ref_94, rgb(0,0,0), 10);
    bustupWait(ref_9b);
    bustupFree(ref_94);
    unitRestoreFacing(ulala);
    bitSet(MBIT_JYORI_URARA_02);
    b(label_d3);
  label_a1:
    unitFacePlayer(ulala);
    ref_a2 = bustupLoad(bustup_17);
    bustupWait(ref_a2);
    ref_a4 = bustupAlloc(ref_a2, left, rgb(0,0,0));
    bustupFade(ref_a4, rgb(128,0,0), 30);
    ref_a6 = dialogAlloc();
    ref_a7 = msgShow(msg_5);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]Now that I think of it, Ma-ya, you
[tab]have a license to scuba dive, don’t you?
[tab]Hmmmm... Maybe I should get one.
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_2d, 1);
    wait(ref_a7);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_a6);
    ref_ac = bustupFade(ref_a4, rgb(0,0,0), 10);
    bustupWait(ref_ac);
    bustupFree(ref_a4);
    unitRestoreFacing(ulala);
    b(label_d3);
  label_b1:
    bitGet(var_0, MBIT_JYORI_URARA_01);
    bnz(var_0, label_c4);
    unitFacePlayer(ulala);
    ref_b4 = bustupLoad(bustup_1d);
    bustupWait(ref_b4);
    ref_b6 = bustupAlloc(ref_b4, left, rgb(0,0,0));
    bustupFade(ref_b6, rgb(128,0,0), 30);
    ref_b8 = dialogAlloc();
    ref_b9 = msgShow(msg_6);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]I wonder why... I’ve felt that I’ve seen
[tab][tatsuya]-kun at GOLD before...
[tab]That can’t be...
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_1a, 1);
    wait(ref_b9);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_b8);
    ref_be = bustupFade(ref_b6, rgb(0,0,0), 10);
    bustupWait(ref_be);
    bustupFree(ref_b6);
    unitRestoreFacing(ulala);
    bitSet(MBIT_JYORI_URARA_01);
    b(label_d3);
  label_c4:
    unitFacePlayer(ulala);
    ref_c5 = bustupLoad(bustup_1d);
    bustupWait(ref_c5);
    ref_c7 = bustupAlloc(ref_c5, left, rgb(0,0,0));
    bustupFade(ref_c7, rgb(128,0,0), 30);
    ref_c9 = dialogAlloc();
    ref_ca = msgShow(msg_7);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]The "D五j二 Vu Boy"...
[tab]I don’t believe that it’s just for you,
[tab]but for me as well...
[wait][clear]
***************************************/
    unitAnimationPlay(ulala, animation_6, 1);
    wait(ref_ca);
    unitAnimationPlay(ulala, animation_a, 1);
    dialogFree(ref_c9);
    ref_cf = bustupFade(ref_c7, rgb(0,0,0), 10);
    bustupWait(ref_cf);
    bustupFree(ref_c7);
    unitRestoreFacing(ulala);
  label_d3:
    controlEnable();
}

function B_KATUYYY()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_119);
    bitGet(var_0, EBIT_E0037);
    bnz(var_0, label_ee);
    unitFacePlayer(katsuya);
    ref_db = bustupLoad(bustup_21);
    bustupWait(ref_db);
    ref_dd = bustupAlloc(ref_db, left, rgb(0,0,0));
    bustupFade(ref_dd, rgb(128,0,0), 30);
    ref_df = dialogAlloc();
    ref_e0 = msgShow(msg_8);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]That proprietor is an information expert.
[tab]Many guys at the station rely on him
[tab]to keep tabs of the word on the street.
[wait][clear]
***************************************/
    unitLookAtUnit(katsuya, shopkeeper);
    wait(ref_e0);
    unitAnimationPlay(katsuya, animation_a, 1);
    ref_e4 = msgShow(msg_9);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]You can’t say that it is legal,
[tab]but we’re in a similar situation.
[tab]Why don’t you try talking to him?
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_2d, 1);
    wait(ref_e4);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_df);
    ref_e9 = bustupFade(ref_dd, rgb(0,0,0), 10);
    bustupWait(ref_e9);
    bustupFree(ref_dd);
    unitRestoreFacing(katsuya);
    b(label_126);
  label_ee:
    bitGet(var_0, MBIT_JYORI_PAO_01);
    bnz(var_0, label_109);
    unitFacePlayer(katsuya);
    ref_f1 = bustupLoad(bustup_23);
    bustupWait(ref_f1);
    ref_f3 = bustupAlloc(ref_f1, left, rgb(0,0,0));
    bustupFade(ref_f3, rgb(128,0,0), 30);
    ref_f5 = dialogAlloc();
    ref_f6 = msgShow(msg_10);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]I understand that this situation we are
[tab]encountering is hard to believe.
[tab]But... What can we do!?
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_2d, 1);
    wait(ref_f6);
    unitAnimationPlay(katsuya, animation_a, 1);
    ref_fa = msgShow(msg_11);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]If my testimony, that of a fellow
[tab]civil servant, can’t get them to believe...
[tab]How can I get the police to move!?
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_6, 1);
    wait(ref_fa);
    unitAnimationPlay(katsuya, animation_a, 1);
    ref_fe = msgShow(msg_12);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]We are the guardians of the law...
[tab]but the law is there for the people! 
[tab]To protect the law is to protect people... But...
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_2f, 1);
    wait(ref_fe);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_f5);
    ref_103 = bustupFade(ref_f3, rgb(0,0,0), 10);
    bustupWait(ref_103);
    bustupFree(ref_f3);
    unitRestoreFacing(katsuya);
    bitSet(MBIT_JYORI_PAO_01);
    b(label_126);
  label_109:
    unitFacePlayer(katsuya);
    ref_10a = bustupLoad(bustup_21);
    bustupWait(ref_10a);
    ref_10c = bustupAlloc(ref_10a, left, rgb(0,0,0));
    bustupFade(ref_10c, rgb(128,0,0), 30);
    ref_10e = dialogAlloc();
    ref_10f = msgShow(msg_13);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]From here on in, this is my personal will.
[tab]As a human being, I plan to confront
[tab]this case’s solution head on.
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_2d, 1);
    wait(ref_10f);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_10e);
    ref_114 = bustupFade(ref_10c, rgb(0,0,0), 10);
    bustupWait(ref_114);
    bustupFree(ref_10c);
    unitRestoreFacing(katsuya);
    b(label_126);
  label_119:
    ref_119 = bustupLoad(bustup_27);
    bustupWait(ref_119);
    ref_11b = bustupAlloc(ref_119, left, rgb(0,0,0));
    bustupFade(ref_11b, rgb(128,0,0), 30);
    ref_11d = dialogAlloc();
    ref_11e = msgShow(msg_14);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]Was that...really [tatsuya]...? 
[tab]He had a Persona, and was skilled in movement...
[tab]He’s so different from the one I know...
[wait][clear]
***************************************/
    unitAnimationPlay(katsuya, animation_6, 1);
    wait(ref_11e);
    unitAnimationPlay(katsuya, animation_a, 1);
    dialogFree(ref_11d);
    ref_123 = bustupFade(ref_11b, rgb(0,0,0), 10);
    bustupWait(ref_123);
    bustupFree(ref_11b);
  label_126:
    controlEnable();
}

function B_PAO()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_14d);
    bitGet(var_0, EBIT_E0033);
    bnz(var_0, label_13d);
    unitFacePlayer(baofu);
    ref_12e = bustupLoad(bustup_2d);
    bustupWait(ref_12e);
    ref_130 = bustupAlloc(ref_12e, left, rgb(0,0,0));
    bustupFade(ref_130, rgb(128,0,0), 30);
    ref_132 = dialogAlloc();
    ref_133 = msgShow(msg_15);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]Hmmm... This is a nice place here.
[tab]But this is a cafe?
[tab]I thought it was a new bar.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_28, 1);
    wait(ref_133);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_132);
    ref_138 = bustupFade(ref_130, rgb(0,0,0), 10);
    bustupWait(ref_138);
    bustupFree(ref_130);
    unitRestoreFacing(baofu);
    b(label_174);
  label_13d:
    unitFacePlayer(baofu);
    ref_13e = bustupLoad(bustup_31);
    bustupWait(ref_13e);
    ref_140 = bustupAlloc(ref_13e, left, rgb(0,0,0));
    bustupFade(ref_140, rgb(128,0,0), 30);
    ref_142 = dialogAlloc();
    ref_143 = msgShow(msg_16);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]Whether it’s a lie or a delusion, if it
[tab]becomes a rumor, it becomes a reality.
[tab]...Even a model blimp flew.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1d, 1);
    wait(ref_143);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_142);
    ref_148 = bustupFade(ref_140, rgb(0,0,0), 10);
    bustupWait(ref_148);
    bustupFree(ref_140);
    unitRestoreFacing(baofu);
    b(label_174);
  label_14d:
    bitGet(var_0, MBIT_JYORI_PPPAO_01);
    bnz(var_0, label_165);
    unitFacePlayer(baofu);
    ref_150 = bustupLoad(bustup_2d);
    bustupWait(ref_150);
    ref_152 = bustupAlloc(ref_150, left, rgb(0,0,0));
    bustupFade(ref_152, rgb(128,0,0), 30);
    ref_154 = dialogAlloc();
    ref_155 = msgShow(msg_17);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]"D五j二 vu" is just the mind playing tricks...
[tab]It occurs when the brain confuses recent
[tab]memories with past memories.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_2d, 1);
    wait(ref_155);
    ref_158 = msgShow(msg_18);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]That’s why several people
[tab]don’t have one chance in a million to
[tab]experience the same "d五j二 vu".
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1a, 1);
    wait(ref_158);
    ref_15b = msgShow(msg_19);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]If that does happen, then it means
[tab]it’s something other than "d五j二 vu"...
[tab]I don’t know what that something is, though.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_2d, 1);
    wait(ref_15b);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_154);
    ref_160 = bustupFade(ref_152, rgb(0,0,0), 10);
    bustupWait(ref_160);
    bustupFree(ref_152);
    unitRestoreFacing(baofu);
    b(label_174);
  label_165:
    unitFacePlayer(baofu);
    ref_166 = bustupLoad(bustup_2d);
    bustupWait(ref_166);
    ref_168 = bustupAlloc(ref_166, left, rgb(0,0,0));
    bustupFade(ref_168, rgb(128,0,0), 30);
    ref_16a = dialogAlloc();
    ref_16b = msgShow(msg_20);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]Actually, I’ve experienced several cases
[tab]before coming here. I don’t think that it
[tab]has any relation with New World Order.
[wait][clear]
***************************************/
    unitAnimationPlay(baofu, animation_1a, 1);
    wait(ref_16b);
    unitAnimationPlay(baofu, animation_a, 1);
    dialogFree(ref_16a);
    ref_170 = bustupFade(ref_168, rgb(0,0,0), 10);
    bustupWait(ref_170);
    bustupFree(ref_168);
    unitRestoreFacing(baofu);
  label_174:
    controlEnable();
}

function B_NANJ()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_187);
    ref_179 = bustupLoad(bustup_36);
    bustupWait(ref_179);
    ref_17b = bustupAlloc(ref_179, left, rgb(0,0,0));
    bustupFade(ref_17b, rgb(128,0,0), 30);
    ref_17d = dialogAlloc();
    ref_17e = msgShow(msg_21);
/***************************************
[color(yellow)]Nanjo[color(white)]
[tab]A pirate flag... a "Jolly Roger"...
[tab]Others may see what we are doing
[tab]as no different than what pirates do...
[wait][clear]
***************************************/
    unitAnimationPlay(nanjo, animation_1a, 1);
    wait(ref_17e);
    unitAnimationPlay(nanjo, animation_a, 1);
    dialogFree(ref_17d);
    ref_183 = bustupFade(ref_17b, rgb(0,0,0), 10);
    bustupWait(ref_183);
    bustupFree(ref_17b);
    b(label_196);
  label_187:
    unitFacePlayer(nanjo);
    ref_188 = bustupLoad(bustup_36);
    bustupWait(ref_188);
    ref_18a = bustupAlloc(ref_188, left, rgb(0,0,0));
    bustupFade(ref_18a, rgb(128,0,0), 30);
    ref_18c = dialogAlloc();
    ref_18d = msgShow(msg_22);
/***************************************
[color(yellow)]Nanjo[color(white)]
[tab]That boy named [tatsuya]... It seems that
[tab]he is Sergeant [suou]’s younger brother.
[tab]A family of Persona users...
[wait][clear]
***************************************/
    unitAnimationPlay(nanjo, animation_2d, 1);
    wait(ref_18d);
    unitAnimationPlay(nanjo, animation_a, 1);
    dialogFree(ref_18c);
    ref_192 = bustupFade(ref_18a, rgb(0,0,0), 10);
    bustupWait(ref_192);
    bustupFree(ref_18a);
    unitRestoreFacing(nanjo);
  label_196:
    controlEnable();
}

function B_ERI()
{
    controlDisable();
    bitGet(var_0, EBIT_E006F);
    bnz(var_0, label_1ab);
    unitFacePlayer(elly);
    ref_19c = bustupLoad(bustup_3d);
    bustupWait(ref_19c);
    ref_19e = bustupAlloc(ref_19c, left, rgb(0,0,0));
    bustupFade(ref_19e, rgb(128,0,0), 30);
    ref_1a0 = dialogAlloc();
    ref_1a1 = msgShow(msg_23);
/***************************************
[color(yellow)]Elly[color(white)]
[tab]"Gou... ma... den"? I never heard of it...
[tab]It must be a fictional ship... Still, the
[tab]name of this cafe...[wait][clear]
***************************************/
    unitAnimationPlay(elly, animation_2d, 1);
    wait(ref_1a1);
    unitAnimationPlay(elly, animation_a, 1);
    dialogFree(ref_1a0);
    ref_1a6 = bustupFade(ref_19e, rgb(0,0,0), 10);
    bustupWait(ref_1a6);
    bustupFree(ref_19e);
    unitRestoreFacing(elly);
    b(label_1ba);
  label_1ab:
    unitFacePlayer(elly);
    ref_1ac = bustupLoad(bustup_3d);
    bustupWait(ref_1ac);
    ref_1ae = bustupAlloc(ref_1ac, left, rgb(0,0,0));
    bustupFade(ref_1ae, rgb(128,0,0), 30);
    ref_1b0 = dialogAlloc();
    ref_1b1 = msgShow(msg_24);
/***************************************
[color(yellow)]Elly[color(white)]
[tab]That [tatsuya]...
[tab]So he’s Mr. Katsuya’s little brother.
[tab]Come to think of it, they do look alike...
[wait][clear]
***************************************/
    unitAnimationPlay(elly, animation_2d, 1);
    wait(ref_1b1);
    unitAnimationPlay(elly, animation_a, 1);
    dialogFree(ref_1b0);
    ref_1b6 = bustupFade(ref_1ae, rgb(0,0,0), 10);
    bustupWait(ref_1b6);
    bustupFree(ref_1ae);
    unitRestoreFacing(elly);
  label_1ba:
    controlEnable();
}

function B_TATU()
{
}

function SHOP()
{
    controlDisable();
    ref_1be = shopOverlayInit();
    unitFacePlayer(shopkeeper);
    delayClear();
    delayWait(10);
    playerConvertToUnit(maya, sprite_0, north);
    playerHide();
    unitFaceUnit(maya, shopkeeper);
    bitGet(var_0, MBIT_JYORI_RIYOU);
    bne(var_0, 0, label_1c9);
    b(label_1d2);
    b(label_1d2);
  label_1c9:
    bne(var_0, 1, label_1d2);
    bitGet(var_0, MBIT_AIS_57);
    bne(var_0, 0, label_1ce);
    b(label_1ee);
    b(label_1d1);
  label_1ce:
    bne(var_0, 1, label_1d1);
    b(label_1ff);
    b(label_1d1);
  label_1d1:
    b(label_1d2);
  label_1d2:
    ref_1d2 = bustupLoad(bustup_fb);
    bustupWait(ref_1d2);
    ref_1d4 = bustupAlloc(ref_1d2, right, rgb(0,0,0));
    bustupFade(ref_1d4, rgb(128,0,0), 30);
    ref_1d6 = dialogAlloc();
    unitAnimationPlay(shopkeeper, animation_21, 1);
    ref_1d8 = msgShow(msg_25);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]Welcome to Jolly Rogers, the store
[tab]hoisting the pirate flag.
[tab]I am the proprietor and the cook.
[wait][clear][color(yellow)]Rumormonger Master[color(white)]
[tab][color(green)]The barkeeper of the cafe Jolly Rogers.
[tab]He is also familiar with the city’s rumors.
[tab]He is known as the Rumormonger Master.[color(white)]
[wait][clear][color(yellow)]Rumormonger Master[color(white)]
[tab]By the way, are you a magazine reporter?
[tab]I’m not blind. I can tell.
[tab]I have a proposal for you...
[wait][clear][color(yellow)]Rumormonger Master[color(white)]
[tab]A sailor is just a man on land...
[tab]Standing behind this counter, leaning my
[tab]ears toward rumors has become my only joy.
[wait][clear][color(yellow)]Rumormonger Master[color(white)]
[tab]If you share your information with me, my
[tab]joy would be all the more. As thanks, I’ll
[tab]give you my rumors. How about it?
[wait][clear]
***************************************/
    wait(ref_1d8);
    bitGet(var_0, MBIT_AIS_57);
    bez(var_0, label_1df);
    ref_1dc = msgShow(msg_26);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]I won’t push it...
[tab]I feel that I can get along with you,
[tab]so I’ll give you discount on the tab.
[wait][clear][color(yellow)]Rumormonger Master[color(white)]
[tab]Think it over while you
[tab]sip some coffee.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_1dc);
  label_1df:
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_1d6);
    ref_1e1 = bustupFade(ref_1d4, rgb(0,0,0), 10);
    bustupWait(ref_1e1);
    bustupFree(ref_1d4);
    wait(ref_1be);
    shopInventory(12, shopInventory_b);
    bitGet(var_0, MBIT_AIS_57);
    bne(var_0, 0, label_1ea);
    shopRate(100);
    b(label_1ed);
  label_1ea:
    bne(var_0, 1, label_1ed);
    shopRate(80);
    b(label_1ed);
  label_1ed:
    b(label_20f);
  label_1ee:
    ref_1ee = bustupLoad(bustup_fb);
    bustupWait(ref_1ee);
    ref_1f0 = bustupAlloc(ref_1ee, right, rgb(0,0,0));
    bustupFade(ref_1f0, rgb(128,0,0), 30);
    ref_1f2 = dialogAlloc();
    ref_1f3 = msgShow(msg_27);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]Welcome...

[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_1f3);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_1f2);
    ref_1f8 = bustupFade(ref_1f0, rgb(0,0,0), 10);
    bustupWait(ref_1f8);
    bustupFree(ref_1f0);
    wait(ref_1be);
    shopInventory(12, shopInventory_b);
    shopRate(100);
    b(label_20f);
  label_1ff:
    ref_1ff = bustupLoad(bustup_fb);
    bustupWait(ref_1ff);
    ref_201 = bustupAlloc(ref_1ff, right, rgb(0,0,0));
    bustupFade(ref_201, rgb(128,0,0), 30);
    ref_203 = dialogAlloc();
    ref_204 = msgShow(msg_28);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]Hmm... What a strange feeling. I never
[tab]thought about my compatibility with others.
[tab]Oh, well. I’ll give you a discount.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_204);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_203);
    ref_209 = bustupFade(ref_201, rgb(0,0,0), 10);
    bustupWait(ref_209);
    bustupFree(ref_201);
    wait(ref_1be);
    shopInventory(12, shopInventory_b);
    shopRate(80);
  label_20f:
    ref_20f = bustupLoad(bustup_fb);
    bustupWait(ref_20f);
    ref_211 = bustupAlloc(ref_20f, right, rgb(0,0,0));
    bustupFade(ref_211, rgb(128,0,0), 30);
    choiceSetResult(2);
    op_105(3);
    ref_215 = dialogAlloc();
    ref_216 = msgShow(msg_29);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]What do you want?
[choice(4)]Dine in
Talk
Never mind
Leave the store
[end_choice][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_216);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_21f);
    li(var_5, 0);
    b(label_237);
  label_21f:
    bne(var_0, 1, label_231);
    choiceSetResult(2);
    op_105(2);
    ref_222 = msgShow(msg_30);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]What do you want to talk about?
[choice(3)]Talk to the Master
Ask about dining in
[if_all(EBIT_SINARIOFF)]Hidden items
[end_choice][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_222);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    choiceGetResult(var_0);
    bne(var_0, 0, label_22a);
    li(var_5, 1);
    b(label_230);
  label_22a:
    bne(var_0, 1, label_22d);
    li(var_5, 2000);
    b(label_230);
  label_22d:
    bne(var_0, 2, label_230);
    li(var_5, 1000);
    b(label_230);
  label_230:
    b(label_237);
  label_231:
    bne(var_0, 2, label_234);
    li(var_5, 2);
    b(label_237);
  label_234:
    bne(var_0, 3, label_237);
    li(var_5, 3);
    b(label_237);
  label_237:
    dialogFree(ref_215);
    ref_238 = bustupFade(ref_211, rgb(0,0,0), 10);
    bustupWait(ref_238);
    bustupFree(ref_211);
    ref_23b = shopOpen(4);
    wait(ref_23b);
}

function HA_SHOP_RESTART_0()
{
    ref_23e = bustupLoad(bustup_fb);
    bustupWait(ref_23e);
    ref_240 = bustupAlloc(ref_23e, right, rgb(0,0,0));
    bustupFade(ref_240, rgb(128,0,0), 30);
    choiceSetResult(2);
    op_105(3);
    ref_244 = dialogAlloc();
    ref_245 = msgShow(msg_31);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]Is there anything else?
[choice(4)]Dine in
Talk
Never mind
Leave the store
[end_choice][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_245);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_24e);
    li(var_5, 0);
    b(label_264);
  label_24e:
    bne(var_0, 1, label_25e);
    choiceSetResult(2);
    op_105(2);
    ref_251 = msgShow(msg_32);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]What do you want to talk about?
[choice(3)]Talk to the Master
Ask about dining in
[if_all(EBIT_SINARIOFF)]Hidden items
[end_choice][clear]
***************************************/
    wait(ref_251);
    choiceGetResult(var_0);
    bne(var_0, 0, label_257);
    li(var_5, 1);
    b(label_25d);
  label_257:
    bne(var_0, 1, label_25a);
    li(var_5, 2000);
    b(label_25d);
  label_25a:
    bne(var_0, 2, label_25d);
    li(var_5, 1000);
    b(label_25d);
  label_25d:
    b(label_264);
  label_25e:
    bne(var_0, 2, label_261);
    li(var_5, 2);
    b(label_264);
  label_261:
    bne(var_0, 3, label_264);
    li(var_5, 3);
    b(label_264);
  label_264:
    dialogFree(ref_244);
    ref_265 = bustupFade(ref_240, rgb(0,0,0), 10);
    bustupWait(ref_265);
    bustupFree(ref_240);
}

function HA_SHOP_TALK_0()
{
  label_269:
    choiceSetResult(2);
    op_105(2);
    ref_26b = bustupLoad(bustup_1);
    bustupWait(ref_26b);
    ref_26d = bustupAlloc(ref_26b, center, rgb(0,0,0));
    bustupFade(ref_26d, rgb(128,0,0), 30);
    ref_26f = dialogChoiceAlloc();
    ref_270 = msgShow(msg_33);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]What do you want to talk about?
[choice(3)]Ask about rumors
Make small talk
Nothing
[end_choice][clear]
***************************************/
    wait(ref_270);
    dialogFree(ref_26f);
    ref_273 = bustupFade(ref_26d, rgb(0,0,0), 10);
    bustupWait(ref_273);
    bustupFree(ref_26d);
    choiceGetResult(var_0);
    bne(var_0, 0, label_27a);
    b(label_280);
    b(label_280);
  label_27a:
    bne(var_0, 1, label_27d);
    b(label_33b);
    b(label_280);
  label_27d:
    bne(var_0, 2, label_280);
    b(label_379);
    b(label_280);
  label_280:
    bitGet(var_0, EBIT_E001F);
    bez(var_0, label_32d);
    bitGet(var_0, MBIT_KI_BATOLUAKUSE);
    bnz(var_0, label_288);
    bitGet(var_0, MBIT_DBATOLU);
    bnz(var_0, label_288);
    li(var_1, 1);
    b(label_2bf);
  label_288:
    bitGet(var_0, MBIT_ZIPDAMEDAME);
    bez(var_0, label_28e);
    bitGet(var_0, MBIT_KI_GYPSTART);
    bnz(var_0, label_28e);
    li(var_1, 2);
    b(label_2bf);
  label_28e:
    bitGet(var_0, EBIT_E0037);
    bez(var_0, label_32d);
    bitGet(var_0, MBIT_KI_TOADEF);
    bnz(var_0, label_296);
    bitGet(var_0, MBIT_KE_TOA);
    bnz(var_0, label_296);
    li(var_1, 3);
    b(label_2bf);
  label_296:
    bitGet(var_0, EBIT_E0038);
    bez(var_0, label_32d);
    bitGet(var_0, MBIT_KI_TONYITEM);
    bnz(var_0, label_29e);
    bitGet(var_0, MBIT_KE_TONY);
    bnz(var_0, label_29e);
    li(var_1, 4);
    b(label_2bf);
  label_29e:
    bitGet(var_0, EBIT_E0043);
    bez(var_0, label_32d);
    bitGet(var_0, MBIT_DMAGICK);
    bez(var_0, label_2aa);
    bitGet(var_0, MBIT_DMAGICKCADE);
    bnz(var_0, label_2aa);
    bitGet(var_0, MBIT_KI_PELPELCADE);
    bnz(var_0, label_2aa);
    bitGet(var_0, MBIT_DPELPEL);
    bnz(var_0, label_2aa);
    li(var_1, 5);
    b(label_2bf);
  label_2aa:
    bitGet(var_0, EBIT_E0046);
    bez(var_0, label_32d);
    bitGet(var_0, MBIT_HI_GYPSTART);
    bez(var_0, label_2b2);
    bitGet(var_0, MBIT_KI_GYPAISHO1);
    bnz(var_0, label_2b2);
    li(var_1, 6);
    b(label_2bf);
  label_2b2:
    bitGet(var_0, EBIT_E009F);
    bez(var_0, label_32d);
    bitGet(var_0, MBIT_HI_GYPAISHO1);
    bez(var_0, label_2ba);
    bitGet(var_0, MBIT_KI_GYPAISHO2);
    bnz(var_0, label_2ba);
    li(var_1, 7);
    b(label_2bf);
  label_2ba:
    bitGet(var_0, EBIT_E00AF);
    bez(var_0, label_32d);
    bitGet(var_0, MBIT_KI_JEWKOUNAN);
    bnz(var_0, label_32d);
    li(var_1, 8);
  label_2bf:
    ref_2bf = bustupLoad(bustup_fb);
    bustupWait(ref_2bf);
    ref_2c1 = bustupAlloc(ref_2bf, right, rgb(0,0,0));
    bustupFade(ref_2c1, rgb(128,0,0), 30);
    ref_2c3 = dialogAlloc();
    unitAnimationPlay(shopkeeper, animation_21, 1);
    rand(var_0, 11);
    boutrange(var_0, 0, 3, label_2ca);
    ref_2c7 = msgShow(msg_34);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]A rumor... It’s not like I don’t have one...
[tab]But first, let’s hear what you got.
[wait][clear]
***************************************/
    wait(ref_2c7);
    b(label_2d2);
  label_2ca:
    boutrange(var_0, 4, 7, label_2ce);
    ref_2cb = msgShow(msg_35);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]Speaking of which,
[tab]I just got some new information...
[tab]Let’s trade rumors.
[wait][clear]
***************************************/
    wait(ref_2cb);
    b(label_2d2);
  label_2ce:
    boutrange(var_0, 8, 11, label_2d2);
    ref_2cf = msgShow(msg_36);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]Let’s see... I have a nice one for you.
[tab]Tell me yours first.
[wait][clear]
***************************************/
    wait(ref_2cf);
    b(label_2d2);
  label_2d2:
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_2c3);
    ref_2d4 = bustupFade(ref_2c1, rgb(0,0,0), 10);
    bustupWait(ref_2d4);
    bustupFree(ref_2c1);
    unitAnimationPlay(maya, animation_a, 1);
    delayClear();
    delayWait(20);
    unitAnimationPlay(maya, animation_2d, 1);
    delayClear();
    delayWait(60);
    unitAnimationPlay(maya, animation_a, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(shopkeeper, animation_6, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(shopkeeper, animation_6, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    delayClear();
    delayWait(15);
    ref_2ec = bustupLoad(bustup_fb);
    bustupWait(ref_2ec);
    ref_2ee = bustupAlloc(ref_2ec, right, rgb(0,0,0));
    bustupFade(ref_2ee, rgb(128,0,0), 30);
    ref_2f0 = dialogAlloc();
    unitAnimationPlay(shopkeeper, animation_21, 1);
    rand(var_0, 11);
    boutrange(var_0, 0, 3, label_2f7);
    ref_2f4 = msgShow(msg_37);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]Hmm... I see...
[tab]That is very interesting.
[tab]Now, I’ll tell you mine.
[wait][clear]
***************************************/
    wait(ref_2f4);
    b(label_2ff);
  label_2f7:
    boutrange(var_0, 4, 7, label_2fb);
    ref_2f8 = msgShow(msg_38);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]That’s a reporter for you.
[tab]I did not know that...
[tab]But mine isn’t too shabby, either.
[wait][clear]
***************************************/
    wait(ref_2f8);
    b(label_2ff);
  label_2fb:
    boutrange(var_0, 8, 11, label_2ff);
    ref_2fc = msgShow(msg_39);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]I see... It is a bit unbelievable, but if
[tab]it is true, then that is a huge rumor.
[tab]Alright, here’s mine...
[wait][clear]
***************************************/
    wait(ref_2fc);
    b(label_2ff);
  label_2ff:
    bne(var_1, 1, label_304);
    ref_300 = msgShow(msg_40);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]You know the [color(orange)]Battle Master[color(white)], right?
[tab]They say if you win the contest, you get
[tab][color(orange)]real accessories that help in battle[color(white)].
[wait][clear]
***************************************/
    wait(ref_300);
    bitSet(MBIT_KI_BATOLUAKUSE);
    b(label_327);
  label_304:
    bne(var_1, 2, label_309);
    ref_305 = msgShow(msg_41);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab][color(orange)]The Sumaru Genie[color(white)], famous for fortunes that
[tab]don’t come true, seems to have [color(orange)]begun using
[tab]Wang Long[color(white)]. Now all her fortunes come true.
[wait][clear]
***************************************/
    wait(ref_305);
    bitSet(MBIT_KI_GYPSTART);
    b(label_327);
  label_309:
    bne(var_1, 3, label_30e);
    ref_30a = msgShow(msg_42);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]You know [color(orange)]Toua Defense[color(white)]?
[tab]They say that it [color(orange)]has special armor[color(white)].
[tab]I hear that it’s hard to penetrate.
[wait][clear]
***************************************/
    wait(ref_30a);
    bitSet(MBIT_KI_TOADEF);
    b(label_327);
  label_30e:
    bne(var_1, 4, label_313);
    ref_30f = msgShow(msg_43);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]There’s a store in Yumezaki called
[tab][color(orange)]Tony’s Shop[color(white)]. The guy there is a smuggler for
[tab]the Mafia, and [color(orange)]he sells mysterious items[color(white)].
[wait][clear]
***************************************/
    wait(ref_30f);
    bitSet(MBIT_KI_TONYITEM);
    b(label_327);
  label_313:
    bne(var_1, 5, label_318);
    ref_314 = msgShow(msg_44);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]There’s the magazine [color(orange)]Fantasy World[color(white)], right?
[tab]There is a rumor if you win the contest,
[tab][color(orange)]you get a card with strange powers[color(white)].
[wait][clear]
***************************************/
    wait(ref_314);
    bitSet(MBIT_KI_PELPELCADE);
    b(label_327);
  label_318:
    bne(var_1, 6, label_31d);
    ref_319 = msgShow(msg_45);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab][color(orange)]The Sumaru Genie[color(white)] seems to have[color(orange)] started
[tab]Affinity Readings[color(white)].
[tab]Good or bad, it really comes true.
[wait][clear]
***************************************/
    wait(ref_319);
    bitSet(MBIT_KI_GYPAISHO1);
    b(label_327);
  label_31d:
    bne(var_1, 7, label_322);
    ref_31e = msgShow(msg_46);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]Did [color(orange)]the Sumaru Genie[color(white)] improve her skills?
[tab][color(orange)]There are more people getting into
[tab]Affinity Readings[color(white)]. Why don’t you try?
[wait][clear]
***************************************/
    wait(ref_31e);
    bitSet(MBIT_KI_GYPAISHO2);
    b(label_327);
  label_322:
    bne(var_1, 8, label_327);
    ref_323 = msgShow(msg_47);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]About the [color(orange)]Jeweler Padparacha[color(white)],
[tab]it’s rumored that it’s going to[color(orange)] reopen in
[tab]Kounan[color(white)]. I guess the storekeeper was alright.
[wait][clear]
***************************************/
    wait(ref_323);
    bitSet(MBIT_KI_JEWKOUNAN);
    b(label_327);
  label_327:
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_2f0);
    ref_329 = bustupFade(ref_2ee, rgb(0,0,0), 10);
    bustupWait(ref_329);
    bustupFree(ref_2ee);
    b(label_269);
  label_32d:
    ref_32d = bustupLoad(bustup_fb);
    bustupWait(ref_32d);
    ref_32f = bustupAlloc(ref_32d, right, rgb(0,0,0));
    bustupFade(ref_32f, rgb(128,0,0), 30);
    ref_331 = dialogAlloc();
    ref_332 = msgShow(msg_48);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]I’m sorry, I’m out of rumors right now.
[tab]When I get some more, I’ll let you
[tab]know.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_332);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_331);
    ref_337 = bustupFade(ref_32f, rgb(0,0,0), 10);
    bustupWait(ref_337);
    bustupFree(ref_32f);
    b(label_269);
  label_33b:
    bitGet(var_0, EBIT_E0043);
    bnz(var_0, label_36b);
    bitGet(var_0, EBIT_E0033);
    bnz(var_0, label_35d);
    bitGet(var_0, EBIT_E002B);
    bnz(var_0, label_34f);
    ref_341 = bustupLoad(bustup_fb);
    bustupWait(ref_341);
    ref_343 = bustupAlloc(ref_341, right, rgb(0,0,0));
    bustupFade(ref_343, rgb(128,0,0), 30);
    ref_345 = dialogAlloc();
    ref_346 = msgShow(msg_49);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]Some school kids went to the Aerospace Museum
[tab]for a field trip. With the opening of it,
[tab]this city has become lively.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_346);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_345);
    ref_34b = bustupFade(ref_343, rgb(0,0,0), 10);
    bustupWait(ref_34b);
    bustupFree(ref_343);
    b(label_269);
  label_34f:
    ref_34f = bustupLoad(bustup_fb);
    bustupWait(ref_34f);
    ref_351 = bustupAlloc(ref_34f, right, rgb(0,0,0));
    bustupFade(ref_351, rgb(128,0,0), 30);
    ref_353 = dialogAlloc();
    ref_354 = msgShow(msg_50);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]It seems that all the children at the
[tab]museum were safe. That is good, but...
[tab]Wasn’t there an accident like this before?
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_354);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_353);
    ref_359 = bustupFade(ref_351, rgb(0,0,0), 10);
    bustupWait(ref_359);
    bustupFree(ref_351);
    b(label_269);
  label_35d:
    ref_35d = bustupLoad(bustup_fb);
    bustupWait(ref_35d);
    ref_35f = bustupAlloc(ref_35d, right, rgb(0,0,0));
    bustupFade(ref_35f, rgb(128,0,0), 30);
    ref_361 = dialogAlloc();
    ref_362 = msgShow(msg_51);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]I’ve watched that building since it opened.
[tab]That blimp was just a paper-model.
[tab]I doubt the press would lie about that...
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_362);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_361);
    ref_367 = bustupFade(ref_35f, rgb(0,0,0), 10);
    bustupWait(ref_367);
    bustupFree(ref_35f);
    b(label_269);
  label_36b:
    ref_36b = bustupLoad(bustup_fb);
    bustupWait(ref_36b);
    ref_36d = bustupAlloc(ref_36b, right, rgb(0,0,0));
    bustupFade(ref_36d, rgb(128,0,0), 30);
    ref_36f = dialogAlloc();
    ref_370 = msgShow(msg_52);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]First strange people, then kidnappings...
[tab]Along with the museum fire, I guess
[tab]there’s nothing safe on land either..
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_370);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_36f);
    ref_375 = bustupFade(ref_36d, rgb(0,0,0), 10);
    bustupWait(ref_375);
    bustupFree(ref_36d);
    b(label_269);
  label_379:
}

function HA_SHOP_END_0()
{
    ref_37a = bustupLoad(bustup_fb);
    bustupWait(ref_37a);
    ref_37c = bustupAlloc(ref_37a, right, rgb(0,0,0));
    bustupFade(ref_37c, rgb(128,0,0), 30);
    ref_37e = dialogAlloc();
    ref_37f = msgShow(msg_53);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]Thank you.
[tab]Come back again.
[tab]Since I will never return to the sea...
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_21, 1);
    wait(ref_37f);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    shopOverlayInit();
    dialogFree(ref_37e);
    ref_385 = bustupFade(ref_37c, rgb(0,0,0), 10);
    bustupWait(ref_385);
    bustupFree(ref_37c);
    bitSet(MBIT_JYORI_RIYOU);
    bitGet(var_0, MBIT_EXITBIT);
    bne(var_0, 0, label_390);
    unitRestoreFacing(shopkeeper);
    unitDespawn(maya, none);
    playerInit(south);
    controlEnable();
    b(label_393);
  label_390:
    bne(var_0, 1, label_393);
    call(EXITBOX);
    b(label_393);
  label_393:
}

function SAGIBOX()
{
    controlDisable();
    unitFacePlayer(makimura);
    ref_396 = bustupLoad(bustup_d4);
    bustupWait(ref_396);
    ref_398 = bustupAlloc(ref_396, right, rgb(0,0,0));
    bustupFade(ref_398, rgb(128,0,0), 30);
    ref_39a = dialogAlloc();
    unitAnimationHold(makimura, animation_1b, -1);
    ref_39c = msgShow(msg_54);
/***************************************
[color(yellow)]Makimura[color(white)]
[tab]Damn... Come to think of it,
[tab]I promised Ulala we would go cruising...

***************************************/
    wait(ref_39c);
    unitAnimationStop(makimura);
    unitAnimationPlay(makimura, animation_6, 1);
    ref_3a0 = msgShow(msg_55);
/***************************************
[tab]That’s a lie, too... Hope she forgot that.
[wait][clear]
***************************************/
    wait(ref_3a0);
    unitAnimationPlay(makimura, animation_0, 1);
    dialogFree(ref_39a);
    ref_3a4 = bustupFade(ref_398, rgb(0,0,0), 10);
    bustupWait(ref_3a4);
    bustupFree(ref_398);
    unitRestoreFacing(makimura);
    controlEnable();
}

function SEKENHANASI()
{
    controlDisable();
    bitGet(var_0, EBIT_E0043);
    bnz(var_0, label_3de);
    bitGet(var_0, EBIT_E0033);
    bnz(var_0, label_3cf);
    bitGet(var_0, EBIT_E002B);
    bnz(var_0, label_3c0);
    unitFaceUnit(npc1, npc2);
    unitFaceUnit(npc2, npc1);
    ref_3b3 = dialogAlloc();
    ref_3b4 = msgShow(msg_56);
/***************************************
[color(yellow)]Fat Man[color(white)]
[tab]I said it’s true...
[tab]That blimp at the museum really flies.
[tab]For emergencies, you know.
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_21, 1);
    wait(ref_3b4);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_3b3);
    ref_3b9 = dialogAlloc();
    ref_3ba = msgShow(msg_57);
/***************************************
[color(yellow)]Businessman[color(white)]
[tab]That’s the rumor the kids were talking
[tab]about. You’re old enough to be able to
[tab]distinguish fantasy from reality!
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_21, 1);
    wait(ref_3ba);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_3b9);
    b(label_3ec);
  label_3c0:
    unitFaceUnit(npc1, npc2);
    unitFaceUnit(npc2, npc1);
    ref_3c2 = dialogAlloc();
    ref_3c3 = msgShow(msg_58);
/***************************************
[color(yellow)]Fat Man[color(white)]
[tab]See, I told you!
[tab]Just as I said!
[tab]That blimp WAS real.
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_26, 1);
    wait(ref_3c3);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_3c2);
    ref_3c8 = dialogAlloc();
    ref_3c9 = msgShow(msg_59);
/***************************************
[color(yellow)]Businessman[color(white)]
[tab]That’s just the force of the explosion
[tab]launching it into the air...
[tab]All it did was fall into the ocean!!
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_26, 1);
    wait(ref_3c9);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_3c8);
    b(label_3ec);
  label_3cf:
    unitFaceUnit(npc1, npc2);
    unitFaceUnit(npc2, npc1);
    ref_3d1 = dialogAlloc();
    ref_3d2 = msgShow(msg_60);
/***************************************
[color(yellow)]Fat Man[color(white)]
[tab]See? The news said it, so it must be true.
[tab]That blimp was real...
[tab]Why don’t you accept it?
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_26, 1);
    wait(ref_3d2);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_3d1);
    ref_3d7 = dialogAlloc();
    ref_3d8 = msgShow(msg_61);
/***************************************
[color(yellow)]Businessman[color(white)]
[tab]Forget about it...
[tab]The news right now is that Joker, right?
[tab]Well, I don’t believe that either.
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_26, 1);
    wait(ref_3d8);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_3d7);
    b(label_3ec);
  label_3de:
    unitFaceUnit(npc1, npc2);
    unitFaceUnit(npc2, npc1);
    ref_3e0 = dialogAlloc();
    ref_3e1 = msgShow(msg_62);
/***************************************
[color(yellow)]Fat Man[color(white)]
[tab]You know, I’m kinda scared...
[tab]There’s been a string of kidnappings, right...?
[tab]At this rate, I’ll be...
[wait][clear]
***************************************/
    unitAnimationPlay(npc2, animation_26, 1);
    wait(ref_3e1);
    unitAnimationPlay(npc2, animation_0, 1);
    dialogFree(ref_3e0);
    ref_3e6 = dialogAlloc();
    ref_3e7 = msgShow(msg_63);
/***************************************
[color(yellow)]Businessman[color(white)]
[tab]How many times I gotta tell ya? ...What are
[tab]they going to do with YOU!? ...Besides, you
[tab]don’t know yet if it’s really kidnapping!
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_26, 1);
    wait(ref_3e7);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_3e6);
  label_3ec:
    controlEnable();
}

function DOORBOX()
{
    controlDisable();
    objAnimRotate(obj_b, 0, -70, 0, 30, 0);
    objAnimRotate(obj_a, 0, 70, 0, 30, 0);
    sndMusicPlay(sound_307b, 127);
    objAnimWait(obj_b);
    objAnimWait(obj_a);
    call(EXITBOX);
}

function EXITBOX()
{
    bitClear(MBIT_EXITBIT);
    mapLoad(rengedai, 0, 0);
}

function warp1()
{
    call(DOORBOX);
}

function TESTBOX()
{
    controlDisable();
    choiceSetResult(2);
    op_105(2);
    ref_3fe = dialogChoiceAlloc();
    ref_3ff = msgShow(msg_64);
/***************************************
Select
[choice(3)]Advance story
Compatibility
Leave
[end_choice][clear]
***************************************/
    wait(ref_3ff);
    dialogFree(ref_3fe);
    choiceGetResult(var_0);
    bne(var_0, 0, label_40d);
    bitSet(EBIT_E001F);
    bitSet(MBIT_ZIPDAMEDAME);
    bitSet(EBIT_E0037);
    bitSet(EBIT_E0038);
    bitSet(EBIT_E0043);
    bitSet(EBIT_E0046);
    bitSet(EBIT_E009F);
    bitSet(EBIT_E00AF);
    b(label_412);
  label_40d:
    bne(var_0, 1, label_410);
    bitSet(MBIT_AIS_57);
    b(label_412);
  label_410:
    bne(var_0, 2, label_412);
    b(label_412);
  label_412:
    controlEnable();
}

function HA_SHOP_EXPLAIN_0()
{
    ref_414 = dialogAlloc();
    ref_415 = msgShow(msg_65);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]Oh, you want to know about dining in?
[tab]You can select "Dine in" here
[tab]to eat...
[wait][clear][color(yellow)]Rumormonger Master[color(white)]
[tab]Meals have the effect of increasing
[tab]a character’s ability temporarily...
[tab]The effect depends on the food.
[wait][clear][color(yellow)]Rumormonger Master[color(white)]
[tab]Once you eat, you cannot have
[tab]another meal until the effect has expired...
[tab]Something like that...
[wait][clear]
***************************************/
    wait(ref_415);
    dialogFree(ref_414);
}

function DECIDE_EAT()
{
    choiceSetResult(1);
    op_105(1);
    msgVar_Number(msgvar_0, var_6);
    unitFacePlayer(shopkeeper);
    ref_41d = bustupLoad(bustup_fb);
    bustupWait(ref_41d);
    ref_41f = bustupAlloc(ref_41d, left, rgb(0,0,0));
    bustupFade(ref_41f, rgb(128,0,0), 30);
    ref_421 = dialogAlloc();
    choiceSetResult(1);
    op_105(1);
    ref_424 = msgShow(msg_66);
/***************************************
[color(yellow)]Rumormonger Master[color(white)]
[tab]That will be ¥[var(msg_var_0)]
[tab]Is that okay?
[choice(2)]Yes
No
[end_choice][clear]
***************************************/
    wait(ref_424);
    choiceGetResult(var_7);
    bne(var_7, 0, label_42a);
    li(var_7, 1);
    b(label_42d);
  label_42a:
    bne(var_7, 1, label_42d);
    li(var_7, 0);
    b(label_42d);
  label_42d:
    wait(ref_424);
    dialogFree(ref_421);
    ref_42f = bustupFade(ref_41f, rgb(0,0,0), 10);
    bustupWait(ref_42f);
    bustupFree(ref_41f);
    li(var_5, 20);
}
